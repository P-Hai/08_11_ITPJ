{
  "service": {
    "service": "ehr-backend-api",
    "serviceObject": {
      "name": "ehr-backend-api"
    },
    "provider": {
      "name": "aws",
      "runtime": "nodejs20.x",
      "region": "ap-southeast-1",
      "stage": "dev",
      "memorySize": 512,
      "timeout": 30,
      "environment": {
        "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
        "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
        "REGION": "ap-southeast-1",
        "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
        "DB_PORT": "5432",
        "DB_NAME": "ehr_production",
        "DB_USER": "postgres",
        "DB_PASSWORD": "EhrAdmin2025!",
        "NODE_ENV": "development",
        "DB_SSL": "true"
      },
      "iam": {
        "role": {
          "statements": [
            {
              "Effect": "Allow",
              "Action": [
                "ses:SendEmail",
                "ses:SendRawEmail"
              ],
              "Resource": "*"
            },
            {
              "Effect": "Allow",
              "Action": [
                "cognito-idp:AdminGetUser",
                "cognito-idp:ListUsers",
                "cognito-idp:AdminCreateUser",
                "cognito-idp:AdminAddUserToGroup",
                "cognito-idp:AdminDisableUser",
                "cognito-idp:AdminSetUserPassword",
                "cognito-idp:AdminInitiateAuth",
                "cognito-idp:AdminRespondToAuthChallenge",
                "cognito-idp:AdminListGroupsForUser"
              ],
              "Resource": "arn:aws:cognito-idp:ap-southeast-1:*:userpool/ap-southeast-1_KAphl41fW"
            },
            {
              "Effect": "Allow",
              "Action": [
                "secretsmanager:GetSecretValue"
              ],
              "Resource": "arn:aws:secretsmanager:ap-southeast-1:*:secret:ehr-system/*"
            },
            {
              "Effect": "Allow",
              "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents"
              ],
              "Resource": "*"
            }
          ]
        }
      },
      "httpApi": {
        "cors": {
          "allowedOrigins": [
            "*"
          ],
          "allowedHeaders": [
            "Content-Type",
            "Authorization"
          ],
          "allowedMethods": [
            "GET",
            "POST",
            "PUT",
            "DELETE",
            "OPTIONS"
          ]
        }
      },
      "versionFunctions": true,
      "compiledCloudFormationTemplate": {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "The AWS CloudFormation template for this Serverless application",
        "Resources": {
          "ServerlessDeploymentBucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
              "BucketEncryption": {
                "ServerSideEncryptionConfiguration": [
                  {
                    "ServerSideEncryptionByDefault": {
                      "SSEAlgorithm": "AES256"
                    }
                  }
                ]
              }
            }
          },
          "ServerlessDeploymentBucketPolicy": {
            "Type": "AWS::S3::BucketPolicy",
            "Properties": {
              "Bucket": {
                "Ref": "ServerlessDeploymentBucket"
              },
              "PolicyDocument": {
                "Statement": [
                  {
                    "Action": "s3:*",
                    "Effect": "Deny",
                    "Principal": "*",
                    "Resource": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            },
                            "/*"
                          ]
                        ]
                      },
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            }
                          ]
                        ]
                      }
                    ],
                    "Condition": {
                      "Bool": {
                        "aws:SecureTransport": false
                      }
                    }
                  }
                ]
              }
            }
          },
          "LoginLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-login"
            }
          },
          "ChangePasswordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-changePassword"
            }
          },
          "RefreshTokenLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-refreshToken"
            }
          },
          "CreateUserLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createUser"
            }
          },
          "ListUsersLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-listUsers"
            }
          },
          "DisableUserLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-disableUser"
            }
          },
          "ResetUserPasswordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-resetUserPassword"
            }
          },
          "GetMyProfileLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyProfile"
            }
          },
          "GetMyMedicalRecordsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyMedicalRecords"
            }
          },
          "GetMyPrescriptionsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyPrescriptions"
            }
          },
          "GetMyVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyVitalSigns"
            }
          },
          "CreatePatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPatient"
            }
          },
          "GetPatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPatient"
            }
          },
          "SearchPatientsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-searchPatients"
            }
          },
          "UpdatePatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updatePatient"
            }
          },
          "CreateVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createVitalSigns"
            }
          },
          "GetVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getVitalSigns"
            }
          },
          "GetLatestVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getLatestVitalSigns"
            }
          },
          "CreateMedicalRecordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createMedicalRecord"
            }
          },
          "GetMedicalRecordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecord"
            }
          },
          "GetMedicalRecordsByPatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecordsByPatient"
            }
          },
          "UpdateMedicalRecordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updateMedicalRecord"
            }
          },
          "CreatePrescriptionLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPrescription"
            }
          },
          "GetPrescriptionLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescription"
            }
          },
          "GetPrescriptionsByPatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescriptionsByPatient"
            }
          },
          "GetAuditLogsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getAuditLogs"
            }
          },
          "InitMFALogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-initMFA"
            }
          },
          "VerifyMFALogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-verifyMFA"
            }
          },
          "GetMFAStatusLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMFAStatus"
            }
          },
          "IamRoleLambdaExecution": {
            "Type": "AWS::IAM::Role",
            "Properties": {
              "AssumeRolePolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Effect": "Allow",
                    "Principal": {
                      "Service": [
                        "lambda.amazonaws.com"
                      ]
                    },
                    "Action": [
                      "sts:AssumeRole"
                    ]
                  }
                ]
              },
              "Policies": [
                {
                  "PolicyName": {
                    "Fn::Join": [
                      "-",
                      [
                        "ehr-backend-api",
                        "dev",
                        "lambda"
                      ]
                    ]
                  },
                  "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                      {
                        "Effect": "Allow",
                        "Action": [
                          "logs:CreateLogStream",
                          "logs:CreateLogGroup",
                          "logs:TagResource"
                        ],
                        "Resource": [
                          {
                            "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*"
                          }
                        ]
                      },
                      {
                        "Effect": "Allow",
                        "Action": [
                          "logs:PutLogEvents"
                        ],
                        "Resource": [
                          {
                            "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*:*"
                          }
                        ]
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][0]"
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][1]"
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][2]"
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][3]"
                      }
                    ]
                  }
                }
              ],
              "Path": "/",
              "RoleName": {
                "Fn::Join": [
                  "-",
                  [
                    "ehr-backend-api",
                    "dev",
                    {
                      "Ref": "AWS::Region"
                    },
                    "lambdaRole"
                  ]
                ]
              }
            }
          },
          "LoginLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auth.login",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-login",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "LoginLogGroup"
            ]
          },
          "ChangePasswordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auth.changePassword",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-changePassword",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "ChangePasswordLogGroup"
            ]
          },
          "RefreshTokenLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auth.refreshToken",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-refreshToken",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "RefreshTokenLogGroup"
            ]
          },
          "CreateUserLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/users.createUser",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createUser",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreateUserLogGroup"
            ]
          },
          "ListUsersLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/users.listUsers",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-listUsers",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "ListUsersLogGroup"
            ]
          },
          "DisableUserLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/users.disableUser",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-disableUser",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "DisableUserLogGroup"
            ]
          },
          "ResetUserPasswordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/users.resetPassword",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-resetUserPassword",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "ResetUserPasswordLogGroup"
            ]
          },
          "GetMyProfileLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientPortal.getMyProfile",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMyProfile",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMyProfileLogGroup"
            ]
          },
          "GetMyMedicalRecordsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientPortal.getMyMedicalRecords",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMyMedicalRecords",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMyMedicalRecordsLogGroup"
            ]
          },
          "GetMyPrescriptionsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientPortal.getMyPrescriptions",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMyPrescriptions",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMyPrescriptionsLogGroup"
            ]
          },
          "GetMyVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientPortal.getMyVitalSigns",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMyVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMyVitalSignsLogGroup"
            ]
          },
          "CreatePatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreatePatientLogGroup"
            ]
          },
          "GetPatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.getById",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetPatientLogGroup"
            ]
          },
          "SearchPatientsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.search",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-searchPatients",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "SearchPatientsLogGroup"
            ]
          },
          "UpdatePatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.update",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-updatePatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "UpdatePatientLogGroup"
            ]
          },
          "CreateVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/vitalSigns.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreateVitalSignsLogGroup"
            ]
          },
          "GetVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/vitalSigns.getByPatient",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetVitalSignsLogGroup"
            ]
          },
          "GetLatestVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/vitalSigns.getLatest",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getLatestVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetLatestVitalSignsLogGroup"
            ]
          },
          "CreateMedicalRecordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createMedicalRecord",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreateMedicalRecordLogGroup"
            ]
          },
          "GetMedicalRecordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.getById",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMedicalRecord",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMedicalRecordLogGroup"
            ]
          },
          "GetMedicalRecordsByPatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.getByPatient",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMedicalRecordsByPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMedicalRecordsByPatientLogGroup"
            ]
          },
          "UpdateMedicalRecordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.update",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-updateMedicalRecord",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "UpdateMedicalRecordLogGroup"
            ]
          },
          "CreatePrescriptionLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/prescriptions.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createPrescription",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreatePrescriptionLogGroup"
            ]
          },
          "GetPrescriptionLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/prescriptions.getById",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getPrescription",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetPrescriptionLogGroup"
            ]
          },
          "GetPrescriptionsByPatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/prescriptions.getByPatient",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getPrescriptionsByPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetPrescriptionsByPatientLogGroup"
            ]
          },
          "GetAuditLogsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auditLogs.getLogs",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getAuditLogs",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetAuditLogsLogGroup"
            ]
          },
          "InitMFALambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/mfa.initMFA",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-initMFA",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "InitMFALogGroup"
            ]
          },
          "VerifyMFALambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/mfa.verifyMFA",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-verifyMFA",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "VerifyMFALogGroup"
            ]
          },
          "GetMFAStatusLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/mfa.getMFAStatus",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMFAStatus",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMFAStatusLogGroup"
            ]
          },
          "LoginLambdaVersion7LBR2WU9sBLkrzYH9FKtLgpowd2Sbmub1uWQ8IiExAI": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "LoginLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "ChangePasswordLambdaVersionJxGbole9IomHhTI2oNkQSDDNJWonluqFTPvTYB4wAw4": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "ChangePasswordLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "RefreshTokenLambdaVersion5tgHAfqDnPGaJG8FSmgTQ9OyhQMCjLQC7S53JSrlKg": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "RefreshTokenLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "CreateUserLambdaVersionnp3o2AnImj7mT6y4UUBBtl4BXufbKpGPXiFnhblteU": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreateUserLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "ListUsersLambdaVersionL3alZ9Q01jb3btDiQr6tqQ35rXOcdsE0WU1axaKQS2Y": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "ListUsersLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "DisableUserLambdaVersionAUEojjdQVwkf0NshNaw7hcR4KLm34SKSfIfoo0G4G8": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "DisableUserLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "ResetUserPasswordLambdaVersionojkYx1olv2hrwwK5L7UUpgEYKo6B8iLwsYP78prQ": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "ResetUserPasswordLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetMyProfileLambdaVersion2HCR7IM02bBLML2xrWjllylayk6ciUzUh29nOvmSBk": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMyProfileLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetMyMedicalRecordsLambdaVersionfonavwkR53NCifT0ePFISSl1p4JdiWDt2dr4n9dmk": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMyMedicalRecordsLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetMyPrescriptionsLambdaVersion4rdLUNTJ87uCTJwiZseDq0RmsH8FKtQOqs66kSeZY": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMyPrescriptionsLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetMyVitalSignsLambdaVersioninmeivPdlH4R821xUeABncIW9zuzJzsx78q7OPJeQ": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMyVitalSignsLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "CreatePatientLambdaVersionIzx9Kh3WmFzjDVlSjl0xvrpFsMNpzv6FIdqKGZhsIoo": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreatePatientLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetPatientLambdaVersiony1RUAMQUysnqkhKXyaFNPpcG3kJzctBwSph3hu69k": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetPatientLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "SearchPatientsLambdaVersionIX8BAu3SyYq2m4UnLnIoTPs9piz3JqmYc65WkHGweJs": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "SearchPatientsLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "UpdatePatientLambdaVersionc94Yhe5RPQ9gVORqVdgLuOFlRQWWcjO0GCDtLQAIU": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "UpdatePatientLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "CreateVitalSignsLambdaVersionMKokUp8GpQ1gMIJfl9sz2LE91QZ19CJFpGme4Qc": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreateVitalSignsLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetVitalSignsLambdaVersion3Lr3gPCOiUnK3q1g6YZ7Jy1fy5wrWqjDCC2urJkDdvw": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetVitalSignsLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetLatestVitalSignsLambdaVersionYhwJ844FjLS0pHrZnZoCP8fecvAg3cygBosroggU8M": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetLatestVitalSignsLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "CreateMedicalRecordLambdaVersioncRzj0tEC8LsG8UL43S0fOMueOGrQbiOxUp5IbAFTs": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreateMedicalRecordLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetMedicalRecordLambdaVersionjxs6Lk4VQzrzK9XitKo2XEQtLxB0LFVasiPygiWzVM": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMedicalRecordLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetMedicalRecordsByPatientLambdaVersiongpr8FfCOeeq0OaJBOk4FjxVLdImFcMfkwxmiYCzClU": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMedicalRecordsByPatientLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "UpdateMedicalRecordLambdaVersionlHJp6czOEJXdJGgFfJJ8zZME2gMa8HBo8z7HVjtvaM": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "UpdateMedicalRecordLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "CreatePrescriptionLambdaVersionhUIqmaqJLhYS088LIMHX3bAV56G2uaUD3mWQZzMjwM": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreatePrescriptionLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetPrescriptionLambdaVersionr9sSN03gDNfGaKefaUIpRKTFvEi7cNUiInakQYL2dc": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetPrescriptionLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetPrescriptionsByPatientLambdaVersionNW2RiNEjAFVXZwX0CPoRkc6IU81zpOSdyEXWulR2CbM": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetPrescriptionsByPatientLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetAuditLogsLambdaVersion5dYEG6Y68seFwC5zeqbVgZYmxEJcWQXjgmM3KBH4u0": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetAuditLogsLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "InitMFALambdaVersion9bwLGPhF9P5QAsABrhvtaMau3nu8yM1TWov1CyTfgA": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "InitMFALambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "VerifyMFALambdaVersionrmhF4CnPrPHJ1uivOMhYOPl8NRXHdyj1najf0csI": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "VerifyMFALambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "GetMFAStatusLambdaVersion4LoPt1rfNI09pNdnyS6LKU9rNyiM2aabgP7jYsLCY": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMFAStatusLambdaFunction"
              },
              "CodeSha256": "j8XGUcR2ziPD3feFvKC7SdPFWq1WRCzXoAzjNrkc7lE="
            }
          },
          "HttpApi": {
            "Type": "AWS::ApiGatewayV2::Api",
            "Properties": {
              "Name": "dev-ehr-backend-api",
              "ProtocolType": "HTTP",
              "CorsConfiguration": {
                "AllowHeaders": [
                  "Content-Type",
                  "Authorization"
                ],
                "AllowMethods": [
                  "GET",
                  "POST",
                  "PUT",
                  "DELETE",
                  "OPTIONS"
                ],
                "AllowOrigins": [
                  "*"
                ]
              }
            }
          },
          "HttpApiStage": {
            "Type": "AWS::ApiGatewayV2::Stage",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "StageName": "$default",
              "AutoDeploy": true,
              "DefaultRouteSettings": {
                "DetailedMetricsEnabled": false
              }
            }
          },
          "LoginLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "LoginLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationLogin": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"LoginLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostAuthLogin": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /auth/login",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationLogin"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationLogin"
          },
          "ChangePasswordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "ChangePasswordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationChangePassword": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"ChangePasswordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostAuthChangeDashpassword": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /auth/change-password",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationChangePassword"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationChangePassword"
          },
          "RefreshTokenLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "RefreshTokenLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationRefreshToken": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"RefreshTokenLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostAuthRefresh": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /auth/refresh",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationRefreshToken"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationRefreshToken"
          },
          "CreateUserLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreateUserLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreateUser": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreateUserLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostUsers": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /users",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreateUser"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreateUser"
          },
          "ListUsersLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "ListUsersLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationListUsers": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"ListUsersLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetUsers": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /users",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationListUsers"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationListUsers"
          },
          "DisableUserLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "DisableUserLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationDisableUser": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"DisableUserLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePutUsersIdVarDisable": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "PUT /users/{id}/disable",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationDisableUser"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationDisableUser"
          },
          "ResetUserPasswordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "ResetUserPasswordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationResetUserPassword": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"ResetUserPasswordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostUsersIdVarResetDashpassword": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /users/{id}/reset-password",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationResetUserPassword"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationResetUserPassword"
          },
          "GetMyProfileLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMyProfileLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMyProfile": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMyProfileLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPatientsMe": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /patients/me",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMyProfile"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMyProfile"
          },
          "GetMyMedicalRecordsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMyMedicalRecordsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMyMedicalRecords": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMyMedicalRecordsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMedicalDashrecordsMe": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /medical-records/me",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMyMedicalRecords"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMyMedicalRecords"
          },
          "GetMyPrescriptionsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMyPrescriptionsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMyPrescriptions": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMyPrescriptionsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPrescriptionsMe": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /prescriptions/me",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMyPrescriptions"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMyPrescriptions"
          },
          "GetMyVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMyVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMyVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMyVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetVitalDashsignsMe": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /vital-signs/me",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMyVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMyVitalSigns"
          },
          "CreatePatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreatePatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreatePatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreatePatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostPatients": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /patients",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreatePatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreatePatient"
          },
          "GetPatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetPatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetPatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetPatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPatientsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /patients/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetPatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetPatient"
          },
          "SearchPatientsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "SearchPatientsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationSearchPatients": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"SearchPatientsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPatientsSearch": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /patients/search",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationSearchPatients"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationSearchPatients"
          },
          "UpdatePatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "UpdatePatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationUpdatePatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"UpdatePatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePutPatientsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "PUT /patients/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationUpdatePatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationUpdatePatient"
          },
          "CreateVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreateVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreateVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreateVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostVitalDashsigns": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /vital-signs",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreateVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreateVitalSigns"
          },
          "GetVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetVitalDashsignsPatientPatientidVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /vital-signs/patient/{patientId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetVitalSigns"
          },
          "GetLatestVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetLatestVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetLatestVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetLatestVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetVitalDashsignsPatientPatientidVarLatest": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /vital-signs/patient/{patientId}/latest",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetLatestVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetLatestVitalSigns"
          },
          "CreateMedicalRecordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreateMedicalRecordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreateMedicalRecord": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreateMedicalRecordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostMedicalDashrecords": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /medical-records",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreateMedicalRecord"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreateMedicalRecord"
          },
          "GetMedicalRecordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMedicalRecordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMedicalRecord": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMedicalRecordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMedicalDashrecordsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /medical-records/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMedicalRecord"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMedicalRecord"
          },
          "GetMedicalRecordsByPatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMedicalRecordsByPatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMedicalRecordsByPatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMedicalRecordsByPatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMedicalDashrecordsPatientPatientidVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /medical-records/patient/{patientId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMedicalRecordsByPatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMedicalRecordsByPatient"
          },
          "UpdateMedicalRecordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "UpdateMedicalRecordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationUpdateMedicalRecord": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"UpdateMedicalRecordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePutMedicalDashrecordsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "PUT /medical-records/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationUpdateMedicalRecord"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationUpdateMedicalRecord"
          },
          "CreatePrescriptionLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreatePrescriptionLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreatePrescription": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreatePrescriptionLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostPrescriptions": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /prescriptions",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreatePrescription"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreatePrescription"
          },
          "GetPrescriptionLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetPrescriptionLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetPrescription": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetPrescriptionLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPrescriptionsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /prescriptions/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetPrescription"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetPrescription"
          },
          "GetPrescriptionsByPatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetPrescriptionsByPatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetPrescriptionsByPatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetPrescriptionsByPatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPrescriptionsPatientPatientidVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /prescriptions/patient/{patientId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetPrescriptionsByPatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetPrescriptionsByPatient"
          },
          "GetAuditLogsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetAuditLogsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetAuditLogs": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetAuditLogsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetAuditDashlogs": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /audit-logs",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetAuditLogs"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetAuditLogs"
          },
          "InitMFALambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "InitMFALambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationInitMFA": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"InitMFALambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostMfaInit": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /mfa/init",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationInitMFA"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationInitMFA"
          },
          "VerifyMFALambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "VerifyMFALambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationVerifyMFA": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"VerifyMFALambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostMfaVerify": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /mfa/verify",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationVerifyMFA"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationVerifyMFA"
          },
          "GetMFAStatusLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMFAStatusLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMFAStatus": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMFAStatusLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMfaStatusUseridVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /mfa/status/{userId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMFAStatus"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMFAStatus"
          }
        },
        "Outputs": {
          "ServerlessDeploymentBucketName": {
            "Value": {
              "Ref": "ServerlessDeploymentBucket"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ServerlessDeploymentBucketName"
            }
          },
          "LoginLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "LoginLambdaVersion7LBR2WU9sBLkrzYH9FKtLgpowd2Sbmub1uWQ8IiExAI"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-LoginLambdaFunctionQualifiedArn"
            }
          },
          "ChangePasswordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "ChangePasswordLambdaVersionJxGbole9IomHhTI2oNkQSDDNJWonluqFTPvTYB4wAw4"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ChangePasswordLambdaFunctionQualifiedArn"
            }
          },
          "RefreshTokenLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "RefreshTokenLambdaVersion5tgHAfqDnPGaJG8FSmgTQ9OyhQMCjLQC7S53JSrlKg"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-RefreshTokenLambdaFunctionQualifiedArn"
            }
          },
          "CreateUserLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreateUserLambdaVersionnp3o2AnImj7mT6y4UUBBtl4BXufbKpGPXiFnhblteU"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreateUserLambdaFunctionQualifiedArn"
            }
          },
          "ListUsersLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "ListUsersLambdaVersionL3alZ9Q01jb3btDiQr6tqQ35rXOcdsE0WU1axaKQS2Y"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ListUsersLambdaFunctionQualifiedArn"
            }
          },
          "DisableUserLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "DisableUserLambdaVersionAUEojjdQVwkf0NshNaw7hcR4KLm34SKSfIfoo0G4G8"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-DisableUserLambdaFunctionQualifiedArn"
            }
          },
          "ResetUserPasswordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "ResetUserPasswordLambdaVersionojkYx1olv2hrwwK5L7UUpgEYKo6B8iLwsYP78prQ"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ResetUserPasswordLambdaFunctionQualifiedArn"
            }
          },
          "GetMyProfileLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMyProfileLambdaVersion2HCR7IM02bBLML2xrWjllylayk6ciUzUh29nOvmSBk"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMyProfileLambdaFunctionQualifiedArn"
            }
          },
          "GetMyMedicalRecordsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMyMedicalRecordsLambdaVersionfonavwkR53NCifT0ePFISSl1p4JdiWDt2dr4n9dmk"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMyMedicalRecordsLambdaFunctionQualifiedArn"
            }
          },
          "GetMyPrescriptionsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMyPrescriptionsLambdaVersion4rdLUNTJ87uCTJwiZseDq0RmsH8FKtQOqs66kSeZY"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMyPrescriptionsLambdaFunctionQualifiedArn"
            }
          },
          "GetMyVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMyVitalSignsLambdaVersioninmeivPdlH4R821xUeABncIW9zuzJzsx78q7OPJeQ"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMyVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "CreatePatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreatePatientLambdaVersionIzx9Kh3WmFzjDVlSjl0xvrpFsMNpzv6FIdqKGZhsIoo"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreatePatientLambdaFunctionQualifiedArn"
            }
          },
          "GetPatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetPatientLambdaVersiony1RUAMQUysnqkhKXyaFNPpcG3kJzctBwSph3hu69k"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetPatientLambdaFunctionQualifiedArn"
            }
          },
          "SearchPatientsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "SearchPatientsLambdaVersionIX8BAu3SyYq2m4UnLnIoTPs9piz3JqmYc65WkHGweJs"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-SearchPatientsLambdaFunctionQualifiedArn"
            }
          },
          "UpdatePatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "UpdatePatientLambdaVersionc94Yhe5RPQ9gVORqVdgLuOFlRQWWcjO0GCDtLQAIU"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-UpdatePatientLambdaFunctionQualifiedArn"
            }
          },
          "CreateVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreateVitalSignsLambdaVersionMKokUp8GpQ1gMIJfl9sz2LE91QZ19CJFpGme4Qc"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreateVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "GetVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetVitalSignsLambdaVersion3Lr3gPCOiUnK3q1g6YZ7Jy1fy5wrWqjDCC2urJkDdvw"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "GetLatestVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetLatestVitalSignsLambdaVersionYhwJ844FjLS0pHrZnZoCP8fecvAg3cygBosroggU8M"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetLatestVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "CreateMedicalRecordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreateMedicalRecordLambdaVersioncRzj0tEC8LsG8UL43S0fOMueOGrQbiOxUp5IbAFTs"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreateMedicalRecordLambdaFunctionQualifiedArn"
            }
          },
          "GetMedicalRecordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMedicalRecordLambdaVersionjxs6Lk4VQzrzK9XitKo2XEQtLxB0LFVasiPygiWzVM"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMedicalRecordLambdaFunctionQualifiedArn"
            }
          },
          "GetMedicalRecordsByPatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMedicalRecordsByPatientLambdaVersiongpr8FfCOeeq0OaJBOk4FjxVLdImFcMfkwxmiYCzClU"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMedicalRecordsByPatientLambdaFunctionQualifiedArn"
            }
          },
          "UpdateMedicalRecordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "UpdateMedicalRecordLambdaVersionlHJp6czOEJXdJGgFfJJ8zZME2gMa8HBo8z7HVjtvaM"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-UpdateMedicalRecordLambdaFunctionQualifiedArn"
            }
          },
          "CreatePrescriptionLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreatePrescriptionLambdaVersionhUIqmaqJLhYS088LIMHX3bAV56G2uaUD3mWQZzMjwM"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreatePrescriptionLambdaFunctionQualifiedArn"
            }
          },
          "GetPrescriptionLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetPrescriptionLambdaVersionr9sSN03gDNfGaKefaUIpRKTFvEi7cNUiInakQYL2dc"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetPrescriptionLambdaFunctionQualifiedArn"
            }
          },
          "GetPrescriptionsByPatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetPrescriptionsByPatientLambdaVersionNW2RiNEjAFVXZwX0CPoRkc6IU81zpOSdyEXWulR2CbM"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetPrescriptionsByPatientLambdaFunctionQualifiedArn"
            }
          },
          "GetAuditLogsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetAuditLogsLambdaVersion5dYEG6Y68seFwC5zeqbVgZYmxEJcWQXjgmM3KBH4u0"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetAuditLogsLambdaFunctionQualifiedArn"
            }
          },
          "InitMFALambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "InitMFALambdaVersion9bwLGPhF9P5QAsABrhvtaMau3nu8yM1TWov1CyTfgA"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-InitMFALambdaFunctionQualifiedArn"
            }
          },
          "VerifyMFALambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "VerifyMFALambdaVersionrmhF4CnPrPHJ1uivOMhYOPl8NRXHdyj1najf0csI"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-VerifyMFALambdaFunctionQualifiedArn"
            }
          },
          "GetMFAStatusLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMFAStatusLambdaVersion4LoPt1rfNI09pNdnyS6LKU9rNyiM2aabgP7jYsLCY"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMFAStatusLambdaFunctionQualifiedArn"
            }
          },
          "HttpApiId": {
            "Description": "Id of the HTTP API",
            "Value": {
              "Ref": "HttpApi"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-HttpApiId"
            }
          },
          "HttpApiUrl": {
            "Description": "URL of the HTTP API",
            "Value": {
              "Fn::Join": [
                "",
                [
                  "https://",
                  {
                    "Ref": "HttpApi"
                  },
                  ".execute-api.",
                  {
                    "Ref": "AWS::Region"
                  },
                  ".",
                  {
                    "Ref": "AWS::URLSuffix"
                  }
                ]
              ]
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-HttpApiUrl"
            }
          }
        }
      },
      "coreCloudFormationTemplate": {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "The AWS CloudFormation template for this Serverless application",
        "Resources": {
          "ServerlessDeploymentBucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
              "BucketEncryption": {
                "ServerSideEncryptionConfiguration": [
                  {
                    "ServerSideEncryptionByDefault": {
                      "SSEAlgorithm": "AES256"
                    }
                  }
                ]
              }
            }
          },
          "ServerlessDeploymentBucketPolicy": {
            "Type": "AWS::S3::BucketPolicy",
            "Properties": {
              "Bucket": {
                "Ref": "ServerlessDeploymentBucket"
              },
              "PolicyDocument": {
                "Statement": [
                  {
                    "Action": "s3:*",
                    "Effect": "Deny",
                    "Principal": "*",
                    "Resource": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            },
                            "/*"
                          ]
                        ]
                      },
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            }
                          ]
                        ]
                      }
                    ],
                    "Condition": {
                      "Bool": {
                        "aws:SecureTransport": false
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "Outputs": {
          "ServerlessDeploymentBucketName": {
            "Value": {
              "Ref": "ServerlessDeploymentBucket"
            }
          }
        }
      },
      "vpc": {}
    },
    "plugins": [
      "serverless-offline",
      "serverless-dotenv-plugin"
    ],
    "pluginsData": {},
    "functions": {
      "login": {
        "handler": "handlers/auth.login",
        "events": [
          {
            "httpApi": {
              "path": "/auth/login",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/auth/login"
          }
        ],
        "name": "ehr-backend-api-dev-login",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "LoginLambdaVersion7LBR2WU9sBLkrzYH9FKtLgpowd2Sbmub1uWQ8IiExAI"
      },
      "changePassword": {
        "handler": "handlers/auth.changePassword",
        "events": [
          {
            "httpApi": {
              "path": "/auth/change-password",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/auth/change-password"
          }
        ],
        "name": "ehr-backend-api-dev-changePassword",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "ChangePasswordLambdaVersionJxGbole9IomHhTI2oNkQSDDNJWonluqFTPvTYB4wAw4"
      },
      "refreshToken": {
        "handler": "handlers/auth.refreshToken",
        "events": [
          {
            "httpApi": {
              "path": "/auth/refresh",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/auth/refresh"
          }
        ],
        "name": "ehr-backend-api-dev-refreshToken",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "RefreshTokenLambdaVersion5tgHAfqDnPGaJG8FSmgTQ9OyhQMCjLQC7S53JSrlKg"
      },
      "createUser": {
        "handler": "handlers/users.createUser",
        "events": [
          {
            "httpApi": {
              "path": "/users",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/users"
          }
        ],
        "name": "ehr-backend-api-dev-createUser",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreateUserLambdaVersionnp3o2AnImj7mT6y4UUBBtl4BXufbKpGPXiFnhblteU"
      },
      "listUsers": {
        "handler": "handlers/users.listUsers",
        "events": [
          {
            "httpApi": {
              "path": "/users",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/users"
          }
        ],
        "name": "ehr-backend-api-dev-listUsers",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "ListUsersLambdaVersionL3alZ9Q01jb3btDiQr6tqQ35rXOcdsE0WU1axaKQS2Y"
      },
      "disableUser": {
        "handler": "handlers/users.disableUser",
        "events": [
          {
            "httpApi": {
              "path": "/users/{id}/disable",
              "method": "put"
            },
            "resolvedMethod": "PUT",
            "resolvedPath": "/users/{id}/disable"
          }
        ],
        "name": "ehr-backend-api-dev-disableUser",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "DisableUserLambdaVersionAUEojjdQVwkf0NshNaw7hcR4KLm34SKSfIfoo0G4G8"
      },
      "resetUserPassword": {
        "handler": "handlers/users.resetPassword",
        "events": [
          {
            "httpApi": {
              "path": "/users/{id}/reset-password",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/users/{id}/reset-password"
          }
        ],
        "name": "ehr-backend-api-dev-resetUserPassword",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "ResetUserPasswordLambdaVersionojkYx1olv2hrwwK5L7UUpgEYKo6B8iLwsYP78prQ"
      },
      "getMyProfile": {
        "handler": "handlers/patientPortal.getMyProfile",
        "events": [
          {
            "httpApi": {
              "path": "/patients/me",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/patients/me"
          }
        ],
        "name": "ehr-backend-api-dev-getMyProfile",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMyProfileLambdaVersion2HCR7IM02bBLML2xrWjllylayk6ciUzUh29nOvmSBk"
      },
      "getMyMedicalRecords": {
        "handler": "handlers/patientPortal.getMyMedicalRecords",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/me",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/medical-records/me"
          }
        ],
        "name": "ehr-backend-api-dev-getMyMedicalRecords",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMyMedicalRecordsLambdaVersionfonavwkR53NCifT0ePFISSl1p4JdiWDt2dr4n9dmk"
      },
      "getMyPrescriptions": {
        "handler": "handlers/patientPortal.getMyPrescriptions",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions/me",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/prescriptions/me"
          }
        ],
        "name": "ehr-backend-api-dev-getMyPrescriptions",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMyPrescriptionsLambdaVersion4rdLUNTJ87uCTJwiZseDq0RmsH8FKtQOqs66kSeZY"
      },
      "getMyVitalSigns": {
        "handler": "handlers/patientPortal.getMyVitalSigns",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs/me",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/vital-signs/me"
          }
        ],
        "name": "ehr-backend-api-dev-getMyVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMyVitalSignsLambdaVersioninmeivPdlH4R821xUeABncIW9zuzJzsx78q7OPJeQ"
      },
      "createPatient": {
        "handler": "handlers/patients.create",
        "events": [
          {
            "httpApi": {
              "path": "/patients",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/patients"
          }
        ],
        "name": "ehr-backend-api-dev-createPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreatePatientLambdaVersionIzx9Kh3WmFzjDVlSjl0xvrpFsMNpzv6FIdqKGZhsIoo"
      },
      "getPatient": {
        "handler": "handlers/patients.getById",
        "events": [
          {
            "httpApi": {
              "path": "/patients/{id}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/patients/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-getPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetPatientLambdaVersiony1RUAMQUysnqkhKXyaFNPpcG3kJzctBwSph3hu69k"
      },
      "searchPatients": {
        "handler": "handlers/patients.search",
        "events": [
          {
            "httpApi": {
              "path": "/patients/search",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/patients/search"
          }
        ],
        "name": "ehr-backend-api-dev-searchPatients",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "SearchPatientsLambdaVersionIX8BAu3SyYq2m4UnLnIoTPs9piz3JqmYc65WkHGweJs"
      },
      "updatePatient": {
        "handler": "handlers/patients.update",
        "events": [
          {
            "httpApi": {
              "path": "/patients/{id}",
              "method": "put"
            },
            "resolvedMethod": "PUT",
            "resolvedPath": "/patients/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-updatePatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "UpdatePatientLambdaVersionc94Yhe5RPQ9gVORqVdgLuOFlRQWWcjO0GCDtLQAIU"
      },
      "createVitalSigns": {
        "handler": "handlers/vitalSigns.create",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/vital-signs"
          }
        ],
        "name": "ehr-backend-api-dev-createVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreateVitalSignsLambdaVersionMKokUp8GpQ1gMIJfl9sz2LE91QZ19CJFpGme4Qc"
      },
      "getVitalSigns": {
        "handler": "handlers/vitalSigns.getByPatient",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs/patient/{patientId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/vital-signs/patient/{patientId}"
          }
        ],
        "name": "ehr-backend-api-dev-getVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetVitalSignsLambdaVersion3Lr3gPCOiUnK3q1g6YZ7Jy1fy5wrWqjDCC2urJkDdvw"
      },
      "getLatestVitalSigns": {
        "handler": "handlers/vitalSigns.getLatest",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs/patient/{patientId}/latest",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/vital-signs/patient/{patientId}/latest"
          }
        ],
        "name": "ehr-backend-api-dev-getLatestVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetLatestVitalSignsLambdaVersionYhwJ844FjLS0pHrZnZoCP8fecvAg3cygBosroggU8M"
      },
      "createMedicalRecord": {
        "handler": "handlers/medicalRecords.create",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/medical-records"
          }
        ],
        "name": "ehr-backend-api-dev-createMedicalRecord",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreateMedicalRecordLambdaVersioncRzj0tEC8LsG8UL43S0fOMueOGrQbiOxUp5IbAFTs"
      },
      "getMedicalRecord": {
        "handler": "handlers/medicalRecords.getById",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/{id}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/medical-records/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-getMedicalRecord",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMedicalRecordLambdaVersionjxs6Lk4VQzrzK9XitKo2XEQtLxB0LFVasiPygiWzVM"
      },
      "getMedicalRecordsByPatient": {
        "handler": "handlers/medicalRecords.getByPatient",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/patient/{patientId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/medical-records/patient/{patientId}"
          }
        ],
        "name": "ehr-backend-api-dev-getMedicalRecordsByPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMedicalRecordsByPatientLambdaVersiongpr8FfCOeeq0OaJBOk4FjxVLdImFcMfkwxmiYCzClU"
      },
      "updateMedicalRecord": {
        "handler": "handlers/medicalRecords.update",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/{id}",
              "method": "put"
            },
            "resolvedMethod": "PUT",
            "resolvedPath": "/medical-records/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-updateMedicalRecord",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "UpdateMedicalRecordLambdaVersionlHJp6czOEJXdJGgFfJJ8zZME2gMa8HBo8z7HVjtvaM"
      },
      "createPrescription": {
        "handler": "handlers/prescriptions.create",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/prescriptions"
          }
        ],
        "name": "ehr-backend-api-dev-createPrescription",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreatePrescriptionLambdaVersionhUIqmaqJLhYS088LIMHX3bAV56G2uaUD3mWQZzMjwM"
      },
      "getPrescription": {
        "handler": "handlers/prescriptions.getById",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions/{id}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/prescriptions/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-getPrescription",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetPrescriptionLambdaVersionr9sSN03gDNfGaKefaUIpRKTFvEi7cNUiInakQYL2dc"
      },
      "getPrescriptionsByPatient": {
        "handler": "handlers/prescriptions.getByPatient",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions/patient/{patientId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/prescriptions/patient/{patientId}"
          }
        ],
        "name": "ehr-backend-api-dev-getPrescriptionsByPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetPrescriptionsByPatientLambdaVersionNW2RiNEjAFVXZwX0CPoRkc6IU81zpOSdyEXWulR2CbM"
      },
      "getAuditLogs": {
        "handler": "handlers/auditLogs.getLogs",
        "events": [
          {
            "httpApi": {
              "path": "/audit-logs",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/audit-logs"
          }
        ],
        "name": "ehr-backend-api-dev-getAuditLogs",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetAuditLogsLambdaVersion5dYEG6Y68seFwC5zeqbVgZYmxEJcWQXjgmM3KBH4u0"
      },
      "initMFA": {
        "handler": "handlers/mfa.initMFA",
        "events": [
          {
            "httpApi": {
              "path": "/mfa/init",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/mfa/init"
          }
        ],
        "name": "ehr-backend-api-dev-initMFA",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "InitMFALambdaVersion9bwLGPhF9P5QAsABrhvtaMau3nu8yM1TWov1CyTfgA"
      },
      "verifyMFA": {
        "handler": "handlers/mfa.verifyMFA",
        "events": [
          {
            "httpApi": {
              "path": "/mfa/verify",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/mfa/verify"
          }
        ],
        "name": "ehr-backend-api-dev-verifyMFA",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "VerifyMFALambdaVersionrmhF4CnPrPHJ1uivOMhYOPl8NRXHdyj1najf0csI"
      },
      "getMFAStatus": {
        "handler": "handlers/mfa.getMFAStatus",
        "events": [
          {
            "httpApi": {
              "path": "/mfa/status/{userId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/mfa/status/{userId}"
          }
        ],
        "name": "ehr-backend-api-dev-getMFAStatus",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMFAStatusLambdaVersion4LoPt1rfNI09pNdnyS6LKU9rNyiM2aabgP7jYsLCY"
      }
    },
    "configValidationMode": "warn",
    "serviceFilename": "serverless.yml",
    "initialServerlessConfig": {
      "service": "ehr-backend-api",
      "frameworkVersion": "3",
      "useDotenv": true,
      "provider": {
        "$ref": "$[\"service\"][\"provider\"]"
      },
      "plugins": {
        "$ref": "$[\"service\"][\"plugins\"]"
      },
      "functions": {
        "$ref": "$[\"service\"][\"functions\"]"
      },
      "package": {
        "individually": false,
        "patterns": [
          "!.git/**",
          "!test/**",
          "!.env.example",
          "!README.md"
        ],
        "artifactsS3KeyDirname": "serverless/ehr-backend-api/dev/code-artifacts",
        "artifact": "D:\\Workspace\\DuAnCNTT2025_2026\\2_11_DuAnCNTT\\ehr-system\\backend\\.serverless\\ehr-backend-api.zip",
        "artifactDirectoryName": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z"
      }
    },
    "layers": {},
    "isDashboardMonitoringPreconfigured": false,
    "artifact": "D:\\Workspace\\DuAnCNTT2025_2026\\2_11_DuAnCNTT\\ehr-system\\backend\\.serverless\\ehr-backend-api.zip"
  },
  "package": {
    "individually": false,
    "artifactDirectoryName": "serverless/ehr-backend-api/dev/1766325740946-2025-12-21T14:02:20.946Z",
    "artifact": "ehr-backend-api.zip"
  }
}