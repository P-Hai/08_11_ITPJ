{
  "service": {
    "service": "ehr-backend-api",
    "serviceObject": {
      "name": "ehr-backend-api"
    },
    "provider": {
      "name": "aws",
      "runtime": "nodejs20.x",
      "region": "ap-southeast-1",
      "stage": "dev",
      "memorySize": 512,
      "timeout": 30,
      "environment": {
        "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
        "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
        "REGION": "ap-southeast-1",
        "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
        "DB_PORT": "5432",
        "DB_NAME": "ehr_production",
        "DB_USER": "postgres",
        "DB_PASSWORD": "EhrAdmin2025!",
        "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
        "WEBAUTHN_RP_ID": "localhost",
        "WEBAUTHN_ORIGIN": "http://localhost:3000",
        "NODE_ENV": "development",
        "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
        "DB_SSL": "true"
      },
      "iam": {
        "role": {
          "statements": [
            {
              "Effect": "Allow",
              "Action": [
                "ses:SendEmail",
                "ses:SendRawEmail"
              ],
              "Resource": "*"
            },
            {
              "Effect": "Allow",
              "Action": [
                "cognito-idp:AdminGetUser",
                "cognito-idp:ListUsers",
                "cognito-idp:AdminCreateUser",
                "cognito-idp:AdminAddUserToGroup",
                "cognito-idp:AdminDisableUser",
                "cognito-idp:AdminSetUserPassword",
                "cognito-idp:AdminInitiateAuth",
                "cognito-idp:AdminRespondToAuthChallenge",
                "cognito-idp:AdminListGroupsForUser"
              ],
              "Resource": "arn:aws:cognito-idp:ap-southeast-1:*:userpool/ap-southeast-1_KAphl41fW"
            },
            {
              "Effect": "Allow",
              "Action": [
                "secretsmanager:GetSecretValue"
              ],
              "Resource": "arn:aws:secretsmanager:ap-southeast-1:*:secret:ehr-system/*"
            },
            {
              "Effect": "Allow",
              "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents"
              ],
              "Resource": "*"
            },
            {
              "Effect": "Allow",
              "Action": [
                "s3:PutObject",
                "s3:GetObject",
                "s3:DeleteObject",
                "s3:ListBucket"
              ],
              "Resource": [
                "arn:aws:s3:::ehr-backend-api-patient-files-dev",
                "arn:aws:s3:::ehr-backend-api-patient-files-dev/*"
              ]
            }
          ]
        }
      },
      "httpApi": {
        "cors": {
          "allowedOrigins": [
            "*"
          ],
          "allowedHeaders": [
            "Content-Type",
            "Authorization"
          ],
          "allowedMethods": [
            "GET",
            "POST",
            "PUT",
            "DELETE",
            "OPTIONS"
          ]
        }
      },
      "versionFunctions": true,
      "compiledCloudFormationTemplate": {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "The AWS CloudFormation template for this Serverless application",
        "Resources": {
          "ServerlessDeploymentBucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
              "BucketEncryption": {
                "ServerSideEncryptionConfiguration": [
                  {
                    "ServerSideEncryptionByDefault": {
                      "SSEAlgorithm": "AES256"
                    }
                  }
                ]
              }
            }
          },
          "ServerlessDeploymentBucketPolicy": {
            "Type": "AWS::S3::BucketPolicy",
            "Properties": {
              "Bucket": {
                "Ref": "ServerlessDeploymentBucket"
              },
              "PolicyDocument": {
                "Statement": [
                  {
                    "Action": "s3:*",
                    "Effect": "Deny",
                    "Principal": "*",
                    "Resource": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            },
                            "/*"
                          ]
                        ]
                      },
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            }
                          ]
                        ]
                      }
                    ],
                    "Condition": {
                      "Bool": {
                        "aws:SecureTransport": false
                      }
                    }
                  }
                ]
              }
            }
          },
          "WebauthnRegisterStartLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnRegisterStart"
            }
          },
          "WebauthnRegisterFinishLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnRegisterFinish"
            }
          },
          "WebauthnAuthStartLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnAuthStart"
            }
          },
          "WebauthnAuthFinishLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnAuthFinish"
            }
          },
          "WebauthnGetCredentialsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnGetCredentials"
            }
          },
          "WebauthnDeleteCredentialLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnDeleteCredential"
            }
          },
          "LoginLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-login"
            }
          },
          "ChangePasswordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-changePassword"
            }
          },
          "RefreshTokenLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-refreshToken"
            }
          },
          "InitMFALogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-initMFA"
            }
          },
          "VerifyMFALogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-verifyMFA"
            }
          },
          "GetMFAStatusLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMFAStatus"
            }
          },
          "CreateUserLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createUser"
            }
          },
          "ListUsersLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-listUsers"
            }
          },
          "DisableUserLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-disableUser"
            }
          },
          "ResetUserPasswordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-resetUserPassword"
            }
          },
          "CreatePatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPatient"
            }
          },
          "GetPatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPatient"
            }
          },
          "SearchPatientsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-searchPatients"
            }
          },
          "UpdatePatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updatePatient"
            }
          },
          "GetMyProfileLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyProfile"
            }
          },
          "GetMyMedicalRecordsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyMedicalRecords"
            }
          },
          "GetMyPrescriptionsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyPrescriptions"
            }
          },
          "GetMyVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyVitalSigns"
            }
          },
          "CreateVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createVitalSigns"
            }
          },
          "GetVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getVitalSigns"
            }
          },
          "GetLatestVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getLatestVitalSigns"
            }
          },
          "CreateMedicalRecordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createMedicalRecord"
            }
          },
          "GetMedicalRecordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecord"
            }
          },
          "GetMedicalRecordsByPatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecordsByPatient"
            }
          },
          "UpdateMedicalRecordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updateMedicalRecord"
            }
          },
          "CreatePrescriptionLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPrescription"
            }
          },
          "GetPrescriptionLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescription"
            }
          },
          "GetPrescriptionsByPatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescriptionsByPatient"
            }
          },
          "GetAuditLogsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getAuditLogs"
            }
          },
          "GetUploadUrlLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getUploadUrl"
            }
          },
          "SaveFileMetadataLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-saveFileMetadata"
            }
          },
          "GetFilesByPatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getFilesByPatient"
            }
          },
          "GetDownloadUrlLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getDownloadUrl"
            }
          },
          "DeleteFileLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-deleteFile"
            }
          },
          "IamRoleLambdaExecution": {
            "Type": "AWS::IAM::Role",
            "Properties": {
              "AssumeRolePolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Effect": "Allow",
                    "Principal": {
                      "Service": [
                        "lambda.amazonaws.com"
                      ]
                    },
                    "Action": [
                      "sts:AssumeRole"
                    ]
                  }
                ]
              },
              "Policies": [
                {
                  "PolicyName": {
                    "Fn::Join": [
                      "-",
                      [
                        "ehr-backend-api",
                        "dev",
                        "lambda"
                      ]
                    ]
                  },
                  "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                      {
                        "Effect": "Allow",
                        "Action": [
                          "logs:CreateLogStream",
                          "logs:CreateLogGroup",
                          "logs:TagResource"
                        ],
                        "Resource": [
                          {
                            "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*"
                          }
                        ]
                      },
                      {
                        "Effect": "Allow",
                        "Action": [
                          "logs:PutLogEvents"
                        ],
                        "Resource": [
                          {
                            "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*:*"
                          }
                        ]
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][0]"
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][1]"
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][2]"
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][3]"
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][4]"
                      }
                    ]
                  }
                }
              ],
              "Path": "/",
              "RoleName": {
                "Fn::Join": [
                  "-",
                  [
                    "ehr-backend-api",
                    "dev",
                    {
                      "Ref": "AWS::Region"
                    },
                    "lambdaRole"
                  ]
                ]
              }
            }
          },
          "WebauthnRegisterStartLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/webauthn.startRegistration",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-webauthnRegisterStart",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "WebauthnRegisterStartLogGroup"
            ]
          },
          "WebauthnRegisterFinishLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/webauthn.finishRegistration",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-webauthnRegisterFinish",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "WebauthnRegisterFinishLogGroup"
            ]
          },
          "WebauthnAuthStartLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/webauthn.startAuthentication",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-webauthnAuthStart",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "WebauthnAuthStartLogGroup"
            ]
          },
          "WebauthnAuthFinishLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/webauthn.finishAuthentication",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-webauthnAuthFinish",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "WebauthnAuthFinishLogGroup"
            ]
          },
          "WebauthnGetCredentialsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/webauthn.getCredentials",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-webauthnGetCredentials",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "WebauthnGetCredentialsLogGroup"
            ]
          },
          "WebauthnDeleteCredentialLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/webauthn.deleteCredential",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-webauthnDeleteCredential",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "WebauthnDeleteCredentialLogGroup"
            ]
          },
          "LoginLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auth.login",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-login",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "LoginLogGroup"
            ]
          },
          "ChangePasswordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auth.changePassword",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-changePassword",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "ChangePasswordLogGroup"
            ]
          },
          "RefreshTokenLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auth.refreshToken",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-refreshToken",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "RefreshTokenLogGroup"
            ]
          },
          "InitMFALambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/mfa.initMFA",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-initMFA",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "InitMFALogGroup"
            ]
          },
          "VerifyMFALambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/mfa.verifyMFA",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-verifyMFA",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "VerifyMFALogGroup"
            ]
          },
          "GetMFAStatusLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/mfa.getMFAStatus",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMFAStatus",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMFAStatusLogGroup"
            ]
          },
          "CreateUserLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/users.createUser",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createUser",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreateUserLogGroup"
            ]
          },
          "ListUsersLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/users.listUsers",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-listUsers",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "ListUsersLogGroup"
            ]
          },
          "DisableUserLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/users.disableUser",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-disableUser",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "DisableUserLogGroup"
            ]
          },
          "ResetUserPasswordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/users.resetPassword",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-resetUserPassword",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "ResetUserPasswordLogGroup"
            ]
          },
          "CreatePatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreatePatientLogGroup"
            ]
          },
          "GetPatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.getById",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetPatientLogGroup"
            ]
          },
          "SearchPatientsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.search",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-searchPatients",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "SearchPatientsLogGroup"
            ]
          },
          "UpdatePatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.update",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-updatePatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "UpdatePatientLogGroup"
            ]
          },
          "GetMyProfileLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientPortal.getMyProfile",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMyProfile",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMyProfileLogGroup"
            ]
          },
          "GetMyMedicalRecordsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientPortal.getMyMedicalRecords",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMyMedicalRecords",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMyMedicalRecordsLogGroup"
            ]
          },
          "GetMyPrescriptionsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientPortal.getMyPrescriptions",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMyPrescriptions",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMyPrescriptionsLogGroup"
            ]
          },
          "GetMyVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientPortal.getMyVitalSigns",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMyVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMyVitalSignsLogGroup"
            ]
          },
          "CreateVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/vitalSigns.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreateVitalSignsLogGroup"
            ]
          },
          "GetVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/vitalSigns.getByPatient",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetVitalSignsLogGroup"
            ]
          },
          "GetLatestVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/vitalSigns.getLatest",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getLatestVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetLatestVitalSignsLogGroup"
            ]
          },
          "CreateMedicalRecordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createMedicalRecord",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreateMedicalRecordLogGroup"
            ]
          },
          "GetMedicalRecordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.getById",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMedicalRecord",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMedicalRecordLogGroup"
            ]
          },
          "GetMedicalRecordsByPatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.getByPatient",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMedicalRecordsByPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMedicalRecordsByPatientLogGroup"
            ]
          },
          "UpdateMedicalRecordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.update",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-updateMedicalRecord",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "UpdateMedicalRecordLogGroup"
            ]
          },
          "CreatePrescriptionLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/prescriptions.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createPrescription",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreatePrescriptionLogGroup"
            ]
          },
          "GetPrescriptionLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/prescriptions.getById",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getPrescription",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetPrescriptionLogGroup"
            ]
          },
          "GetPrescriptionsByPatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/prescriptions.getByPatient",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getPrescriptionsByPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetPrescriptionsByPatientLogGroup"
            ]
          },
          "GetAuditLogsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auditLogs.getLogs",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getAuditLogs",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetAuditLogsLogGroup"
            ]
          },
          "GetUploadUrlLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientFiles.getUploadUrl",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getUploadUrl",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetUploadUrlLogGroup"
            ]
          },
          "SaveFileMetadataLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientFiles.saveFileMetadata",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-saveFileMetadata",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "SaveFileMetadataLogGroup"
            ]
          },
          "GetFilesByPatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientFiles.getFilesByPatient",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getFilesByPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetFilesByPatientLogGroup"
            ]
          },
          "GetDownloadUrlLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientFiles.getDownloadUrl",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getDownloadUrl",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetDownloadUrlLogGroup"
            ]
          },
          "DeleteFileLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patientFiles.deleteFile",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-deleteFile",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
                  "WEBAUTHN_RP_ID": "localhost",
                  "WEBAUTHN_ORIGIN": "http://localhost:3000",
                  "NODE_ENV": "development",
                  "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
                  "DB_SSL": "true"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "DeleteFileLogGroup"
            ]
          },
          "WebauthnRegisterStartLambdaVersionLrMhFX7L793DgcclGJykRvJWthYz7VxlxU6GmuctR8": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "WebauthnRegisterStartLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "WebauthnRegisterFinishLambdaVersion7MlEQP8rVs2YjPLXLuRdeDNsBDX6KPUARf0DvC45E4": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "WebauthnRegisterFinishLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "WebauthnAuthStartLambdaVersionQDbR3t6Wqn6ssNXqjNWEFvc92wocFZFCp7qgZRTdE": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "WebauthnAuthStartLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "WebauthnAuthFinishLambdaVersion88Pllihmk5j6IxmC4oln72W4vDjS4Bejcwv9qI0pR2Q": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "WebauthnAuthFinishLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "WebauthnGetCredentialsLambdaVersionR7ZFGMyAaLOfjhgwrqPu6TTRIpQY4qe06aEAG2PE4": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "WebauthnGetCredentialsLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "WebauthnDeleteCredentialLambdaVersion28vooqHdo2oc9ttrXOj0Vn2jo8b9y5A2p8axtohjas": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "WebauthnDeleteCredentialLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "LoginLambdaVersionWD27ZDJOBM8l15LFkuQIYVRLQmm0XYvclO4qG1oc0F0": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "LoginLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "ChangePasswordLambdaVersion4gpIhCnlsC5hRTgQ3L2KrHfCdJwUsSVqv9fJ4gOscY": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "ChangePasswordLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "RefreshTokenLambdaVersionJVl1O6L0w9m4Mo1G8pWSC0s5ECudB493ToL7FQh8": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "RefreshTokenLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "InitMFALambdaVersion0eMocrn0ixTZJrqeIHmQANVfaUbR5tDoq26yBSGgM": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "InitMFALambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "VerifyMFALambdaVersion4v2e0r9DGxxuJsqPSK40CVddbce9B8qgZs4IEPhAoM": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "VerifyMFALambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetMFAStatusLambdaVersion6etUdZpsExvhcLFu9rkjzES4MGHklokvbt6tQZ6hI": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMFAStatusLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "CreateUserLambdaVersionOdEUtPzatP22MBarNIqgICcA6fEDMrJDXGe1okwfC80": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreateUserLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "ListUsersLambdaVersion6yMw7dx3b2r6xFyGX0Ha5QJOCaFoL9yDeZyp2pY": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "ListUsersLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "DisableUserLambdaVersiongisFaWlDOKrWkdvAF5ueIF58TOeqN2b1ZGbgcjDtyg": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "DisableUserLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "ResetUserPasswordLambdaVersionIvECFuJgDdfInn90GoWsPK2EBfO3uIT99k4Br0EI": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "ResetUserPasswordLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "CreatePatientLambdaVersion4gZIeSk3xo5vtENvVqDNc0Gyi94WhO8QFsW5g9d1tE": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreatePatientLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetPatientLambdaVersion9PsjKMcphx4vDuTpQ7aEK3JHxW2olLke7LaXCMQDDA": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetPatientLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "SearchPatientsLambdaVersionq6UlEJYdJl579WXhobcOqHPiViIsBH5g1Eo4QREVYg": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "SearchPatientsLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "UpdatePatientLambdaVersiond8vOZGoeVh5sIIIISReHDc3A7BDgECsqQbs1QA1S8CQ": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "UpdatePatientLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetMyProfileLambdaVersionMuC7uzUGq7i4DpCFiGTMrD8IuBWdUf6mNHbs3qrU0": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMyProfileLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetMyMedicalRecordsLambdaVersionHcYJE1AW5ri592RLFXbHRmTIglruGGgJlafWn0m1BRU": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMyMedicalRecordsLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetMyPrescriptionsLambdaVersion1b7pK2jBWc3aj5llR8J0fEtrFwn59A0MfKnmfxxZmJI": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMyPrescriptionsLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetMyVitalSignsLambdaVersionwGLvGK0GdAUSHQe9WCKnosscODFTIXikhqq2FtVE": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMyVitalSignsLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "CreateVitalSignsLambdaVersionTmyKatCD194GvMjb61R8xMicU52qVvT1aKvDGwxsgrw": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreateVitalSignsLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetVitalSignsLambdaVersionyGjRVVjxNkVO9PJ9GsLqDOwUs35gYbNXb8CjQZjk": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetVitalSignsLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetLatestVitalSignsLambdaVersionVIWxGwA8ihOnKO9JJHlmCfUEI1tbWghYjzLcqqCPyhw": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetLatestVitalSignsLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "CreateMedicalRecordLambdaVersionrGimwUU1TVhGtDqE7QiyYcGGFEHTEHQ9SXeL0jqH4U": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreateMedicalRecordLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetMedicalRecordLambdaVersionUv03jzKLkKXHeyaPADVaEwaKiy4IX5J54xSu7jkHF7s": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMedicalRecordLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetMedicalRecordsByPatientLambdaVersionX70gkcQE2K3mjcFOOh0A0Uo1m1FFacuuN6Y79Rz0PfI": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMedicalRecordsByPatientLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "UpdateMedicalRecordLambdaVersion351RrFTBwTMnL8ur80gFxk2mMZ1aW6WxYvLqkh5CxYE": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "UpdateMedicalRecordLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "CreatePrescriptionLambdaVersionp9xJmKvp9oHD4hGjyGcObzLwoaLPr6OXiEuU4R3fw": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreatePrescriptionLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetPrescriptionLambdaVersion9t0gC7RXr48cllhxBPkazLInRhTwq24kCQIA4QUSs": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetPrescriptionLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetPrescriptionsByPatientLambdaVersionLssk0PNXiBPcwShw6cIJ4O0PinX4ZvKrDau5M6eE": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetPrescriptionsByPatientLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetAuditLogsLambdaVersion1UO4vdwjKE6CS7hHL345prjMB6xJj2J60qY3csxlXo": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetAuditLogsLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetUploadUrlLambdaVersionbWGnXncfBHbKHSTNVj03GyV5wecuOum7kTrOpOPttI": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetUploadUrlLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "SaveFileMetadataLambdaVersionBqcUcasenlyhXbYtN5LHdAlucXDpiL58Y4SVROOSU": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "SaveFileMetadataLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetFilesByPatientLambdaVersionvk5y5BpK8tGBiUOPlB0Kp6Kad4WNZgAgLOkQQAo67N8": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetFilesByPatientLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "GetDownloadUrlLambdaVersion9TIrnQXYnJ90wMZ3eHqA2cJn7fOMfewOYjL5InXAgsE": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetDownloadUrlLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "DeleteFileLambdaVersion3m0pLTbthOLIZbLttjF4t22M4H8WrXYW40p7qag": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "DeleteFileLambdaFunction"
              },
              "CodeSha256": "xZ91+QhPWyRCrjJptxKxtN/eWqklQgiDhTxJEnXnb88="
            }
          },
          "ApiGatewayRestApi": {
            "Type": "AWS::ApiGateway::RestApi",
            "Properties": {
              "Name": "dev-ehr-backend-api",
              "EndpointConfiguration": {
                "Types": [
                  "EDGE"
                ]
              },
              "Policy": ""
            }
          },
          "ApiGatewayResourcePatientDashfiles": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
              "ParentId": {
                "Fn::GetAtt": [
                  "ApiGatewayRestApi",
                  "RootResourceId"
                ]
              },
              "PathPart": "patient-files",
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayResourcePatientDashfilesUploadDashurl": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
              "ParentId": {
                "Ref": "ApiGatewayResourcePatientDashfiles"
              },
              "PathPart": "upload-url",
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayResourcePatientDashfilesMetadata": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
              "ParentId": {
                "Ref": "ApiGatewayResourcePatientDashfiles"
              },
              "PathPart": "metadata",
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayResourcePatientDashfilesPatient": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
              "ParentId": {
                "Ref": "ApiGatewayResourcePatientDashfiles"
              },
              "PathPart": "patient",
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayResourcePatientDashfilesPatientPatientidVar": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
              "ParentId": {
                "Ref": "ApiGatewayResourcePatientDashfilesPatient"
              },
              "PathPart": "{patientId}",
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayResourcePatientDashfilesDownload": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
              "ParentId": {
                "Ref": "ApiGatewayResourcePatientDashfiles"
              },
              "PathPart": "download",
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayResourcePatientDashfilesDownloadFileidVar": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
              "ParentId": {
                "Ref": "ApiGatewayResourcePatientDashfilesDownload"
              },
              "PathPart": "{fileId}",
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayResourcePatientDashfilesFileidVar": {
            "Type": "AWS::ApiGateway::Resource",
            "Properties": {
              "ParentId": {
                "Ref": "ApiGatewayResourcePatientDashfiles"
              },
              "PathPart": "{fileId}",
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayMethodPatientDashfilesUploadDashurlOptions": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "AuthorizationType": "NONE",
              "HttpMethod": "OPTIONS",
              "MethodResponses": [
                {
                  "StatusCode": "200",
                  "ResponseParameters": {
                    "method.response.header.Access-Control-Allow-Origin": true,
                    "method.response.header.Access-Control-Allow-Headers": true,
                    "method.response.header.Access-Control-Allow-Methods": true
                  },
                  "ResponseModels": {}
                }
              ],
              "RequestParameters": {},
              "Integration": {
                "Type": "MOCK",
                "RequestTemplates": {
                  "application/json": "{statusCode:200}"
                },
                "ContentHandling": "CONVERT_TO_TEXT",
                "IntegrationResponses": [
                  {
                    "StatusCode": "200",
                    "ResponseParameters": {
                      "method.response.header.Access-Control-Allow-Origin": "'*'",
                      "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                      "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
                    },
                    "ResponseTemplates": {
                      "application/json": ""
                    }
                  }
                ]
              },
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesUploadDashurl"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayMethodPatientDashfilesMetadataOptions": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "AuthorizationType": "NONE",
              "HttpMethod": "OPTIONS",
              "MethodResponses": [
                {
                  "StatusCode": "200",
                  "ResponseParameters": {
                    "method.response.header.Access-Control-Allow-Origin": true,
                    "method.response.header.Access-Control-Allow-Headers": true,
                    "method.response.header.Access-Control-Allow-Methods": true
                  },
                  "ResponseModels": {}
                }
              ],
              "RequestParameters": {},
              "Integration": {
                "Type": "MOCK",
                "RequestTemplates": {
                  "application/json": "{statusCode:200}"
                },
                "ContentHandling": "CONVERT_TO_TEXT",
                "IntegrationResponses": [
                  {
                    "StatusCode": "200",
                    "ResponseParameters": {
                      "method.response.header.Access-Control-Allow-Origin": "'*'",
                      "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                      "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,POST'"
                    },
                    "ResponseTemplates": {
                      "application/json": ""
                    }
                  }
                ]
              },
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesMetadata"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayMethodPatientDashfilesPatientPatientidVarOptions": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "AuthorizationType": "NONE",
              "HttpMethod": "OPTIONS",
              "MethodResponses": [
                {
                  "StatusCode": "200",
                  "ResponseParameters": {
                    "method.response.header.Access-Control-Allow-Origin": true,
                    "method.response.header.Access-Control-Allow-Headers": true,
                    "method.response.header.Access-Control-Allow-Methods": true
                  },
                  "ResponseModels": {}
                }
              ],
              "RequestParameters": {},
              "Integration": {
                "Type": "MOCK",
                "RequestTemplates": {
                  "application/json": "{statusCode:200}"
                },
                "ContentHandling": "CONVERT_TO_TEXT",
                "IntegrationResponses": [
                  {
                    "StatusCode": "200",
                    "ResponseParameters": {
                      "method.response.header.Access-Control-Allow-Origin": "'*'",
                      "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                      "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
                    },
                    "ResponseTemplates": {
                      "application/json": ""
                    }
                  }
                ]
              },
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesPatientPatientidVar"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayMethodPatientDashfilesDownloadFileidVarOptions": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "AuthorizationType": "NONE",
              "HttpMethod": "OPTIONS",
              "MethodResponses": [
                {
                  "StatusCode": "200",
                  "ResponseParameters": {
                    "method.response.header.Access-Control-Allow-Origin": true,
                    "method.response.header.Access-Control-Allow-Headers": true,
                    "method.response.header.Access-Control-Allow-Methods": true
                  },
                  "ResponseModels": {}
                }
              ],
              "RequestParameters": {},
              "Integration": {
                "Type": "MOCK",
                "RequestTemplates": {
                  "application/json": "{statusCode:200}"
                },
                "ContentHandling": "CONVERT_TO_TEXT",
                "IntegrationResponses": [
                  {
                    "StatusCode": "200",
                    "ResponseParameters": {
                      "method.response.header.Access-Control-Allow-Origin": "'*'",
                      "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                      "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,GET'"
                    },
                    "ResponseTemplates": {
                      "application/json": ""
                    }
                  }
                ]
              },
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesDownloadFileidVar"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayMethodPatientDashfilesFileidVarOptions": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "AuthorizationType": "NONE",
              "HttpMethod": "OPTIONS",
              "MethodResponses": [
                {
                  "StatusCode": "200",
                  "ResponseParameters": {
                    "method.response.header.Access-Control-Allow-Origin": true,
                    "method.response.header.Access-Control-Allow-Headers": true,
                    "method.response.header.Access-Control-Allow-Methods": true
                  },
                  "ResponseModels": {}
                }
              ],
              "RequestParameters": {},
              "Integration": {
                "Type": "MOCK",
                "RequestTemplates": {
                  "application/json": "{statusCode:200}"
                },
                "ContentHandling": "CONVERT_TO_TEXT",
                "IntegrationResponses": [
                  {
                    "StatusCode": "200",
                    "ResponseParameters": {
                      "method.response.header.Access-Control-Allow-Origin": "'*'",
                      "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent,X-Amzn-Trace-Id'",
                      "method.response.header.Access-Control-Allow-Methods": "'OPTIONS,DELETE'"
                    },
                    "ResponseTemplates": {
                      "application/json": ""
                    }
                  }
                ]
              },
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesFileidVar"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              }
            }
          },
          "ApiGatewayMethodPatientDashfilesUploadDashurlPost": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "HttpMethod": "POST",
              "RequestParameters": {},
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesUploadDashurl"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              },
              "ApiKeyRequired": false,
              "AuthorizationType": "NONE",
              "Integration": {
                "IntegrationHttpMethod": "POST",
                "Type": "AWS_PROXY",
                "Uri": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":apigateway:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":lambda:path/2015-03-31/functions/",
                      {
                        "Fn::GetAtt": [
                          "GetUploadUrlLambdaFunction",
                          "Arn"
                        ]
                      },
                      "/invocations"
                    ]
                  ]
                }
              },
              "MethodResponses": []
            },
            "DependsOn": [
              "GetUploadUrlLambdaPermissionApiGateway"
            ]
          },
          "ApiGatewayMethodPatientDashfilesMetadataPost": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "HttpMethod": "POST",
              "RequestParameters": {},
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesMetadata"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              },
              "ApiKeyRequired": false,
              "AuthorizationType": "NONE",
              "Integration": {
                "IntegrationHttpMethod": "POST",
                "Type": "AWS_PROXY",
                "Uri": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":apigateway:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":lambda:path/2015-03-31/functions/",
                      {
                        "Fn::GetAtt": [
                          "SaveFileMetadataLambdaFunction",
                          "Arn"
                        ]
                      },
                      "/invocations"
                    ]
                  ]
                }
              },
              "MethodResponses": []
            },
            "DependsOn": [
              "SaveFileMetadataLambdaPermissionApiGateway"
            ]
          },
          "ApiGatewayMethodPatientDashfilesPatientPatientidVarGet": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "HttpMethod": "GET",
              "RequestParameters": {},
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesPatientPatientidVar"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              },
              "ApiKeyRequired": false,
              "AuthorizationType": "NONE",
              "Integration": {
                "IntegrationHttpMethod": "POST",
                "Type": "AWS_PROXY",
                "Uri": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":apigateway:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":lambda:path/2015-03-31/functions/",
                      {
                        "Fn::GetAtt": [
                          "GetFilesByPatientLambdaFunction",
                          "Arn"
                        ]
                      },
                      "/invocations"
                    ]
                  ]
                }
              },
              "MethodResponses": []
            },
            "DependsOn": [
              "GetFilesByPatientLambdaPermissionApiGateway"
            ]
          },
          "ApiGatewayMethodPatientDashfilesDownloadFileidVarGet": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "HttpMethod": "GET",
              "RequestParameters": {},
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesDownloadFileidVar"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              },
              "ApiKeyRequired": false,
              "AuthorizationType": "NONE",
              "Integration": {
                "IntegrationHttpMethod": "POST",
                "Type": "AWS_PROXY",
                "Uri": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":apigateway:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":lambda:path/2015-03-31/functions/",
                      {
                        "Fn::GetAtt": [
                          "GetDownloadUrlLambdaFunction",
                          "Arn"
                        ]
                      },
                      "/invocations"
                    ]
                  ]
                }
              },
              "MethodResponses": []
            },
            "DependsOn": [
              "GetDownloadUrlLambdaPermissionApiGateway"
            ]
          },
          "ApiGatewayMethodPatientDashfilesFileidVarDelete": {
            "Type": "AWS::ApiGateway::Method",
            "Properties": {
              "HttpMethod": "DELETE",
              "RequestParameters": {},
              "ResourceId": {
                "Ref": "ApiGatewayResourcePatientDashfilesFileidVar"
              },
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              },
              "ApiKeyRequired": false,
              "AuthorizationType": "NONE",
              "Integration": {
                "IntegrationHttpMethod": "POST",
                "Type": "AWS_PROXY",
                "Uri": {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":apigateway:",
                      {
                        "Ref": "AWS::Region"
                      },
                      ":lambda:path/2015-03-31/functions/",
                      {
                        "Fn::GetAtt": [
                          "DeleteFileLambdaFunction",
                          "Arn"
                        ]
                      },
                      "/invocations"
                    ]
                  ]
                }
              },
              "MethodResponses": []
            },
            "DependsOn": [
              "DeleteFileLambdaPermissionApiGateway"
            ]
          },
          "ApiGatewayDeployment1767034459105": {
            "Type": "AWS::ApiGateway::Deployment",
            "Properties": {
              "RestApiId": {
                "Ref": "ApiGatewayRestApi"
              },
              "StageName": "dev"
            },
            "DependsOn": [
              "ApiGatewayMethodPatientDashfilesUploadDashurlOptions",
              "ApiGatewayMethodPatientDashfilesMetadataOptions",
              "ApiGatewayMethodPatientDashfilesPatientPatientidVarOptions",
              "ApiGatewayMethodPatientDashfilesDownloadFileidVarOptions",
              "ApiGatewayMethodPatientDashfilesFileidVarOptions",
              "ApiGatewayMethodPatientDashfilesUploadDashurlPost",
              "ApiGatewayMethodPatientDashfilesMetadataPost",
              "ApiGatewayMethodPatientDashfilesPatientPatientidVarGet",
              "ApiGatewayMethodPatientDashfilesDownloadFileidVarGet",
              "ApiGatewayMethodPatientDashfilesFileidVarDelete"
            ]
          },
          "GetUploadUrlLambdaPermissionApiGateway": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetUploadUrlLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "ApiGatewayRestApi"
                    },
                    "/*/*"
                  ]
                ]
              }
            }
          },
          "SaveFileMetadataLambdaPermissionApiGateway": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "SaveFileMetadataLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "ApiGatewayRestApi"
                    },
                    "/*/*"
                  ]
                ]
              }
            }
          },
          "GetFilesByPatientLambdaPermissionApiGateway": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetFilesByPatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "ApiGatewayRestApi"
                    },
                    "/*/*"
                  ]
                ]
              }
            }
          },
          "GetDownloadUrlLambdaPermissionApiGateway": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetDownloadUrlLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "ApiGatewayRestApi"
                    },
                    "/*/*"
                  ]
                ]
              }
            }
          },
          "DeleteFileLambdaPermissionApiGateway": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "DeleteFileLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "ApiGatewayRestApi"
                    },
                    "/*/*"
                  ]
                ]
              }
            }
          },
          "HttpApi": {
            "Type": "AWS::ApiGatewayV2::Api",
            "Properties": {
              "Name": "dev-ehr-backend-api",
              "ProtocolType": "HTTP",
              "CorsConfiguration": {
                "AllowHeaders": [
                  "Content-Type",
                  "Authorization"
                ],
                "AllowMethods": [
                  "GET",
                  "POST",
                  "PUT",
                  "DELETE",
                  "OPTIONS"
                ],
                "AllowOrigins": [
                  "*"
                ]
              }
            }
          },
          "HttpApiStage": {
            "Type": "AWS::ApiGatewayV2::Stage",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "StageName": "$default",
              "AutoDeploy": true,
              "DefaultRouteSettings": {
                "DetailedMetricsEnabled": false
              }
            }
          },
          "WebauthnRegisterStartLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "WebauthnRegisterStartLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationWebauthnRegisterStart": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"WebauthnRegisterStartLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostWebauthnRegisterStart": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /webauthn/register/start",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationWebauthnRegisterStart"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationWebauthnRegisterStart"
          },
          "WebauthnRegisterFinishLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "WebauthnRegisterFinishLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationWebauthnRegisterFinish": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"WebauthnRegisterFinishLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostWebauthnRegisterFinish": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /webauthn/register/finish",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationWebauthnRegisterFinish"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationWebauthnRegisterFinish"
          },
          "WebauthnAuthStartLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "WebauthnAuthStartLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationWebauthnAuthStart": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"WebauthnAuthStartLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostWebauthnAuthStart": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /webauthn/auth/start",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationWebauthnAuthStart"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationWebauthnAuthStart"
          },
          "WebauthnAuthFinishLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "WebauthnAuthFinishLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationWebauthnAuthFinish": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"WebauthnAuthFinishLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostWebauthnAuthFinish": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /webauthn/auth/finish",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationWebauthnAuthFinish"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationWebauthnAuthFinish"
          },
          "WebauthnGetCredentialsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "WebauthnGetCredentialsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationWebauthnGetCredentials": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"WebauthnGetCredentialsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetWebauthnCredentials": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /webauthn/credentials",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationWebauthnGetCredentials"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationWebauthnGetCredentials"
          },
          "WebauthnDeleteCredentialLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "WebauthnDeleteCredentialLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationWebauthnDeleteCredential": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"WebauthnDeleteCredentialLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteDeleteWebauthnCredentialsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "DELETE /webauthn/credentials/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationWebauthnDeleteCredential"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationWebauthnDeleteCredential"
          },
          "LoginLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "LoginLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationLogin": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"LoginLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostAuthLogin": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /auth/login",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationLogin"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationLogin"
          },
          "ChangePasswordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "ChangePasswordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationChangePassword": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"ChangePasswordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostAuthChangeDashpassword": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /auth/change-password",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationChangePassword"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationChangePassword"
          },
          "RefreshTokenLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "RefreshTokenLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationRefreshToken": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"RefreshTokenLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostAuthRefresh": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /auth/refresh",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationRefreshToken"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationRefreshToken"
          },
          "InitMFALambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "InitMFALambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationInitMFA": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"InitMFALambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostMfaInit": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /mfa/init",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationInitMFA"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationInitMFA"
          },
          "VerifyMFALambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "VerifyMFALambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationVerifyMFA": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"VerifyMFALambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostMfaVerify": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /mfa/verify",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationVerifyMFA"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationVerifyMFA"
          },
          "GetMFAStatusLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMFAStatusLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMFAStatus": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMFAStatusLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMfaStatusUseridVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /mfa/status/{userId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMFAStatus"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMFAStatus"
          },
          "CreateUserLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreateUserLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreateUser": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreateUserLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostUsers": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /users",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreateUser"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreateUser"
          },
          "ListUsersLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "ListUsersLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationListUsers": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"ListUsersLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetUsers": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /users",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationListUsers"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationListUsers"
          },
          "DisableUserLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "DisableUserLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationDisableUser": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"DisableUserLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePutUsersIdVarDisable": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "PUT /users/{id}/disable",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationDisableUser"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationDisableUser"
          },
          "ResetUserPasswordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "ResetUserPasswordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationResetUserPassword": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"ResetUserPasswordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostUsersIdVarResetDashpassword": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /users/{id}/reset-password",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationResetUserPassword"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationResetUserPassword"
          },
          "CreatePatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreatePatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreatePatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreatePatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostPatients": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /patients",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreatePatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreatePatient"
          },
          "GetPatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetPatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetPatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetPatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPatientsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /patients/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetPatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetPatient"
          },
          "SearchPatientsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "SearchPatientsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationSearchPatients": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"SearchPatientsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPatientsSearch": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /patients/search",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationSearchPatients"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationSearchPatients"
          },
          "UpdatePatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "UpdatePatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationUpdatePatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"UpdatePatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePutPatientsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "PUT /patients/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationUpdatePatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationUpdatePatient"
          },
          "GetMyProfileLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMyProfileLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMyProfile": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMyProfileLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPatientsMe": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /patients/me",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMyProfile"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMyProfile"
          },
          "GetMyMedicalRecordsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMyMedicalRecordsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMyMedicalRecords": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMyMedicalRecordsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMedicalDashrecordsMe": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /medical-records/me",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMyMedicalRecords"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMyMedicalRecords"
          },
          "GetMyPrescriptionsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMyPrescriptionsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMyPrescriptions": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMyPrescriptionsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPrescriptionsMe": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /prescriptions/me",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMyPrescriptions"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMyPrescriptions"
          },
          "GetMyVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMyVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMyVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMyVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetVitalDashsignsMe": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /vital-signs/me",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMyVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMyVitalSigns"
          },
          "CreateVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreateVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreateVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreateVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostVitalDashsigns": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /vital-signs",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreateVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreateVitalSigns"
          },
          "GetVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetVitalDashsignsPatientPatientidVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /vital-signs/patient/{patientId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetVitalSigns"
          },
          "GetLatestVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetLatestVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetLatestVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetLatestVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetVitalDashsignsPatientPatientidVarLatest": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /vital-signs/patient/{patientId}/latest",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetLatestVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetLatestVitalSigns"
          },
          "CreateMedicalRecordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreateMedicalRecordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreateMedicalRecord": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreateMedicalRecordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostMedicalDashrecords": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /medical-records",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreateMedicalRecord"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreateMedicalRecord"
          },
          "GetMedicalRecordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMedicalRecordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMedicalRecord": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMedicalRecordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMedicalDashrecordsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /medical-records/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMedicalRecord"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMedicalRecord"
          },
          "GetMedicalRecordsByPatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMedicalRecordsByPatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMedicalRecordsByPatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMedicalRecordsByPatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMedicalDashrecordsPatientPatientidVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /medical-records/patient/{patientId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMedicalRecordsByPatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMedicalRecordsByPatient"
          },
          "UpdateMedicalRecordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "UpdateMedicalRecordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationUpdateMedicalRecord": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"UpdateMedicalRecordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePutMedicalDashrecordsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "PUT /medical-records/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationUpdateMedicalRecord"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationUpdateMedicalRecord"
          },
          "CreatePrescriptionLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreatePrescriptionLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreatePrescription": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreatePrescriptionLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostPrescriptions": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /prescriptions",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreatePrescription"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreatePrescription"
          },
          "GetPrescriptionLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetPrescriptionLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetPrescription": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetPrescriptionLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPrescriptionsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /prescriptions/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetPrescription"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetPrescription"
          },
          "GetPrescriptionsByPatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetPrescriptionsByPatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetPrescriptionsByPatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetPrescriptionsByPatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPrescriptionsPatientPatientidVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /prescriptions/patient/{patientId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetPrescriptionsByPatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetPrescriptionsByPatient"
          },
          "GetAuditLogsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetAuditLogsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetAuditLogs": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetAuditLogsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetAuditDashlogs": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /audit-logs",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetAuditLogs"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetAuditLogs"
          },
          "PatientFilesBucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
              "BucketName": "ehr-backend-api-patient-files-dev",
              "BucketEncryption": {
                "ServerSideEncryptionConfiguration": [
                  {
                    "ServerSideEncryptionByDefault": {
                      "SSEAlgorithm": "AES256"
                    }
                  }
                ]
              },
              "PublicAccessBlockConfiguration": {
                "BlockPublicAcls": true,
                "BlockPublicPolicy": true,
                "IgnorePublicAcls": true,
                "RestrictPublicBuckets": true
              },
              "CorsConfiguration": {
                "CorsRules": [
                  {
                    "AllowedOrigins": [
                      "*"
                    ],
                    "AllowedMethods": [
                      "GET",
                      "PUT",
                      "POST"
                    ],
                    "AllowedHeaders": [
                      "*"
                    ]
                  }
                ]
              }
            }
          }
        },
        "Outputs": {
          "ServerlessDeploymentBucketName": {
            "Value": {
              "Ref": "ServerlessDeploymentBucket"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ServerlessDeploymentBucketName"
            }
          },
          "WebauthnRegisterStartLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "WebauthnRegisterStartLambdaVersionLrMhFX7L793DgcclGJykRvJWthYz7VxlxU6GmuctR8"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-WebauthnRegisterStartLambdaFunctionQualifiedArn"
            }
          },
          "WebauthnRegisterFinishLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "WebauthnRegisterFinishLambdaVersion7MlEQP8rVs2YjPLXLuRdeDNsBDX6KPUARf0DvC45E4"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-WebauthnRegisterFinishLambdaFunctionQualifiedArn"
            }
          },
          "WebauthnAuthStartLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "WebauthnAuthStartLambdaVersionQDbR3t6Wqn6ssNXqjNWEFvc92wocFZFCp7qgZRTdE"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-WebauthnAuthStartLambdaFunctionQualifiedArn"
            }
          },
          "WebauthnAuthFinishLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "WebauthnAuthFinishLambdaVersion88Pllihmk5j6IxmC4oln72W4vDjS4Bejcwv9qI0pR2Q"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-WebauthnAuthFinishLambdaFunctionQualifiedArn"
            }
          },
          "WebauthnGetCredentialsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "WebauthnGetCredentialsLambdaVersionR7ZFGMyAaLOfjhgwrqPu6TTRIpQY4qe06aEAG2PE4"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-WebauthnGetCredentialsLambdaFunctionQualifiedArn"
            }
          },
          "WebauthnDeleteCredentialLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "WebauthnDeleteCredentialLambdaVersion28vooqHdo2oc9ttrXOj0Vn2jo8b9y5A2p8axtohjas"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-WebauthnDeleteCredentialLambdaFunctionQualifiedArn"
            }
          },
          "LoginLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "LoginLambdaVersionWD27ZDJOBM8l15LFkuQIYVRLQmm0XYvclO4qG1oc0F0"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-LoginLambdaFunctionQualifiedArn"
            }
          },
          "ChangePasswordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "ChangePasswordLambdaVersion4gpIhCnlsC5hRTgQ3L2KrHfCdJwUsSVqv9fJ4gOscY"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ChangePasswordLambdaFunctionQualifiedArn"
            }
          },
          "RefreshTokenLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "RefreshTokenLambdaVersionJVl1O6L0w9m4Mo1G8pWSC0s5ECudB493ToL7FQh8"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-RefreshTokenLambdaFunctionQualifiedArn"
            }
          },
          "InitMFALambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "InitMFALambdaVersion0eMocrn0ixTZJrqeIHmQANVfaUbR5tDoq26yBSGgM"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-InitMFALambdaFunctionQualifiedArn"
            }
          },
          "VerifyMFALambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "VerifyMFALambdaVersion4v2e0r9DGxxuJsqPSK40CVddbce9B8qgZs4IEPhAoM"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-VerifyMFALambdaFunctionQualifiedArn"
            }
          },
          "GetMFAStatusLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMFAStatusLambdaVersion6etUdZpsExvhcLFu9rkjzES4MGHklokvbt6tQZ6hI"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMFAStatusLambdaFunctionQualifiedArn"
            }
          },
          "CreateUserLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreateUserLambdaVersionOdEUtPzatP22MBarNIqgICcA6fEDMrJDXGe1okwfC80"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreateUserLambdaFunctionQualifiedArn"
            }
          },
          "ListUsersLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "ListUsersLambdaVersion6yMw7dx3b2r6xFyGX0Ha5QJOCaFoL9yDeZyp2pY"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ListUsersLambdaFunctionQualifiedArn"
            }
          },
          "DisableUserLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "DisableUserLambdaVersiongisFaWlDOKrWkdvAF5ueIF58TOeqN2b1ZGbgcjDtyg"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-DisableUserLambdaFunctionQualifiedArn"
            }
          },
          "ResetUserPasswordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "ResetUserPasswordLambdaVersionIvECFuJgDdfInn90GoWsPK2EBfO3uIT99k4Br0EI"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ResetUserPasswordLambdaFunctionQualifiedArn"
            }
          },
          "CreatePatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreatePatientLambdaVersion4gZIeSk3xo5vtENvVqDNc0Gyi94WhO8QFsW5g9d1tE"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreatePatientLambdaFunctionQualifiedArn"
            }
          },
          "GetPatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetPatientLambdaVersion9PsjKMcphx4vDuTpQ7aEK3JHxW2olLke7LaXCMQDDA"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetPatientLambdaFunctionQualifiedArn"
            }
          },
          "SearchPatientsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "SearchPatientsLambdaVersionq6UlEJYdJl579WXhobcOqHPiViIsBH5g1Eo4QREVYg"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-SearchPatientsLambdaFunctionQualifiedArn"
            }
          },
          "UpdatePatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "UpdatePatientLambdaVersiond8vOZGoeVh5sIIIISReHDc3A7BDgECsqQbs1QA1S8CQ"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-UpdatePatientLambdaFunctionQualifiedArn"
            }
          },
          "GetMyProfileLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMyProfileLambdaVersionMuC7uzUGq7i4DpCFiGTMrD8IuBWdUf6mNHbs3qrU0"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMyProfileLambdaFunctionQualifiedArn"
            }
          },
          "GetMyMedicalRecordsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMyMedicalRecordsLambdaVersionHcYJE1AW5ri592RLFXbHRmTIglruGGgJlafWn0m1BRU"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMyMedicalRecordsLambdaFunctionQualifiedArn"
            }
          },
          "GetMyPrescriptionsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMyPrescriptionsLambdaVersion1b7pK2jBWc3aj5llR8J0fEtrFwn59A0MfKnmfxxZmJI"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMyPrescriptionsLambdaFunctionQualifiedArn"
            }
          },
          "GetMyVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMyVitalSignsLambdaVersionwGLvGK0GdAUSHQe9WCKnosscODFTIXikhqq2FtVE"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMyVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "CreateVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreateVitalSignsLambdaVersionTmyKatCD194GvMjb61R8xMicU52qVvT1aKvDGwxsgrw"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreateVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "GetVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetVitalSignsLambdaVersionyGjRVVjxNkVO9PJ9GsLqDOwUs35gYbNXb8CjQZjk"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "GetLatestVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetLatestVitalSignsLambdaVersionVIWxGwA8ihOnKO9JJHlmCfUEI1tbWghYjzLcqqCPyhw"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetLatestVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "CreateMedicalRecordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreateMedicalRecordLambdaVersionrGimwUU1TVhGtDqE7QiyYcGGFEHTEHQ9SXeL0jqH4U"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreateMedicalRecordLambdaFunctionQualifiedArn"
            }
          },
          "GetMedicalRecordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMedicalRecordLambdaVersionUv03jzKLkKXHeyaPADVaEwaKiy4IX5J54xSu7jkHF7s"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMedicalRecordLambdaFunctionQualifiedArn"
            }
          },
          "GetMedicalRecordsByPatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMedicalRecordsByPatientLambdaVersionX70gkcQE2K3mjcFOOh0A0Uo1m1FFacuuN6Y79Rz0PfI"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMedicalRecordsByPatientLambdaFunctionQualifiedArn"
            }
          },
          "UpdateMedicalRecordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "UpdateMedicalRecordLambdaVersion351RrFTBwTMnL8ur80gFxk2mMZ1aW6WxYvLqkh5CxYE"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-UpdateMedicalRecordLambdaFunctionQualifiedArn"
            }
          },
          "CreatePrescriptionLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreatePrescriptionLambdaVersionp9xJmKvp9oHD4hGjyGcObzLwoaLPr6OXiEuU4R3fw"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreatePrescriptionLambdaFunctionQualifiedArn"
            }
          },
          "GetPrescriptionLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetPrescriptionLambdaVersion9t0gC7RXr48cllhxBPkazLInRhTwq24kCQIA4QUSs"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetPrescriptionLambdaFunctionQualifiedArn"
            }
          },
          "GetPrescriptionsByPatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetPrescriptionsByPatientLambdaVersionLssk0PNXiBPcwShw6cIJ4O0PinX4ZvKrDau5M6eE"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetPrescriptionsByPatientLambdaFunctionQualifiedArn"
            }
          },
          "GetAuditLogsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetAuditLogsLambdaVersion1UO4vdwjKE6CS7hHL345prjMB6xJj2J60qY3csxlXo"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetAuditLogsLambdaFunctionQualifiedArn"
            }
          },
          "GetUploadUrlLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetUploadUrlLambdaVersionbWGnXncfBHbKHSTNVj03GyV5wecuOum7kTrOpOPttI"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetUploadUrlLambdaFunctionQualifiedArn"
            }
          },
          "SaveFileMetadataLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "SaveFileMetadataLambdaVersionBqcUcasenlyhXbYtN5LHdAlucXDpiL58Y4SVROOSU"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-SaveFileMetadataLambdaFunctionQualifiedArn"
            }
          },
          "GetFilesByPatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetFilesByPatientLambdaVersionvk5y5BpK8tGBiUOPlB0Kp6Kad4WNZgAgLOkQQAo67N8"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetFilesByPatientLambdaFunctionQualifiedArn"
            }
          },
          "GetDownloadUrlLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetDownloadUrlLambdaVersion9TIrnQXYnJ90wMZ3eHqA2cJn7fOMfewOYjL5InXAgsE"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetDownloadUrlLambdaFunctionQualifiedArn"
            }
          },
          "DeleteFileLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "DeleteFileLambdaVersion3m0pLTbthOLIZbLttjF4t22M4H8WrXYW40p7qag"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-DeleteFileLambdaFunctionQualifiedArn"
            }
          },
          "ServiceEndpoint": {
            "Description": "URL of the service endpoint",
            "Value": {
              "Fn::Join": [
                "",
                [
                  "https://",
                  {
                    "Ref": "ApiGatewayRestApi"
                  },
                  ".execute-api.",
                  {
                    "Ref": "AWS::Region"
                  },
                  ".",
                  {
                    "Ref": "AWS::URLSuffix"
                  },
                  "/dev"
                ]
              ]
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ServiceEndpoint"
            }
          },
          "HttpApiId": {
            "Description": "Id of the HTTP API",
            "Value": {
              "Ref": "HttpApi"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-HttpApiId"
            }
          },
          "HttpApiUrl": {
            "Description": "URL of the HTTP API",
            "Value": {
              "Fn::Join": [
                "",
                [
                  "https://",
                  {
                    "Ref": "HttpApi"
                  },
                  ".execute-api.",
                  {
                    "Ref": "AWS::Region"
                  },
                  ".",
                  {
                    "Ref": "AWS::URLSuffix"
                  }
                ]
              ]
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-HttpApiUrl"
            }
          }
        }
      },
      "coreCloudFormationTemplate": {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "The AWS CloudFormation template for this Serverless application",
        "Resources": {
          "ServerlessDeploymentBucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
              "BucketEncryption": {
                "ServerSideEncryptionConfiguration": [
                  {
                    "ServerSideEncryptionByDefault": {
                      "SSEAlgorithm": "AES256"
                    }
                  }
                ]
              }
            }
          },
          "ServerlessDeploymentBucketPolicy": {
            "Type": "AWS::S3::BucketPolicy",
            "Properties": {
              "Bucket": {
                "Ref": "ServerlessDeploymentBucket"
              },
              "PolicyDocument": {
                "Statement": [
                  {
                    "Action": "s3:*",
                    "Effect": "Deny",
                    "Principal": "*",
                    "Resource": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            },
                            "/*"
                          ]
                        ]
                      },
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            }
                          ]
                        ]
                      }
                    ],
                    "Condition": {
                      "Bool": {
                        "aws:SecureTransport": false
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "Outputs": {
          "ServerlessDeploymentBucketName": {
            "Value": {
              "Ref": "ServerlessDeploymentBucket"
            }
          }
        }
      },
      "vpc": {}
    },
    "custom": {
      "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION"
    },
    "plugins": [
      "serverless-offline",
      "serverless-dotenv-plugin"
    ],
    "pluginsData": {},
    "functions": {
      "webauthnRegisterStart": {
        "handler": "handlers/webauthn.startRegistration",
        "events": [
          {
            "httpApi": {
              "path": "/webauthn/register/start",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/webauthn/register/start"
          }
        ],
        "name": "ehr-backend-api-dev-webauthnRegisterStart",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "WebauthnRegisterStartLambdaVersionLrMhFX7L793DgcclGJykRvJWthYz7VxlxU6GmuctR8"
      },
      "webauthnRegisterFinish": {
        "handler": "handlers/webauthn.finishRegistration",
        "events": [
          {
            "httpApi": {
              "path": "/webauthn/register/finish",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/webauthn/register/finish"
          }
        ],
        "name": "ehr-backend-api-dev-webauthnRegisterFinish",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "WebauthnRegisterFinishLambdaVersion7MlEQP8rVs2YjPLXLuRdeDNsBDX6KPUARf0DvC45E4"
      },
      "webauthnAuthStart": {
        "handler": "handlers/webauthn.startAuthentication",
        "events": [
          {
            "httpApi": {
              "path": "/webauthn/auth/start",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/webauthn/auth/start"
          }
        ],
        "name": "ehr-backend-api-dev-webauthnAuthStart",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "WebauthnAuthStartLambdaVersionQDbR3t6Wqn6ssNXqjNWEFvc92wocFZFCp7qgZRTdE"
      },
      "webauthnAuthFinish": {
        "handler": "handlers/webauthn.finishAuthentication",
        "events": [
          {
            "httpApi": {
              "path": "/webauthn/auth/finish",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/webauthn/auth/finish"
          }
        ],
        "name": "ehr-backend-api-dev-webauthnAuthFinish",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "WebauthnAuthFinishLambdaVersion88Pllihmk5j6IxmC4oln72W4vDjS4Bejcwv9qI0pR2Q"
      },
      "webauthnGetCredentials": {
        "handler": "handlers/webauthn.getCredentials",
        "events": [
          {
            "httpApi": {
              "path": "/webauthn/credentials",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/webauthn/credentials"
          }
        ],
        "name": "ehr-backend-api-dev-webauthnGetCredentials",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "WebauthnGetCredentialsLambdaVersionR7ZFGMyAaLOfjhgwrqPu6TTRIpQY4qe06aEAG2PE4"
      },
      "webauthnDeleteCredential": {
        "handler": "handlers/webauthn.deleteCredential",
        "events": [
          {
            "httpApi": {
              "path": "/webauthn/credentials/{id}",
              "method": "delete"
            },
            "resolvedMethod": "DELETE",
            "resolvedPath": "/webauthn/credentials/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-webauthnDeleteCredential",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "WebauthnDeleteCredentialLambdaVersion28vooqHdo2oc9ttrXOj0Vn2jo8b9y5A2p8axtohjas"
      },
      "login": {
        "handler": "handlers/auth.login",
        "events": [
          {
            "httpApi": {
              "path": "/auth/login",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/auth/login"
          }
        ],
        "name": "ehr-backend-api-dev-login",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "LoginLambdaVersionWD27ZDJOBM8l15LFkuQIYVRLQmm0XYvclO4qG1oc0F0"
      },
      "changePassword": {
        "handler": "handlers/auth.changePassword",
        "events": [
          {
            "httpApi": {
              "path": "/auth/change-password",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/auth/change-password"
          }
        ],
        "name": "ehr-backend-api-dev-changePassword",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "ChangePasswordLambdaVersion4gpIhCnlsC5hRTgQ3L2KrHfCdJwUsSVqv9fJ4gOscY"
      },
      "refreshToken": {
        "handler": "handlers/auth.refreshToken",
        "events": [
          {
            "httpApi": {
              "path": "/auth/refresh",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/auth/refresh"
          }
        ],
        "name": "ehr-backend-api-dev-refreshToken",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "RefreshTokenLambdaVersionJVl1O6L0w9m4Mo1G8pWSC0s5ECudB493ToL7FQh8"
      },
      "initMFA": {
        "handler": "handlers/mfa.initMFA",
        "events": [
          {
            "httpApi": {
              "path": "/mfa/init",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/mfa/init"
          }
        ],
        "name": "ehr-backend-api-dev-initMFA",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "InitMFALambdaVersion0eMocrn0ixTZJrqeIHmQANVfaUbR5tDoq26yBSGgM"
      },
      "verifyMFA": {
        "handler": "handlers/mfa.verifyMFA",
        "events": [
          {
            "httpApi": {
              "path": "/mfa/verify",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/mfa/verify"
          }
        ],
        "name": "ehr-backend-api-dev-verifyMFA",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "VerifyMFALambdaVersion4v2e0r9DGxxuJsqPSK40CVddbce9B8qgZs4IEPhAoM"
      },
      "getMFAStatus": {
        "handler": "handlers/mfa.getMFAStatus",
        "events": [
          {
            "httpApi": {
              "path": "/mfa/status/{userId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/mfa/status/{userId}"
          }
        ],
        "name": "ehr-backend-api-dev-getMFAStatus",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMFAStatusLambdaVersion6etUdZpsExvhcLFu9rkjzES4MGHklokvbt6tQZ6hI"
      },
      "createUser": {
        "handler": "handlers/users.createUser",
        "events": [
          {
            "httpApi": {
              "path": "/users",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/users"
          }
        ],
        "name": "ehr-backend-api-dev-createUser",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreateUserLambdaVersionOdEUtPzatP22MBarNIqgICcA6fEDMrJDXGe1okwfC80"
      },
      "listUsers": {
        "handler": "handlers/users.listUsers",
        "events": [
          {
            "httpApi": {
              "path": "/users",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/users"
          }
        ],
        "name": "ehr-backend-api-dev-listUsers",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "ListUsersLambdaVersion6yMw7dx3b2r6xFyGX0Ha5QJOCaFoL9yDeZyp2pY"
      },
      "disableUser": {
        "handler": "handlers/users.disableUser",
        "events": [
          {
            "httpApi": {
              "path": "/users/{id}/disable",
              "method": "put"
            },
            "resolvedMethod": "PUT",
            "resolvedPath": "/users/{id}/disable"
          }
        ],
        "name": "ehr-backend-api-dev-disableUser",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "DisableUserLambdaVersiongisFaWlDOKrWkdvAF5ueIF58TOeqN2b1ZGbgcjDtyg"
      },
      "resetUserPassword": {
        "handler": "handlers/users.resetPassword",
        "events": [
          {
            "httpApi": {
              "path": "/users/{id}/reset-password",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/users/{id}/reset-password"
          }
        ],
        "name": "ehr-backend-api-dev-resetUserPassword",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "ResetUserPasswordLambdaVersionIvECFuJgDdfInn90GoWsPK2EBfO3uIT99k4Br0EI"
      },
      "createPatient": {
        "handler": "handlers/patients.create",
        "events": [
          {
            "httpApi": {
              "path": "/patients",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/patients"
          }
        ],
        "name": "ehr-backend-api-dev-createPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreatePatientLambdaVersion4gZIeSk3xo5vtENvVqDNc0Gyi94WhO8QFsW5g9d1tE"
      },
      "getPatient": {
        "handler": "handlers/patients.getById",
        "events": [
          {
            "httpApi": {
              "path": "/patients/{id}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/patients/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-getPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetPatientLambdaVersion9PsjKMcphx4vDuTpQ7aEK3JHxW2olLke7LaXCMQDDA"
      },
      "searchPatients": {
        "handler": "handlers/patients.search",
        "events": [
          {
            "httpApi": {
              "path": "/patients/search",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/patients/search"
          }
        ],
        "name": "ehr-backend-api-dev-searchPatients",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "SearchPatientsLambdaVersionq6UlEJYdJl579WXhobcOqHPiViIsBH5g1Eo4QREVYg"
      },
      "updatePatient": {
        "handler": "handlers/patients.update",
        "events": [
          {
            "httpApi": {
              "path": "/patients/{id}",
              "method": "put"
            },
            "resolvedMethod": "PUT",
            "resolvedPath": "/patients/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-updatePatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "UpdatePatientLambdaVersiond8vOZGoeVh5sIIIISReHDc3A7BDgECsqQbs1QA1S8CQ"
      },
      "getMyProfile": {
        "handler": "handlers/patientPortal.getMyProfile",
        "events": [
          {
            "httpApi": {
              "path": "/patients/me",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/patients/me"
          }
        ],
        "name": "ehr-backend-api-dev-getMyProfile",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMyProfileLambdaVersionMuC7uzUGq7i4DpCFiGTMrD8IuBWdUf6mNHbs3qrU0"
      },
      "getMyMedicalRecords": {
        "handler": "handlers/patientPortal.getMyMedicalRecords",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/me",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/medical-records/me"
          }
        ],
        "name": "ehr-backend-api-dev-getMyMedicalRecords",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMyMedicalRecordsLambdaVersionHcYJE1AW5ri592RLFXbHRmTIglruGGgJlafWn0m1BRU"
      },
      "getMyPrescriptions": {
        "handler": "handlers/patientPortal.getMyPrescriptions",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions/me",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/prescriptions/me"
          }
        ],
        "name": "ehr-backend-api-dev-getMyPrescriptions",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMyPrescriptionsLambdaVersion1b7pK2jBWc3aj5llR8J0fEtrFwn59A0MfKnmfxxZmJI"
      },
      "getMyVitalSigns": {
        "handler": "handlers/patientPortal.getMyVitalSigns",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs/me",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/vital-signs/me"
          }
        ],
        "name": "ehr-backend-api-dev-getMyVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMyVitalSignsLambdaVersionwGLvGK0GdAUSHQe9WCKnosscODFTIXikhqq2FtVE"
      },
      "createVitalSigns": {
        "handler": "handlers/vitalSigns.create",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/vital-signs"
          }
        ],
        "name": "ehr-backend-api-dev-createVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreateVitalSignsLambdaVersionTmyKatCD194GvMjb61R8xMicU52qVvT1aKvDGwxsgrw"
      },
      "getVitalSigns": {
        "handler": "handlers/vitalSigns.getByPatient",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs/patient/{patientId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/vital-signs/patient/{patientId}"
          }
        ],
        "name": "ehr-backend-api-dev-getVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetVitalSignsLambdaVersionyGjRVVjxNkVO9PJ9GsLqDOwUs35gYbNXb8CjQZjk"
      },
      "getLatestVitalSigns": {
        "handler": "handlers/vitalSigns.getLatest",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs/patient/{patientId}/latest",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/vital-signs/patient/{patientId}/latest"
          }
        ],
        "name": "ehr-backend-api-dev-getLatestVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetLatestVitalSignsLambdaVersionVIWxGwA8ihOnKO9JJHlmCfUEI1tbWghYjzLcqqCPyhw"
      },
      "createMedicalRecord": {
        "handler": "handlers/medicalRecords.create",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/medical-records"
          }
        ],
        "name": "ehr-backend-api-dev-createMedicalRecord",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreateMedicalRecordLambdaVersionrGimwUU1TVhGtDqE7QiyYcGGFEHTEHQ9SXeL0jqH4U"
      },
      "getMedicalRecord": {
        "handler": "handlers/medicalRecords.getById",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/{id}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/medical-records/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-getMedicalRecord",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMedicalRecordLambdaVersionUv03jzKLkKXHeyaPADVaEwaKiy4IX5J54xSu7jkHF7s"
      },
      "getMedicalRecordsByPatient": {
        "handler": "handlers/medicalRecords.getByPatient",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/patient/{patientId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/medical-records/patient/{patientId}"
          }
        ],
        "name": "ehr-backend-api-dev-getMedicalRecordsByPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMedicalRecordsByPatientLambdaVersionX70gkcQE2K3mjcFOOh0A0Uo1m1FFacuuN6Y79Rz0PfI"
      },
      "updateMedicalRecord": {
        "handler": "handlers/medicalRecords.update",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/{id}",
              "method": "put"
            },
            "resolvedMethod": "PUT",
            "resolvedPath": "/medical-records/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-updateMedicalRecord",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "UpdateMedicalRecordLambdaVersion351RrFTBwTMnL8ur80gFxk2mMZ1aW6WxYvLqkh5CxYE"
      },
      "createPrescription": {
        "handler": "handlers/prescriptions.create",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/prescriptions"
          }
        ],
        "name": "ehr-backend-api-dev-createPrescription",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreatePrescriptionLambdaVersionp9xJmKvp9oHD4hGjyGcObzLwoaLPr6OXiEuU4R3fw"
      },
      "getPrescription": {
        "handler": "handlers/prescriptions.getById",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions/{id}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/prescriptions/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-getPrescription",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetPrescriptionLambdaVersion9t0gC7RXr48cllhxBPkazLInRhTwq24kCQIA4QUSs"
      },
      "getPrescriptionsByPatient": {
        "handler": "handlers/prescriptions.getByPatient",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions/patient/{patientId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/prescriptions/patient/{patientId}"
          }
        ],
        "name": "ehr-backend-api-dev-getPrescriptionsByPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetPrescriptionsByPatientLambdaVersionLssk0PNXiBPcwShw6cIJ4O0PinX4ZvKrDau5M6eE"
      },
      "getAuditLogs": {
        "handler": "handlers/auditLogs.getLogs",
        "events": [
          {
            "httpApi": {
              "path": "/audit-logs",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/audit-logs"
          }
        ],
        "name": "ehr-backend-api-dev-getAuditLogs",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetAuditLogsLambdaVersion1UO4vdwjKE6CS7hHL345prjMB6xJj2J60qY3csxlXo"
      },
      "getUploadUrl": {
        "handler": "handlers/patientFiles.getUploadUrl",
        "events": [
          {
            "http": {
              "path": "patient-files/upload-url",
              "method": "post",
              "cors": {
                "origin": "*",
                "methods": [
                  "OPTIONS",
                  "POST"
                ],
                "headers": [
                  "Content-Type",
                  "X-Amz-Date",
                  "Authorization",
                  "X-Api-Key",
                  "X-Amz-Security-Token",
                  "X-Amz-User-Agent",
                  "X-Amzn-Trace-Id"
                ],
                "allowCredentials": false
              },
              "integration": "AWS_PROXY"
            }
          }
        ],
        "name": "ehr-backend-api-dev-getUploadUrl",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetUploadUrlLambdaVersionbWGnXncfBHbKHSTNVj03GyV5wecuOum7kTrOpOPttI"
      },
      "saveFileMetadata": {
        "handler": "handlers/patientFiles.saveFileMetadata",
        "events": [
          {
            "http": {
              "path": "patient-files/metadata",
              "method": "post",
              "cors": {
                "origin": "*",
                "methods": [
                  "OPTIONS",
                  "POST"
                ],
                "headers": [
                  "Content-Type",
                  "X-Amz-Date",
                  "Authorization",
                  "X-Api-Key",
                  "X-Amz-Security-Token",
                  "X-Amz-User-Agent",
                  "X-Amzn-Trace-Id"
                ],
                "allowCredentials": false
              },
              "integration": "AWS_PROXY"
            }
          }
        ],
        "name": "ehr-backend-api-dev-saveFileMetadata",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "SaveFileMetadataLambdaVersionBqcUcasenlyhXbYtN5LHdAlucXDpiL58Y4SVROOSU"
      },
      "getFilesByPatient": {
        "handler": "handlers/patientFiles.getFilesByPatient",
        "events": [
          {
            "http": {
              "path": "patient-files/patient/{patientId}",
              "method": "get",
              "cors": {
                "origin": "*",
                "methods": [
                  "OPTIONS",
                  "GET"
                ],
                "headers": [
                  "Content-Type",
                  "X-Amz-Date",
                  "Authorization",
                  "X-Api-Key",
                  "X-Amz-Security-Token",
                  "X-Amz-User-Agent",
                  "X-Amzn-Trace-Id"
                ],
                "allowCredentials": false
              },
              "integration": "AWS_PROXY"
            }
          }
        ],
        "name": "ehr-backend-api-dev-getFilesByPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetFilesByPatientLambdaVersionvk5y5BpK8tGBiUOPlB0Kp6Kad4WNZgAgLOkQQAo67N8"
      },
      "getDownloadUrl": {
        "handler": "handlers/patientFiles.getDownloadUrl",
        "events": [
          {
            "http": {
              "path": "patient-files/download/{fileId}",
              "method": "get",
              "cors": {
                "origin": "*",
                "methods": [
                  "OPTIONS",
                  "GET"
                ],
                "headers": [
                  "Content-Type",
                  "X-Amz-Date",
                  "Authorization",
                  "X-Api-Key",
                  "X-Amz-Security-Token",
                  "X-Amz-User-Agent",
                  "X-Amzn-Trace-Id"
                ],
                "allowCredentials": false
              },
              "integration": "AWS_PROXY"
            }
          }
        ],
        "name": "ehr-backend-api-dev-getDownloadUrl",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetDownloadUrlLambdaVersion9TIrnQXYnJ90wMZ3eHqA2cJn7fOMfewOYjL5InXAgsE"
      },
      "deleteFile": {
        "handler": "handlers/patientFiles.deleteFile",
        "events": [
          {
            "http": {
              "path": "patient-files/{fileId}",
              "method": "delete",
              "cors": {
                "origin": "*",
                "methods": [
                  "OPTIONS",
                  "DELETE"
                ],
                "headers": [
                  "Content-Type",
                  "X-Amz-Date",
                  "Authorization",
                  "X-Api-Key",
                  "X-Amz-Security-Token",
                  "X-Amz-User-Agent",
                  "X-Amzn-Trace-Id"
                ],
                "allowCredentials": false
              },
              "integration": "AWS_PROXY"
            }
          }
        ],
        "name": "ehr-backend-api-dev-deleteFile",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "DeleteFileLambdaVersion3m0pLTbthOLIZbLttjF4t22M4H8WrXYW40p7qag"
      }
    },
    "resources": {
      "Resources": {
        "PatientFilesBucket": {
          "Type": "AWS::S3::Bucket",
          "Properties": {
            "BucketName": "ehr-backend-api-patient-files-dev",
            "BucketEncryption": {
              "ServerSideEncryptionConfiguration": [
                {
                  "ServerSideEncryptionByDefault": {
                    "SSEAlgorithm": "AES256"
                  }
                }
              ]
            },
            "PublicAccessBlockConfiguration": {
              "BlockPublicAcls": true,
              "BlockPublicPolicy": true,
              "IgnorePublicAcls": true,
              "RestrictPublicBuckets": true
            },
            "CorsConfiguration": {
              "CorsRules": [
                {
                  "AllowedOrigins": [
                    "*"
                  ],
                  "AllowedMethods": [
                    "GET",
                    "PUT",
                    "POST"
                  ],
                  "AllowedHeaders": [
                    "*"
                  ]
                }
              ]
            }
          }
        }
      },
      "Outputs": {}
    },
    "configValidationMode": "warn",
    "serviceFilename": "serverless.yml",
    "initialServerlessConfig": {
      "service": "ehr-backend-api",
      "frameworkVersion": "3",
      "useDotenv": true,
      "provider": {
        "$ref": "$[\"service\"][\"provider\"]"
      },
      "plugins": {
        "$ref": "$[\"service\"][\"plugins\"]"
      },
      "custom": {
        "$ref": "$[\"service\"][\"custom\"]"
      },
      "functions": {
        "$ref": "$[\"service\"][\"functions\"]"
      },
      "package": {
        "individually": false,
        "patterns": [
          "!.git/**",
          "!test/**",
          "!.env.example",
          "!README.md"
        ],
        "artifactsS3KeyDirname": "serverless/ehr-backend-api/dev/code-artifacts",
        "artifact": "D:\\Workspace\\DuAnCNTT2025_2026\\2_11_DuAnCNTT\\ehr-system\\backend\\.serverless\\ehr-backend-api.zip",
        "artifactDirectoryName": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z"
      },
      "resources": {
        "$ref": "$[\"service\"][\"resources\"]"
      }
    },
    "layers": {},
    "isDashboardMonitoringPreconfigured": false,
    "artifact": "D:\\Workspace\\DuAnCNTT2025_2026\\2_11_DuAnCNTT\\ehr-system\\backend\\.serverless\\ehr-backend-api.zip"
  },
  "package": {
    "individually": false,
    "artifactDirectoryName": "serverless/ehr-backend-api/dev/1767034480839-2025-12-29T18:54:40.839Z",
    "artifact": "ehr-backend-api.zip"
  }
}