{
  "service": {
    "service": "ehr-backend-api",
    "serviceObject": {
      "name": "ehr-backend-api"
    },
    "provider": {
      "name": "aws",
      "runtime": "nodejs20.x",
      "region": "ap-southeast-1",
      "stage": "dev",
      "memorySize": 512,
      "timeout": 30,
      "environment": {
        "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
        "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
        "REGION": "ap-southeast-1",
        "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
        "DB_PORT": "5432",
        "DB_NAME": "ehr_production",
        "DB_USER": "postgres",
        "DB_PASSWORD": "EhrAdmin2025!",
        "NODE_ENV": "development",
        "DB_SSL": "true",
        "DATABASE_URL": "postgresql://postgres:EHRdb"
      },
      "iam": {
        "role": {
          "statements": [
            {
              "Effect": "Allow",
              "Action": [
                "cognito-idp:AdminGetUser",
                "cognito-idp:ListUsers"
              ],
              "Resource": "arn:aws:cognito-idp:ap-southeast-1:*:userpool/ap-southeast-1_KAphl41fW"
            },
            {
              "Effect": "Allow",
              "Action": [
                "secretsmanager:GetSecretValue"
              ],
              "Resource": "arn:aws:secretsmanager:ap-southeast-1:*:secret:ehr-system/*"
            },
            {
              "Effect": "Allow",
              "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents"
              ],
              "Resource": "*"
            }
          ]
        }
      },
      "httpApi": {
        "cors": {
          "allowedOrigins": [
            "*"
          ],
          "allowedHeaders": [
            "Content-Type",
            "Authorization"
          ],
          "allowedMethods": [
            "GET",
            "POST",
            "PUT",
            "DELETE",
            "OPTIONS"
          ]
        }
      },
      "versionFunctions": true,
      "compiledCloudFormationTemplate": {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "The AWS CloudFormation template for this Serverless application",
        "Resources": {
          "ServerlessDeploymentBucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
              "BucketEncryption": {
                "ServerSideEncryptionConfiguration": [
                  {
                    "ServerSideEncryptionByDefault": {
                      "SSEAlgorithm": "AES256"
                    }
                  }
                ]
              }
            }
          },
          "ServerlessDeploymentBucketPolicy": {
            "Type": "AWS::S3::BucketPolicy",
            "Properties": {
              "Bucket": {
                "Ref": "ServerlessDeploymentBucket"
              },
              "PolicyDocument": {
                "Statement": [
                  {
                    "Action": "s3:*",
                    "Effect": "Deny",
                    "Principal": "*",
                    "Resource": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            },
                            "/*"
                          ]
                        ]
                      },
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            }
                          ]
                        ]
                      }
                    ],
                    "Condition": {
                      "Bool": {
                        "aws:SecureTransport": false
                      }
                    }
                  }
                ]
              }
            }
          },
          "LoginLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-login"
            }
          },
          "ChangePasswordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-changePassword"
            }
          },
          "RefreshTokenLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-refreshToken"
            }
          },
          "CreatePatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPatient"
            }
          },
          "GetPatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPatient"
            }
          },
          "SearchPatientsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-searchPatients"
            }
          },
          "UpdatePatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updatePatient"
            }
          },
          "CreateVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createVitalSigns"
            }
          },
          "GetVitalSignsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getVitalSigns"
            }
          },
          "CreateMedicalRecordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createMedicalRecord"
            }
          },
          "GetMedicalRecordLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecord"
            }
          },
          "GetMedicalRecordsByPatientLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecordsByPatient"
            }
          },
          "CreatePrescriptionLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPrescription"
            }
          },
          "GetPrescriptionLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescription"
            }
          },
          "GetAuditLogsLogGroup": {
            "Type": "AWS::Logs::LogGroup",
            "Properties": {
              "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getAuditLogs"
            }
          },
          "IamRoleLambdaExecution": {
            "Type": "AWS::IAM::Role",
            "Properties": {
              "AssumeRolePolicyDocument": {
                "Version": "2012-10-17",
                "Statement": [
                  {
                    "Effect": "Allow",
                    "Principal": {
                      "Service": [
                        "lambda.amazonaws.com"
                      ]
                    },
                    "Action": [
                      "sts:AssumeRole"
                    ]
                  }
                ]
              },
              "Policies": [
                {
                  "PolicyName": {
                    "Fn::Join": [
                      "-",
                      [
                        "ehr-backend-api",
                        "dev",
                        "lambda"
                      ]
                    ]
                  },
                  "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                      {
                        "Effect": "Allow",
                        "Action": [
                          "logs:CreateLogStream",
                          "logs:CreateLogGroup",
                          "logs:TagResource"
                        ],
                        "Resource": [
                          {
                            "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*"
                          }
                        ]
                      },
                      {
                        "Effect": "Allow",
                        "Action": [
                          "logs:PutLogEvents"
                        ],
                        "Resource": [
                          {
                            "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*:*"
                          }
                        ]
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][0]"
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][1]"
                      },
                      {
                        "$ref": "$[\"service\"][\"provider\"][\"iam\"][\"role\"][\"statements\"][2]"
                      }
                    ]
                  }
                }
              ],
              "Path": "/",
              "RoleName": {
                "Fn::Join": [
                  "-",
                  [
                    "ehr-backend-api",
                    "dev",
                    {
                      "Ref": "AWS::Region"
                    },
                    "lambdaRole"
                  ]
                ]
              }
            }
          },
          "LoginLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auth.login",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-login",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "LoginLogGroup"
            ]
          },
          "ChangePasswordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auth.changePassword",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-changePassword",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "ChangePasswordLogGroup"
            ]
          },
          "RefreshTokenLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auth.refreshToken",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-refreshToken",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "RefreshTokenLogGroup"
            ]
          },
          "CreatePatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreatePatientLogGroup"
            ]
          },
          "GetPatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.getById",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetPatientLogGroup"
            ]
          },
          "SearchPatientsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.search",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-searchPatients",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "SearchPatientsLogGroup"
            ]
          },
          "UpdatePatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/patients.update",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-updatePatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "UpdatePatientLogGroup"
            ]
          },
          "CreateVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/vitalSigns.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreateVitalSignsLogGroup"
            ]
          },
          "GetVitalSignsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/vitalSigns.getByPatient",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getVitalSigns",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetVitalSignsLogGroup"
            ]
          },
          "CreateMedicalRecordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createMedicalRecord",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreateMedicalRecordLogGroup"
            ]
          },
          "GetMedicalRecordLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.getById",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMedicalRecord",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMedicalRecordLogGroup"
            ]
          },
          "GetMedicalRecordsByPatientLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/medicalRecords.getByPatient",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getMedicalRecordsByPatient",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetMedicalRecordsByPatientLogGroup"
            ]
          },
          "CreatePrescriptionLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/prescriptions.create",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-createPrescription",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "CreatePrescriptionLogGroup"
            ]
          },
          "GetPrescriptionLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/prescriptions.getById",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getPrescription",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetPrescriptionLogGroup"
            ]
          },
          "GetAuditLogsLambdaFunction": {
            "Type": "AWS::Lambda::Function",
            "Properties": {
              "Code": {
                "S3Bucket": {
                  "Ref": "ServerlessDeploymentBucket"
                },
                "S3Key": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z/ehr-backend-api.zip"
              },
              "Handler": "handlers/auditLogs.getLogs",
              "Runtime": "nodejs20.x",
              "FunctionName": "ehr-backend-api-dev-getAuditLogs",
              "MemorySize": 512,
              "Timeout": 30,
              "Environment": {
                "Variables": {
                  "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
                  "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
                  "REGION": "ap-southeast-1",
                  "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
                  "DB_PORT": "5432",
                  "DB_NAME": "ehr_production",
                  "DB_USER": "postgres",
                  "DB_PASSWORD": "EhrAdmin2025!",
                  "NODE_ENV": "development",
                  "DB_SSL": "true",
                  "DATABASE_URL": "postgresql://postgres:EHRdb"
                }
              },
              "Role": {
                "Fn::GetAtt": [
                  "IamRoleLambdaExecution",
                  "Arn"
                ]
              }
            },
            "DependsOn": [
              "GetAuditLogsLogGroup"
            ]
          },
          "LoginLambdaVersionrCf41idbaHMrKqkU1p9rpTTfiq2hZicxYydXOQML8": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "LoginLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "ChangePasswordLambdaVersion3NK8XbkQLgCSAnRiZF7tmaUPQz0S5TdUjh4VQlWd18": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "ChangePasswordLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "RefreshTokenLambdaVersionz6F2vVaui1i5c6Nudh6tZT4rkINFRAiTgdB4YaNpc": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "RefreshTokenLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "CreatePatientLambdaVersionHKoFByy5KcPoFe0yt3NHVZgmXjoMpYBK8zNpFnOxN8": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreatePatientLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "GetPatientLambdaVersionkN33BUQNdpBOJAE3ftB4eilE1UhLra7twHakRtwVN4": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetPatientLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "SearchPatientsLambdaVersionIahtUGoxLk2Af90ca8gwOb6fdo8pKVaDcDa6ajtwuQ": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "SearchPatientsLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "UpdatePatientLambdaVersiony6NHHckdBQdGCAAqa06Zw3enixoAhNMimZ80dew43mM": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "UpdatePatientLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "CreateVitalSignsLambdaVersionGKNasmGAWcLRyjVat4ZcPdvzsYGkzFp3jlSAhldoY": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreateVitalSignsLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "GetVitalSignsLambdaVersiongaQgJ9vSDVgnqb3SAmYR5Q07f7dznfEbp2VRCVGiIVg": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetVitalSignsLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "CreateMedicalRecordLambdaVersionBY4B8z7b1x8YalRkj8U69Y8KIRfYB4dvB9P1NjgFBo": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreateMedicalRecordLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "GetMedicalRecordLambdaVersion85tXRB5FtQRGilta6jpk3f5AW3adoTw6mMC26tyQJg0": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMedicalRecordLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "GetMedicalRecordsByPatientLambdaVersionlq6r1l8YBommOn2G6J9R8zi08DrjB2VrVBtyd48RY": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetMedicalRecordsByPatientLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "CreatePrescriptionLambdaVersionaapHfaYBbfUf7fAtTXGVSx4cjEG7T5SiEaxDQZr0": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "CreatePrescriptionLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "GetPrescriptionLambdaVersionxP9Jxpbn0O7qo8UWbh8txg9vxQ8W4m2CjmsLXgRoRo": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetPrescriptionLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "GetAuditLogsLambdaVersionhhEVLg6vYTF4uoqdBuUhdPoBWoJTxQZymZASnXig": {
            "Type": "AWS::Lambda::Version",
            "DeletionPolicy": "Retain",
            "Properties": {
              "FunctionName": {
                "Ref": "GetAuditLogsLambdaFunction"
              },
              "CodeSha256": "3MqzK7cJiJNIp6sLHJ2Cy+VTZGFg+mAM55H5INVo6hw="
            }
          },
          "HttpApi": {
            "Type": "AWS::ApiGatewayV2::Api",
            "Properties": {
              "Name": "dev-ehr-backend-api",
              "ProtocolType": "HTTP",
              "CorsConfiguration": {
                "AllowHeaders": [
                  "Content-Type",
                  "Authorization"
                ],
                "AllowMethods": [
                  "GET",
                  "POST",
                  "PUT",
                  "DELETE",
                  "OPTIONS"
                ],
                "AllowOrigins": [
                  "*"
                ]
              }
            }
          },
          "HttpApiStage": {
            "Type": "AWS::ApiGatewayV2::Stage",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "StageName": "$default",
              "AutoDeploy": true,
              "DefaultRouteSettings": {
                "DetailedMetricsEnabled": false
              }
            }
          },
          "LoginLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "LoginLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationLogin": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"LoginLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostAuthLogin": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /auth/login",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationLogin"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationLogin"
          },
          "ChangePasswordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "ChangePasswordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationChangePassword": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"ChangePasswordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostAuthChangeDashpassword": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /auth/change-password",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationChangePassword"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationChangePassword"
          },
          "RefreshTokenLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "RefreshTokenLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationRefreshToken": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"RefreshTokenLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostAuthRefresh": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /auth/refresh",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationRefreshToken"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationRefreshToken"
          },
          "CreatePatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreatePatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreatePatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreatePatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostPatients": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /patients",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreatePatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreatePatient"
          },
          "GetPatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetPatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetPatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetPatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPatientsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /patients/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetPatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetPatient"
          },
          "SearchPatientsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "SearchPatientsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationSearchPatients": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"SearchPatientsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPatientsSearch": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /patients/search",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationSearchPatients"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationSearchPatients"
          },
          "UpdatePatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "UpdatePatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationUpdatePatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"UpdatePatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePutPatientsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "PUT /patients/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationUpdatePatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationUpdatePatient"
          },
          "CreateVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreateVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreateVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreateVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostVitalDashsigns": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /vital-signs",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreateVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreateVitalSigns"
          },
          "GetVitalSignsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetVitalSignsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetVitalSigns": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetVitalSignsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetVitalDashsignsPatientPatientidVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /vital-signs/patient/{patientId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetVitalSigns"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetVitalSigns"
          },
          "CreateMedicalRecordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreateMedicalRecordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreateMedicalRecord": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreateMedicalRecordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostMedicalDashrecords": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /medical-records",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreateMedicalRecord"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreateMedicalRecord"
          },
          "GetMedicalRecordLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMedicalRecordLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMedicalRecord": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMedicalRecordLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMedicalDashrecordsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /medical-records/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMedicalRecord"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMedicalRecord"
          },
          "GetMedicalRecordsByPatientLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetMedicalRecordsByPatientLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetMedicalRecordsByPatient": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetMedicalRecordsByPatientLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetMedicalDashrecordsPatientPatientidVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /medical-records/patient/{patientId}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetMedicalRecordsByPatient"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetMedicalRecordsByPatient"
          },
          "CreatePrescriptionLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "CreatePrescriptionLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationCreatePrescription": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"CreatePrescriptionLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRoutePostPrescriptions": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "POST /prescriptions",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationCreatePrescription"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationCreatePrescription"
          },
          "GetPrescriptionLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetPrescriptionLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetPrescription": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetPrescriptionLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetPrescriptionsIdVar": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /prescriptions/{id}",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetPrescription"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetPrescription"
          },
          "GetAuditLogsLambdaPermissionHttpApi": {
            "Type": "AWS::Lambda::Permission",
            "Properties": {
              "FunctionName": {
                "Fn::GetAtt": [
                  "GetAuditLogsLambdaFunction",
                  "Arn"
                ]
              },
              "Action": "lambda:InvokeFunction",
              "Principal": "apigateway.amazonaws.com",
              "SourceArn": {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":execute-api:",
                    {
                      "Ref": "AWS::Region"
                    },
                    ":",
                    {
                      "Ref": "AWS::AccountId"
                    },
                    ":",
                    {
                      "Ref": "HttpApi"
                    },
                    "/*"
                  ]
                ]
              }
            }
          },
          "HttpApiIntegrationGetAuditLogs": {
            "Type": "AWS::ApiGatewayV2::Integration",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "IntegrationType": "AWS_PROXY",
              "IntegrationUri": {
                "$ref": "$[\"service\"][\"provider\"][\"compiledCloudFormationTemplate\"][\"Resources\"][\"GetAuditLogsLambdaPermissionHttpApi\"][\"Properties\"][\"FunctionName\"]"
              },
              "PayloadFormatVersion": "2.0",
              "TimeoutInMillis": 30000
            }
          },
          "HttpApiRouteGetAuditDashlogs": {
            "Type": "AWS::ApiGatewayV2::Route",
            "Properties": {
              "ApiId": {
                "Ref": "HttpApi"
              },
              "RouteKey": "GET /audit-logs",
              "Target": {
                "Fn::Join": [
                  "/",
                  [
                    "integrations",
                    {
                      "Ref": "HttpApiIntegrationGetAuditLogs"
                    }
                  ]
                ]
              }
            },
            "DependsOn": "HttpApiIntegrationGetAuditLogs"
          }
        },
        "Outputs": {
          "ServerlessDeploymentBucketName": {
            "Value": {
              "Ref": "ServerlessDeploymentBucket"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ServerlessDeploymentBucketName"
            }
          },
          "LoginLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "LoginLambdaVersionrCf41idbaHMrKqkU1p9rpTTfiq2hZicxYydXOQML8"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-LoginLambdaFunctionQualifiedArn"
            }
          },
          "ChangePasswordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "ChangePasswordLambdaVersion3NK8XbkQLgCSAnRiZF7tmaUPQz0S5TdUjh4VQlWd18"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-ChangePasswordLambdaFunctionQualifiedArn"
            }
          },
          "RefreshTokenLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "RefreshTokenLambdaVersionz6F2vVaui1i5c6Nudh6tZT4rkINFRAiTgdB4YaNpc"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-RefreshTokenLambdaFunctionQualifiedArn"
            }
          },
          "CreatePatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreatePatientLambdaVersionHKoFByy5KcPoFe0yt3NHVZgmXjoMpYBK8zNpFnOxN8"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreatePatientLambdaFunctionQualifiedArn"
            }
          },
          "GetPatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetPatientLambdaVersionkN33BUQNdpBOJAE3ftB4eilE1UhLra7twHakRtwVN4"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetPatientLambdaFunctionQualifiedArn"
            }
          },
          "SearchPatientsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "SearchPatientsLambdaVersionIahtUGoxLk2Af90ca8gwOb6fdo8pKVaDcDa6ajtwuQ"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-SearchPatientsLambdaFunctionQualifiedArn"
            }
          },
          "UpdatePatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "UpdatePatientLambdaVersiony6NHHckdBQdGCAAqa06Zw3enixoAhNMimZ80dew43mM"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-UpdatePatientLambdaFunctionQualifiedArn"
            }
          },
          "CreateVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreateVitalSignsLambdaVersionGKNasmGAWcLRyjVat4ZcPdvzsYGkzFp3jlSAhldoY"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreateVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "GetVitalSignsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetVitalSignsLambdaVersiongaQgJ9vSDVgnqb3SAmYR5Q07f7dznfEbp2VRCVGiIVg"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetVitalSignsLambdaFunctionQualifiedArn"
            }
          },
          "CreateMedicalRecordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreateMedicalRecordLambdaVersionBY4B8z7b1x8YalRkj8U69Y8KIRfYB4dvB9P1NjgFBo"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreateMedicalRecordLambdaFunctionQualifiedArn"
            }
          },
          "GetMedicalRecordLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMedicalRecordLambdaVersion85tXRB5FtQRGilta6jpk3f5AW3adoTw6mMC26tyQJg0"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMedicalRecordLambdaFunctionQualifiedArn"
            }
          },
          "GetMedicalRecordsByPatientLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetMedicalRecordsByPatientLambdaVersionlq6r1l8YBommOn2G6J9R8zi08DrjB2VrVBtyd48RY"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetMedicalRecordsByPatientLambdaFunctionQualifiedArn"
            }
          },
          "CreatePrescriptionLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "CreatePrescriptionLambdaVersionaapHfaYBbfUf7fAtTXGVSx4cjEG7T5SiEaxDQZr0"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-CreatePrescriptionLambdaFunctionQualifiedArn"
            }
          },
          "GetPrescriptionLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetPrescriptionLambdaVersionxP9Jxpbn0O7qo8UWbh8txg9vxQ8W4m2CjmsLXgRoRo"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetPrescriptionLambdaFunctionQualifiedArn"
            }
          },
          "GetAuditLogsLambdaFunctionQualifiedArn": {
            "Description": "Current Lambda function version",
            "Value": {
              "Ref": "GetAuditLogsLambdaVersionhhEVLg6vYTF4uoqdBuUhdPoBWoJTxQZymZASnXig"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-GetAuditLogsLambdaFunctionQualifiedArn"
            }
          },
          "HttpApiId": {
            "Description": "Id of the HTTP API",
            "Value": {
              "Ref": "HttpApi"
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-HttpApiId"
            }
          },
          "HttpApiUrl": {
            "Description": "URL of the HTTP API",
            "Value": {
              "Fn::Join": [
                "",
                [
                  "https://",
                  {
                    "Ref": "HttpApi"
                  },
                  ".execute-api.",
                  {
                    "Ref": "AWS::Region"
                  },
                  ".",
                  {
                    "Ref": "AWS::URLSuffix"
                  }
                ]
              ]
            },
            "Export": {
              "Name": "sls-ehr-backend-api-dev-HttpApiUrl"
            }
          }
        }
      },
      "coreCloudFormationTemplate": {
        "AWSTemplateFormatVersion": "2010-09-09",
        "Description": "The AWS CloudFormation template for this Serverless application",
        "Resources": {
          "ServerlessDeploymentBucket": {
            "Type": "AWS::S3::Bucket",
            "Properties": {
              "BucketEncryption": {
                "ServerSideEncryptionConfiguration": [
                  {
                    "ServerSideEncryptionByDefault": {
                      "SSEAlgorithm": "AES256"
                    }
                  }
                ]
              }
            }
          },
          "ServerlessDeploymentBucketPolicy": {
            "Type": "AWS::S3::BucketPolicy",
            "Properties": {
              "Bucket": {
                "Ref": "ServerlessDeploymentBucket"
              },
              "PolicyDocument": {
                "Statement": [
                  {
                    "Action": "s3:*",
                    "Effect": "Deny",
                    "Principal": "*",
                    "Resource": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            },
                            "/*"
                          ]
                        ]
                      },
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":s3:::",
                            {
                              "Ref": "ServerlessDeploymentBucket"
                            }
                          ]
                        ]
                      }
                    ],
                    "Condition": {
                      "Bool": {
                        "aws:SecureTransport": false
                      }
                    }
                  }
                ]
              }
            }
          }
        },
        "Outputs": {
          "ServerlessDeploymentBucketName": {
            "Value": {
              "Ref": "ServerlessDeploymentBucket"
            }
          }
        }
      },
      "vpc": {}
    },
    "plugins": [
      "serverless-offline",
      "serverless-dotenv-plugin"
    ],
    "pluginsData": {},
    "functions": {
      "login": {
        "handler": "handlers/auth.login",
        "events": [
          {
            "httpApi": {
              "path": "/auth/login",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/auth/login"
          }
        ],
        "name": "ehr-backend-api-dev-login",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "LoginLambdaVersionrCf41idbaHMrKqkU1p9rpTTfiq2hZicxYydXOQML8"
      },
      "changePassword": {
        "handler": "handlers/auth.changePassword",
        "events": [
          {
            "httpApi": {
              "path": "/auth/change-password",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/auth/change-password"
          }
        ],
        "name": "ehr-backend-api-dev-changePassword",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "ChangePasswordLambdaVersion3NK8XbkQLgCSAnRiZF7tmaUPQz0S5TdUjh4VQlWd18"
      },
      "refreshToken": {
        "handler": "handlers/auth.refreshToken",
        "events": [
          {
            "httpApi": {
              "path": "/auth/refresh",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/auth/refresh"
          }
        ],
        "name": "ehr-backend-api-dev-refreshToken",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "RefreshTokenLambdaVersionz6F2vVaui1i5c6Nudh6tZT4rkINFRAiTgdB4YaNpc"
      },
      "createPatient": {
        "handler": "handlers/patients.create",
        "events": [
          {
            "httpApi": {
              "path": "/patients",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/patients"
          }
        ],
        "name": "ehr-backend-api-dev-createPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreatePatientLambdaVersionHKoFByy5KcPoFe0yt3NHVZgmXjoMpYBK8zNpFnOxN8"
      },
      "getPatient": {
        "handler": "handlers/patients.getById",
        "events": [
          {
            "httpApi": {
              "path": "/patients/{id}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/patients/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-getPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetPatientLambdaVersionkN33BUQNdpBOJAE3ftB4eilE1UhLra7twHakRtwVN4"
      },
      "searchPatients": {
        "handler": "handlers/patients.search",
        "events": [
          {
            "httpApi": {
              "path": "/patients/search",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/patients/search"
          }
        ],
        "name": "ehr-backend-api-dev-searchPatients",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "SearchPatientsLambdaVersionIahtUGoxLk2Af90ca8gwOb6fdo8pKVaDcDa6ajtwuQ"
      },
      "updatePatient": {
        "handler": "handlers/patients.update",
        "events": [
          {
            "httpApi": {
              "path": "/patients/{id}",
              "method": "put"
            },
            "resolvedMethod": "PUT",
            "resolvedPath": "/patients/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-updatePatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "UpdatePatientLambdaVersiony6NHHckdBQdGCAAqa06Zw3enixoAhNMimZ80dew43mM"
      },
      "createVitalSigns": {
        "handler": "handlers/vitalSigns.create",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/vital-signs"
          }
        ],
        "name": "ehr-backend-api-dev-createVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreateVitalSignsLambdaVersionGKNasmGAWcLRyjVat4ZcPdvzsYGkzFp3jlSAhldoY"
      },
      "getVitalSigns": {
        "handler": "handlers/vitalSigns.getByPatient",
        "events": [
          {
            "httpApi": {
              "path": "/vital-signs/patient/{patientId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/vital-signs/patient/{patientId}"
          }
        ],
        "name": "ehr-backend-api-dev-getVitalSigns",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetVitalSignsLambdaVersiongaQgJ9vSDVgnqb3SAmYR5Q07f7dznfEbp2VRCVGiIVg"
      },
      "createMedicalRecord": {
        "handler": "handlers/medicalRecords.create",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/medical-records"
          }
        ],
        "name": "ehr-backend-api-dev-createMedicalRecord",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreateMedicalRecordLambdaVersionBY4B8z7b1x8YalRkj8U69Y8KIRfYB4dvB9P1NjgFBo"
      },
      "getMedicalRecord": {
        "handler": "handlers/medicalRecords.getById",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/{id}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/medical-records/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-getMedicalRecord",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMedicalRecordLambdaVersion85tXRB5FtQRGilta6jpk3f5AW3adoTw6mMC26tyQJg0"
      },
      "getMedicalRecordsByPatient": {
        "handler": "handlers/medicalRecords.getByPatient",
        "events": [
          {
            "httpApi": {
              "path": "/medical-records/patient/{patientId}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/medical-records/patient/{patientId}"
          }
        ],
        "name": "ehr-backend-api-dev-getMedicalRecordsByPatient",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetMedicalRecordsByPatientLambdaVersionlq6r1l8YBommOn2G6J9R8zi08DrjB2VrVBtyd48RY"
      },
      "createPrescription": {
        "handler": "handlers/prescriptions.create",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions",
              "method": "post"
            },
            "resolvedMethod": "POST",
            "resolvedPath": "/prescriptions"
          }
        ],
        "name": "ehr-backend-api-dev-createPrescription",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "CreatePrescriptionLambdaVersionaapHfaYBbfUf7fAtTXGVSx4cjEG7T5SiEaxDQZr0"
      },
      "getPrescription": {
        "handler": "handlers/prescriptions.getById",
        "events": [
          {
            "httpApi": {
              "path": "/prescriptions/{id}",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/prescriptions/{id}"
          }
        ],
        "name": "ehr-backend-api-dev-getPrescription",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetPrescriptionLambdaVersionxP9Jxpbn0O7qo8UWbh8txg9vxQ8W4m2CjmsLXgRoRo"
      },
      "getAuditLogs": {
        "handler": "handlers/auditLogs.getLogs",
        "events": [
          {
            "httpApi": {
              "path": "/audit-logs",
              "method": "get"
            },
            "resolvedMethod": "GET",
            "resolvedPath": "/audit-logs"
          }
        ],
        "name": "ehr-backend-api-dev-getAuditLogs",
        "package": {},
        "memory": 512,
        "timeout": 30,
        "runtime": "nodejs20.x",
        "vpc": {},
        "versionLogicalId": "GetAuditLogsLambdaVersionhhEVLg6vYTF4uoqdBuUhdPoBWoJTxQZymZASnXig"
      }
    },
    "configValidationMode": "warn",
    "serviceFilename": "serverless.yml",
    "initialServerlessConfig": {
      "service": "ehr-backend-api",
      "frameworkVersion": "3",
      "useDotenv": true,
      "provider": {
        "$ref": "$[\"service\"][\"provider\"]"
      },
      "plugins": {
        "$ref": "$[\"service\"][\"plugins\"]"
      },
      "functions": {
        "$ref": "$[\"service\"][\"functions\"]"
      },
      "package": {
        "individually": false,
        "exclude": [
          ".git/**",
          ".env",
          "node_modules/**",
          "test/**"
        ],
        "artifactsS3KeyDirname": "serverless/ehr-backend-api/dev/code-artifacts",
        "artifact": "D:\\Workspace\\DuAnCNTT2025_2026\\2_11_DuAnCNTT\\ehr-system\\backend\\.serverless\\ehr-backend-api.zip",
        "artifactDirectoryName": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z"
      }
    },
    "layers": {},
    "isDashboardMonitoringPreconfigured": false,
    "artifact": "D:\\Workspace\\DuAnCNTT2025_2026\\2_11_DuAnCNTT\\ehr-system\\backend\\.serverless\\ehr-backend-api.zip"
  },
  "package": {
    "individually": false,
    "artifactDirectoryName": "serverless/ehr-backend-api/dev/1762591858539-2025-11-08T08:50:58.539Z",
    "artifact": "ehr-backend-api.zip"
  }
}