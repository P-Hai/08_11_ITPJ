{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "The AWS CloudFormation template for this Serverless application",
  "Resources": {
    "ServerlessDeploymentBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        }
      }
    },
    "ServerlessDeploymentBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "ServerlessDeploymentBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Effect": "Deny",
              "Principal": "*",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      },
                      "/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      }
                    ]
                  ]
                }
              ],
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": false
                }
              }
            }
          ]
        }
      }
    },
    "WebauthnRegisterStartLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnRegisterStart"
      }
    },
    "WebauthnRegisterFinishLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnRegisterFinish"
      }
    },
    "WebauthnAuthStartLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnAuthStart"
      }
    },
    "WebauthnAuthFinishLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnAuthFinish"
      }
    },
    "WebauthnGetCredentialsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnGetCredentials"
      }
    },
    "WebauthnDeleteCredentialLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnDeleteCredential"
      }
    },
    "LoginLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-login"
      }
    },
    "ChangePasswordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-changePassword"
      }
    },
    "RefreshTokenLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-refreshToken"
      }
    },
    "InitMFALogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-initMFA"
      }
    },
    "VerifyMFALogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-verifyMFA"
      }
    },
    "GetMFAStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMFAStatus"
      }
    },
    "CreateUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createUser"
      }
    },
    "ListUsersLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-listUsers"
      }
    },
    "DisableUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-disableUser"
      }
    },
    "ResetUserPasswordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-resetUserPassword"
      }
    },
    "CreatePatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPatient"
      }
    },
    "GetPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPatient"
      }
    },
    "SearchPatientsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-searchPatients"
      }
    },
    "UpdatePatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updatePatient"
      }
    },
    "GetMyProfileLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyProfile"
      }
    },
    "GetMyMedicalRecordsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyMedicalRecords"
      }
    },
    "GetMyPrescriptionsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyPrescriptions"
      }
    },
    "GetMyVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyVitalSigns"
      }
    },
    "CreateVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createVitalSigns"
      }
    },
    "GetVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getVitalSigns"
      }
    },
    "GetLatestVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getLatestVitalSigns"
      }
    },
    "CreateMedicalRecordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createMedicalRecord"
      }
    },
    "GetMedicalRecordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecord"
      }
    },
    "GetMedicalRecordsByPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecordsByPatient"
      }
    },
    "UpdateMedicalRecordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updateMedicalRecord"
      }
    },
    "CreatePrescriptionLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPrescription"
      }
    },
    "GetPrescriptionLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescription"
      }
    },
    "GetPrescriptionsByPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescriptionsByPatient"
      }
    },
    "GetAuditLogsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getAuditLogs"
      }
    },
    "IamRoleLambdaExecution": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "lambda.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Join": [
                "-",
                [
                  "ehr-backend-api",
                  "dev",
                  "lambda"
                ]
              ]
            },
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:CreateLogGroup",
                    "logs:TagResource"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:PutLogEvents"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "ses:SendEmail",
                    "ses:SendRawEmail"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "cognito-idp:AdminGetUser",
                    "cognito-idp:ListUsers",
                    "cognito-idp:AdminCreateUser",
                    "cognito-idp:AdminAddUserToGroup",
                    "cognito-idp:AdminDisableUser",
                    "cognito-idp:AdminSetUserPassword",
                    "cognito-idp:AdminInitiateAuth",
                    "cognito-idp:AdminRespondToAuthChallenge",
                    "cognito-idp:AdminListGroupsForUser"
                  ],
                  "Resource": "arn:aws:cognito-idp:ap-southeast-1:*:userpool/ap-southeast-1_KAphl41fW"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "secretsmanager:GetSecretValue"
                  ],
                  "Resource": "arn:aws:secretsmanager:ap-southeast-1:*:secret:ehr-system/*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents"
                  ],
                  "Resource": "*"
                }
              ]
            }
          }
        ],
        "Path": "/",
        "RoleName": {
          "Fn::Join": [
            "-",
            [
              "ehr-backend-api",
              "dev",
              {
                "Ref": "AWS::Region"
              },
              "lambdaRole"
            ]
          ]
        }
      }
    },
    "WebauthnRegisterStartLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.startRegistration",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnRegisterStart",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnRegisterStartLogGroup"
      ]
    },
    "WebauthnRegisterFinishLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.finishRegistration",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnRegisterFinish",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnRegisterFinishLogGroup"
      ]
    },
    "WebauthnAuthStartLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.startAuthentication",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnAuthStart",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnAuthStartLogGroup"
      ]
    },
    "WebauthnAuthFinishLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.finishAuthentication",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnAuthFinish",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnAuthFinishLogGroup"
      ]
    },
    "WebauthnGetCredentialsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.getCredentials",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnGetCredentials",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnGetCredentialsLogGroup"
      ]
    },
    "WebauthnDeleteCredentialLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.deleteCredential",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnDeleteCredential",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnDeleteCredentialLogGroup"
      ]
    },
    "LoginLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auth.login",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-login",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "LoginLogGroup"
      ]
    },
    "ChangePasswordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auth.changePassword",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-changePassword",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ChangePasswordLogGroup"
      ]
    },
    "RefreshTokenLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auth.refreshToken",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-refreshToken",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RefreshTokenLogGroup"
      ]
    },
    "InitMFALambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/mfa.initMFA",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-initMFA",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "InitMFALogGroup"
      ]
    },
    "VerifyMFALambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/mfa.verifyMFA",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-verifyMFA",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "VerifyMFALogGroup"
      ]
    },
    "GetMFAStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/mfa.getMFAStatus",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMFAStatus",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMFAStatusLogGroup"
      ]
    },
    "CreateUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.createUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createUser",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateUserLogGroup"
      ]
    },
    "ListUsersLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.listUsers",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-listUsers",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListUsersLogGroup"
      ]
    },
    "DisableUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.disableUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-disableUser",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "DisableUserLogGroup"
      ]
    },
    "ResetUserPasswordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.resetPassword",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-resetUserPassword",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ResetUserPasswordLogGroup"
      ]
    },
    "CreatePatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreatePatientLogGroup"
      ]
    },
    "GetPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.getById",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPatientLogGroup"
      ]
    },
    "SearchPatientsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.search",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-searchPatients",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "SearchPatientsLogGroup"
      ]
    },
    "UpdatePatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.update",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-updatePatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdatePatientLogGroup"
      ]
    },
    "GetMyProfileLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyProfile",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyProfile",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyProfileLogGroup"
      ]
    },
    "GetMyMedicalRecordsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyMedicalRecords",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyMedicalRecords",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyMedicalRecordsLogGroup"
      ]
    },
    "GetMyPrescriptionsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyPrescriptions",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyPrescriptions",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyPrescriptionsLogGroup"
      ]
    },
    "GetMyVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyVitalSigns",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyVitalSignsLogGroup"
      ]
    },
    "CreateVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/vitalSigns.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateVitalSignsLogGroup"
      ]
    },
    "GetVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/vitalSigns.getByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetVitalSignsLogGroup"
      ]
    },
    "GetLatestVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/vitalSigns.getLatest",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getLatestVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetLatestVitalSignsLogGroup"
      ]
    },
    "CreateMedicalRecordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createMedicalRecord",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateMedicalRecordLogGroup"
      ]
    },
    "GetMedicalRecordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.getById",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMedicalRecord",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMedicalRecordLogGroup"
      ]
    },
    "GetMedicalRecordsByPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.getByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMedicalRecordsByPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMedicalRecordsByPatientLogGroup"
      ]
    },
    "UpdateMedicalRecordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.update",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-updateMedicalRecord",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateMedicalRecordLogGroup"
      ]
    },
    "CreatePrescriptionLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/prescriptions.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createPrescription",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreatePrescriptionLogGroup"
      ]
    },
    "GetPrescriptionLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/prescriptions.getById",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getPrescription",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPrescriptionLogGroup"
      ]
    },
    "GetPrescriptionsByPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/prescriptions.getByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getPrescriptionsByPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPrescriptionsByPatientLogGroup"
      ]
    },
    "GetAuditLogsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766740800529-2025-12-26T09:20:00.529Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auditLogs.getLogs",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getAuditLogs",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetAuditLogsLogGroup"
      ]
    },
    "WebauthnRegisterStartLambdaVersion17aYTIBzIkQXyYVu715OOkR5MgM4Ei7pWx3RMd36mdA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnRegisterStartLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "WebauthnRegisterFinishLambdaVersionpVoKHOYzWSyTcvfZSIfFLCPwspuUS0W0VkfY6wIn4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnRegisterFinishLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "WebauthnAuthStartLambdaVersion172J9MpmAB6B0wfumBEg2uMzHFVTpplVX7LSoaEF64": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnAuthStartLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "WebauthnAuthFinishLambdaVersionwpTSKVlnlTTQt0WLMyFrEMYI3btPgbyroFQDEYcz2sE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnAuthFinishLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "WebauthnGetCredentialsLambdaVersionMlyZ8MtC6ieRZNAhyI1vg3lnJNgj44nob2lIP9g": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnGetCredentialsLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "WebauthnDeleteCredentialLambdaVersionyBTGvTlZOJPsDDrSqPC4XEqHSCrOgBoyvCPKUcizRo": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnDeleteCredentialLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "LoginLambdaVersionVl5v9NieP5G5L1iT7mBydoRaoJPK0iNh9uMq6HwHU": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "LoginLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "ChangePasswordLambdaVersionxQf9CrBJUdhmhC8ilOto39HdURbt7ntyYxk2aksck8": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ChangePasswordLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "RefreshTokenLambdaVersionTNaY634SWtk43KbejB1rC2luFZu0B5ZcsFbOzOK7k": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RefreshTokenLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "InitMFALambdaVersionlNdNJcg58OxXKTmOmAdpAzQH3wa5CyB8hvatMWeiOM8": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "InitMFALambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "VerifyMFALambdaVersionwJAW7aSHUGfj70bwDhHW9iKPuwEhH81HDfBBZSa4GBA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "VerifyMFALambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetMFAStatusLambdaVersion4LSxcYgrTHerdVCqL6SNDAMB5cwcxG1opLKYLujcU": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMFAStatusLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "CreateUserLambdaVersionSmzZWsu3ePS9Vr7CVEta2VIsJsdFARZPsXl9EEF4HoM": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateUserLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "ListUsersLambdaVersionURa3TZwMAKUzjuvQftPexdUby0Yr5h2KHvn491C2mA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListUsersLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "DisableUserLambdaVersionP65wXkOB4aXLHnVvMhYaNDiPDRK1DpcAm2fXKkI4DpQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "DisableUserLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "ResetUserPasswordLambdaVersionhiTjV9lREwNCRMYOtA7VEXKHwuzTlKUnJrjlESoOs": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ResetUserPasswordLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "CreatePatientLambdaVersionxkcjXIhAqlKtppQZ212Pr79fgqTWDVI63xsUPcQ3pzo": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreatePatientLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetPatientLambdaVersionX5cfqSIVit2d9Oz6isPIEzcGrSCYrCSgR627hPRuY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPatientLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "SearchPatientsLambdaVersion098g2PBmDMmPUiQj4jmjg1Xyz4vOpCHM9bNDISYHok": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "SearchPatientsLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "UpdatePatientLambdaVersion8U274DRpRaUWjcBgXj8Nf6uebr7BRPt4XQrpf89soQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdatePatientLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetMyProfileLambdaVersionpBQdeydqtr17kQWDkdGjTCit6Wh4pLtGQcM5hKQs0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyProfileLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetMyMedicalRecordsLambdaVersionFxcfNohBKdiwSi2VvVNyLUOUSrGsXtXA9ua8NFn3Uw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyMedicalRecordsLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetMyPrescriptionsLambdaVersion5JLVEtsZ70DBTDOTcVtzcRGa3vKMNHIyIdWyxlmVr4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyPrescriptionsLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetMyVitalSignsLambdaVersion02kT6aLDD1DSss2ycGJYaTPpMdVbYGpHMUzLGXjdI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyVitalSignsLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "CreateVitalSignsLambdaVersionq3oiKr7ucKn7e8RITOWX65CUHNEsp1orGjfYhvI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateVitalSignsLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetVitalSignsLambdaVersionDxIaLERLfBp8zIKUODgtkRfwMoKhOtnJcrPzKsKkvk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetVitalSignsLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetLatestVitalSignsLambdaVersionE2a1mbkIQr0rfL5KqFTMM6IZbYGBSbgkibHELR2oI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetLatestVitalSignsLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "CreateMedicalRecordLambdaVersionFJmQvfhCLBw8WEGH5jRZ8dDBGiLz6RyCHfEmKlVGB4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateMedicalRecordLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetMedicalRecordLambdaVersionPaWtYuaMdfEoqY2wbvjfWp7bIxjn2yrf6AtTPB6u6tE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMedicalRecordLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetMedicalRecordsByPatientLambdaVersionICX630xouRTO6pymkKAnkj8yiTYUrdfuiaQCKprnrU": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMedicalRecordsByPatientLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "UpdateMedicalRecordLambdaVersionbWNCvm7Uw1LedjLKcONGOHGvJWm1lhLF8qvAaUTDg4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateMedicalRecordLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "CreatePrescriptionLambdaVersionTHcN5TwarGdPBWDh54onkmosAPp5PS4UeiY6XCz8ag": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreatePrescriptionLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetPrescriptionLambdaVersionA86WZW9qOOyo13MPgpMxllpWdCo7ioXPENrh1dVmGI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPrescriptionLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetPrescriptionsByPatientLambdaVersionrdGgLfQF0nbEyy03otoAtqQW1SlS33kni9m3fmM6x4E": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPrescriptionsByPatientLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "GetAuditLogsLambdaVersionZZJH4Go7uwkHfe52DTkZIZjLDfHfx3vame85Rpv1w": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetAuditLogsLambdaFunction"
        },
        "CodeSha256": "kReuAszxDZKzakSJnDC2GJAwY/Pt3Uq7i4D1GlHw3QE="
      }
    },
    "HttpApi": {
      "Type": "AWS::ApiGatewayV2::Api",
      "Properties": {
        "Name": "dev-ehr-backend-api",
        "ProtocolType": "HTTP",
        "CorsConfiguration": {
          "AllowHeaders": [
            "Content-Type",
            "Authorization"
          ],
          "AllowMethods": [
            "GET",
            "POST",
            "PUT",
            "DELETE",
            "OPTIONS"
          ],
          "AllowOrigins": [
            "*"
          ]
        }
      }
    },
    "HttpApiStage": {
      "Type": "AWS::ApiGatewayV2::Stage",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "StageName": "$default",
        "AutoDeploy": true,
        "DefaultRouteSettings": {
          "DetailedMetricsEnabled": false
        }
      }
    },
    "WebauthnRegisterStartLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnRegisterStartLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnRegisterStart": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnRegisterStartLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnRegisterStart": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/register/start",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnRegisterStart"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnRegisterStart"
    },
    "WebauthnRegisterFinishLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnRegisterFinishLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnRegisterFinish": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnRegisterFinishLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnRegisterFinish": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/register/finish",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnRegisterFinish"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnRegisterFinish"
    },
    "WebauthnAuthStartLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnAuthStartLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnAuthStart": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnAuthStartLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnAuthStart": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/auth/start",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnAuthStart"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnAuthStart"
    },
    "WebauthnAuthFinishLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnAuthFinishLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnAuthFinish": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnAuthFinishLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnAuthFinish": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/auth/finish",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnAuthFinish"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnAuthFinish"
    },
    "WebauthnGetCredentialsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnGetCredentialsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnGetCredentials": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnGetCredentialsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetWebauthnCredentials": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /webauthn/credentials",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnGetCredentials"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnGetCredentials"
    },
    "WebauthnDeleteCredentialLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnDeleteCredentialLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnDeleteCredential": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnDeleteCredentialLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteDeleteWebauthnCredentialsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "DELETE /webauthn/credentials/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnDeleteCredential"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnDeleteCredential"
    },
    "LoginLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "LoginLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationLogin": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "LoginLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthLogin": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/login",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationLogin"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationLogin"
    },
    "ChangePasswordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ChangePasswordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationChangePassword": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ChangePasswordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthChangeDashpassword": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/change-password",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationChangePassword"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationChangePassword"
    },
    "RefreshTokenLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RefreshTokenLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationRefreshToken": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "RefreshTokenLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthRefresh": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/refresh",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationRefreshToken"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationRefreshToken"
    },
    "InitMFALambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "InitMFALambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationInitMFA": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "InitMFALambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostMfaInit": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /mfa/init",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationInitMFA"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationInitMFA"
    },
    "VerifyMFALambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "VerifyMFALambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationVerifyMFA": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "VerifyMFALambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostMfaVerify": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /mfa/verify",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationVerifyMFA"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationVerifyMFA"
    },
    "GetMFAStatusLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMFAStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMFAStatus": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMFAStatusLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMfaStatusUseridVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /mfa/status/{userId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMFAStatus"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMFAStatus"
    },
    "CreateUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostUsers": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /users",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateUser"
    },
    "ListUsersLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListUsersLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationListUsers": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ListUsersLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetUsers": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /users",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationListUsers"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationListUsers"
    },
    "DisableUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "DisableUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationDisableUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "DisableUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutUsersIdVarDisable": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /users/{id}/disable",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationDisableUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationDisableUser"
    },
    "ResetUserPasswordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ResetUserPasswordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationResetUserPassword": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ResetUserPasswordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostUsersIdVarResetDashpassword": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /users/{id}/reset-password",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationResetUserPassword"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationResetUserPassword"
    },
    "CreatePatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreatePatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreatePatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreatePatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostPatients": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /patients",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreatePatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreatePatient"
    },
    "GetPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patients/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPatient"
    },
    "SearchPatientsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "SearchPatientsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationSearchPatients": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "SearchPatientsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientsSearch": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patients/search",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationSearchPatients"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationSearchPatients"
    },
    "UpdatePatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdatePatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdatePatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdatePatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutPatientsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /patients/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdatePatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdatePatient"
    },
    "GetMyProfileLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyProfileLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyProfile": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyProfileLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patients/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyProfile"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyProfile"
    },
    "GetMyMedicalRecordsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyMedicalRecordsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyMedicalRecords": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyMedicalRecordsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMedicalDashrecordsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /medical-records/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyMedicalRecords"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyMedicalRecords"
    },
    "GetMyPrescriptionsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyPrescriptionsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyPrescriptions": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyPrescriptionsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPrescriptionsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /prescriptions/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyPrescriptions"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyPrescriptions"
    },
    "GetMyVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetVitalDashsignsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /vital-signs/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyVitalSigns"
    },
    "CreateVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostVitalDashsigns": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /vital-signs",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateVitalSigns"
    },
    "GetVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetVitalDashsignsPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /vital-signs/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetVitalSigns"
    },
    "GetLatestVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetLatestVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetLatestVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetLatestVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetVitalDashsignsPatientPatientidVarLatest": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /vital-signs/patient/{patientId}/latest",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetLatestVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetLatestVitalSigns"
    },
    "CreateMedicalRecordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateMedicalRecord": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostMedicalDashrecords": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /medical-records",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateMedicalRecord"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateMedicalRecord"
    },
    "GetMedicalRecordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMedicalRecord": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMedicalDashrecordsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /medical-records/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMedicalRecord"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMedicalRecord"
    },
    "GetMedicalRecordsByPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMedicalRecordsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMedicalRecordsByPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMedicalRecordsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMedicalDashrecordsPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /medical-records/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMedicalRecordsByPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMedicalRecordsByPatient"
    },
    "UpdateMedicalRecordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdateMedicalRecord": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutMedicalDashrecordsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /medical-records/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdateMedicalRecord"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdateMedicalRecord"
    },
    "CreatePrescriptionLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreatePrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreatePrescription": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreatePrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostPrescriptions": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /prescriptions",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreatePrescription"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreatePrescription"
    },
    "GetPrescriptionLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPrescription": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPrescriptionsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /prescriptions/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPrescription"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPrescription"
    },
    "GetPrescriptionsByPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPrescriptionsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPrescriptionsByPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPrescriptionsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPrescriptionsPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /prescriptions/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPrescriptionsByPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPrescriptionsByPatient"
    },
    "GetAuditLogsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetAuditLogsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetAuditLogs": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetAuditLogsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetAuditDashlogs": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /audit-logs",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetAuditLogs"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetAuditLogs"
    }
  },
  "Outputs": {
    "ServerlessDeploymentBucketName": {
      "Value": {
        "Ref": "ServerlessDeploymentBucket"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ServerlessDeploymentBucketName"
      }
    },
    "WebauthnRegisterStartLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnRegisterStartLambdaVersion17aYTIBzIkQXyYVu715OOkR5MgM4Ei7pWx3RMd36mdA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnRegisterStartLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnRegisterFinishLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnRegisterFinishLambdaVersionpVoKHOYzWSyTcvfZSIfFLCPwspuUS0W0VkfY6wIn4"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnRegisterFinishLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnAuthStartLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnAuthStartLambdaVersion172J9MpmAB6B0wfumBEg2uMzHFVTpplVX7LSoaEF64"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnAuthStartLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnAuthFinishLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnAuthFinishLambdaVersionwpTSKVlnlTTQt0WLMyFrEMYI3btPgbyroFQDEYcz2sE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnAuthFinishLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnGetCredentialsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnGetCredentialsLambdaVersionMlyZ8MtC6ieRZNAhyI1vg3lnJNgj44nob2lIP9g"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnGetCredentialsLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnDeleteCredentialLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnDeleteCredentialLambdaVersionyBTGvTlZOJPsDDrSqPC4XEqHSCrOgBoyvCPKUcizRo"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnDeleteCredentialLambdaFunctionQualifiedArn"
      }
    },
    "LoginLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "LoginLambdaVersionVl5v9NieP5G5L1iT7mBydoRaoJPK0iNh9uMq6HwHU"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-LoginLambdaFunctionQualifiedArn"
      }
    },
    "ChangePasswordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ChangePasswordLambdaVersionxQf9CrBJUdhmhC8ilOto39HdURbt7ntyYxk2aksck8"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ChangePasswordLambdaFunctionQualifiedArn"
      }
    },
    "RefreshTokenLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RefreshTokenLambdaVersionTNaY634SWtk43KbejB1rC2luFZu0B5ZcsFbOzOK7k"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-RefreshTokenLambdaFunctionQualifiedArn"
      }
    },
    "InitMFALambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "InitMFALambdaVersionlNdNJcg58OxXKTmOmAdpAzQH3wa5CyB8hvatMWeiOM8"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-InitMFALambdaFunctionQualifiedArn"
      }
    },
    "VerifyMFALambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "VerifyMFALambdaVersionwJAW7aSHUGfj70bwDhHW9iKPuwEhH81HDfBBZSa4GBA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-VerifyMFALambdaFunctionQualifiedArn"
      }
    },
    "GetMFAStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMFAStatusLambdaVersion4LSxcYgrTHerdVCqL6SNDAMB5cwcxG1opLKYLujcU"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMFAStatusLambdaFunctionQualifiedArn"
      }
    },
    "CreateUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateUserLambdaVersionSmzZWsu3ePS9Vr7CVEta2VIsJsdFARZPsXl9EEF4HoM"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreateUserLambdaFunctionQualifiedArn"
      }
    },
    "ListUsersLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListUsersLambdaVersionURa3TZwMAKUzjuvQftPexdUby0Yr5h2KHvn491C2mA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ListUsersLambdaFunctionQualifiedArn"
      }
    },
    "DisableUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "DisableUserLambdaVersionP65wXkOB4aXLHnVvMhYaNDiPDRK1DpcAm2fXKkI4DpQ"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-DisableUserLambdaFunctionQualifiedArn"
      }
    },
    "ResetUserPasswordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ResetUserPasswordLambdaVersionhiTjV9lREwNCRMYOtA7VEXKHwuzTlKUnJrjlESoOs"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ResetUserPasswordLambdaFunctionQualifiedArn"
      }
    },
    "CreatePatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreatePatientLambdaVersionxkcjXIhAqlKtppQZ212Pr79fgqTWDVI63xsUPcQ3pzo"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreatePatientLambdaFunctionQualifiedArn"
      }
    },
    "GetPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPatientLambdaVersionX5cfqSIVit2d9Oz6isPIEzcGrSCYrCSgR627hPRuY"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetPatientLambdaFunctionQualifiedArn"
      }
    },
    "SearchPatientsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "SearchPatientsLambdaVersion098g2PBmDMmPUiQj4jmjg1Xyz4vOpCHM9bNDISYHok"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-SearchPatientsLambdaFunctionQualifiedArn"
      }
    },
    "UpdatePatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdatePatientLambdaVersion8U274DRpRaUWjcBgXj8Nf6uebr7BRPt4XQrpf89soQ"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-UpdatePatientLambdaFunctionQualifiedArn"
      }
    },
    "GetMyProfileLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyProfileLambdaVersionpBQdeydqtr17kQWDkdGjTCit6Wh4pLtGQcM5hKQs0"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyProfileLambdaFunctionQualifiedArn"
      }
    },
    "GetMyMedicalRecordsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyMedicalRecordsLambdaVersionFxcfNohBKdiwSi2VvVNyLUOUSrGsXtXA9ua8NFn3Uw"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyMedicalRecordsLambdaFunctionQualifiedArn"
      }
    },
    "GetMyPrescriptionsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyPrescriptionsLambdaVersion5JLVEtsZ70DBTDOTcVtzcRGa3vKMNHIyIdWyxlmVr4"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyPrescriptionsLambdaFunctionQualifiedArn"
      }
    },
    "GetMyVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyVitalSignsLambdaVersion02kT6aLDD1DSss2ycGJYaTPpMdVbYGpHMUzLGXjdI"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "CreateVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateVitalSignsLambdaVersionq3oiKr7ucKn7e8RITOWX65CUHNEsp1orGjfYhvI"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreateVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "GetVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetVitalSignsLambdaVersionDxIaLERLfBp8zIKUODgtkRfwMoKhOtnJcrPzKsKkvk"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "GetLatestVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetLatestVitalSignsLambdaVersionE2a1mbkIQr0rfL5KqFTMM6IZbYGBSbgkibHELR2oI"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetLatestVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "CreateMedicalRecordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateMedicalRecordLambdaVersionFJmQvfhCLBw8WEGH5jRZ8dDBGiLz6RyCHfEmKlVGB4"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreateMedicalRecordLambdaFunctionQualifiedArn"
      }
    },
    "GetMedicalRecordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMedicalRecordLambdaVersionPaWtYuaMdfEoqY2wbvjfWp7bIxjn2yrf6AtTPB6u6tE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMedicalRecordLambdaFunctionQualifiedArn"
      }
    },
    "GetMedicalRecordsByPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMedicalRecordsByPatientLambdaVersionICX630xouRTO6pymkKAnkj8yiTYUrdfuiaQCKprnrU"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMedicalRecordsByPatientLambdaFunctionQualifiedArn"
      }
    },
    "UpdateMedicalRecordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateMedicalRecordLambdaVersionbWNCvm7Uw1LedjLKcONGOHGvJWm1lhLF8qvAaUTDg4"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-UpdateMedicalRecordLambdaFunctionQualifiedArn"
      }
    },
    "CreatePrescriptionLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreatePrescriptionLambdaVersionTHcN5TwarGdPBWDh54onkmosAPp5PS4UeiY6XCz8ag"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreatePrescriptionLambdaFunctionQualifiedArn"
      }
    },
    "GetPrescriptionLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPrescriptionLambdaVersionA86WZW9qOOyo13MPgpMxllpWdCo7ioXPENrh1dVmGI"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetPrescriptionLambdaFunctionQualifiedArn"
      }
    },
    "GetPrescriptionsByPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPrescriptionsByPatientLambdaVersionrdGgLfQF0nbEyy03otoAtqQW1SlS33kni9m3fmM6x4E"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetPrescriptionsByPatientLambdaFunctionQualifiedArn"
      }
    },
    "GetAuditLogsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetAuditLogsLambdaVersionZZJH4Go7uwkHfe52DTkZIZjLDfHfx3vame85Rpv1w"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetAuditLogsLambdaFunctionQualifiedArn"
      }
    },
    "HttpApiId": {
      "Description": "Id of the HTTP API",
      "Value": {
        "Ref": "HttpApi"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-HttpApiId"
      }
    },
    "HttpApiUrl": {
      "Description": "URL of the HTTP API",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "HttpApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            }
          ]
        ]
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-HttpApiUrl"
      }
    }
  }
}