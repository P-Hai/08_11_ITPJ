{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "The AWS CloudFormation template for this Serverless application",
  "Resources": {
    "ServerlessDeploymentBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        }
      }
    },
    "ServerlessDeploymentBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "ServerlessDeploymentBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Effect": "Deny",
              "Principal": "*",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      },
                      "/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      }
                    ]
                  ]
                }
              ],
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": false
                }
              }
            }
          ]
        }
      }
    },
    "WebauthnRegisterStartLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnRegisterStart"
      }
    },
    "WebauthnRegisterFinishLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnRegisterFinish"
      }
    },
    "WebauthnAuthStartLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnAuthStart"
      }
    },
    "WebauthnAuthFinishLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnAuthFinish"
      }
    },
    "WebauthnGetCredentialsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnGetCredentials"
      }
    },
    "WebauthnDeleteCredentialLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnDeleteCredential"
      }
    },
    "LoginLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-login"
      }
    },
    "ChangePasswordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-changePassword"
      }
    },
    "RefreshTokenLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-refreshToken"
      }
    },
    "InitMFALogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-initMFA"
      }
    },
    "VerifyMFALogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-verifyMFA"
      }
    },
    "GetMFAStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMFAStatus"
      }
    },
    "CreateUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createUser"
      }
    },
    "ListUsersLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-listUsers"
      }
    },
    "DisableUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-disableUser"
      }
    },
    "ResetUserPasswordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-resetUserPassword"
      }
    },
    "CreatePatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPatient"
      }
    },
    "GetPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPatient"
      }
    },
    "SearchPatientsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-searchPatients"
      }
    },
    "UpdatePatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updatePatient"
      }
    },
    "GetMyProfileLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyProfile"
      }
    },
    "GetMyMedicalRecordsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyMedicalRecords"
      }
    },
    "GetMyPrescriptionsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyPrescriptions"
      }
    },
    "GetMyVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyVitalSigns"
      }
    },
    "CreateVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createVitalSigns"
      }
    },
    "GetVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getVitalSigns"
      }
    },
    "GetLatestVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getLatestVitalSigns"
      }
    },
    "CreateMedicalRecordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createMedicalRecord"
      }
    },
    "GetMedicalRecordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecord"
      }
    },
    "GetMedicalRecordsByPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecordsByPatient"
      }
    },
    "UpdateMedicalRecordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updateMedicalRecord"
      }
    },
    "CreatePrescriptionLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPrescription"
      }
    },
    "GetPrescriptionLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescription"
      }
    },
    "GetPrescriptionsByPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescriptionsByPatient"
      }
    },
    "GetAuditLogsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getAuditLogs"
      }
    },
    "IamRoleLambdaExecution": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "lambda.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Join": [
                "-",
                [
                  "ehr-backend-api",
                  "dev",
                  "lambda"
                ]
              ]
            },
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:CreateLogGroup",
                    "logs:TagResource"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:PutLogEvents"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "ses:SendEmail",
                    "ses:SendRawEmail"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "cognito-idp:AdminGetUser",
                    "cognito-idp:ListUsers",
                    "cognito-idp:AdminCreateUser",
                    "cognito-idp:AdminAddUserToGroup",
                    "cognito-idp:AdminDisableUser",
                    "cognito-idp:AdminSetUserPassword",
                    "cognito-idp:AdminInitiateAuth",
                    "cognito-idp:AdminRespondToAuthChallenge",
                    "cognito-idp:AdminListGroupsForUser"
                  ],
                  "Resource": "arn:aws:cognito-idp:ap-southeast-1:*:userpool/ap-southeast-1_KAphl41fW"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "secretsmanager:GetSecretValue"
                  ],
                  "Resource": "arn:aws:secretsmanager:ap-southeast-1:*:secret:ehr-system/*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents"
                  ],
                  "Resource": "*"
                }
              ]
            }
          }
        ],
        "Path": "/",
        "RoleName": {
          "Fn::Join": [
            "-",
            [
              "ehr-backend-api",
              "dev",
              {
                "Ref": "AWS::Region"
              },
              "lambdaRole"
            ]
          ]
        }
      }
    },
    "WebauthnRegisterStartLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.startRegistration",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnRegisterStart",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnRegisterStartLogGroup"
      ]
    },
    "WebauthnRegisterFinishLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.finishRegistration",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnRegisterFinish",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnRegisterFinishLogGroup"
      ]
    },
    "WebauthnAuthStartLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.startAuthentication",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnAuthStart",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnAuthStartLogGroup"
      ]
    },
    "WebauthnAuthFinishLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.finishAuthentication",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnAuthFinish",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnAuthFinishLogGroup"
      ]
    },
    "WebauthnGetCredentialsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.getCredentials",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnGetCredentials",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnGetCredentialsLogGroup"
      ]
    },
    "WebauthnDeleteCredentialLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.deleteCredential",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnDeleteCredential",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnDeleteCredentialLogGroup"
      ]
    },
    "LoginLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auth.login",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-login",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "LoginLogGroup"
      ]
    },
    "ChangePasswordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auth.changePassword",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-changePassword",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ChangePasswordLogGroup"
      ]
    },
    "RefreshTokenLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auth.refreshToken",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-refreshToken",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RefreshTokenLogGroup"
      ]
    },
    "InitMFALambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/mfa.initMFA",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-initMFA",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "InitMFALogGroup"
      ]
    },
    "VerifyMFALambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/mfa.verifyMFA",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-verifyMFA",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "VerifyMFALogGroup"
      ]
    },
    "GetMFAStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/mfa.getMFAStatus",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMFAStatus",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMFAStatusLogGroup"
      ]
    },
    "CreateUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.createUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createUser",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateUserLogGroup"
      ]
    },
    "ListUsersLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.listUsers",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-listUsers",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListUsersLogGroup"
      ]
    },
    "DisableUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.disableUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-disableUser",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "DisableUserLogGroup"
      ]
    },
    "ResetUserPasswordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.resetPassword",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-resetUserPassword",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ResetUserPasswordLogGroup"
      ]
    },
    "CreatePatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreatePatientLogGroup"
      ]
    },
    "GetPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.getById",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPatientLogGroup"
      ]
    },
    "SearchPatientsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.search",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-searchPatients",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "SearchPatientsLogGroup"
      ]
    },
    "UpdatePatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.update",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-updatePatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdatePatientLogGroup"
      ]
    },
    "GetMyProfileLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyProfile",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyProfile",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyProfileLogGroup"
      ]
    },
    "GetMyMedicalRecordsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyMedicalRecords",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyMedicalRecords",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyMedicalRecordsLogGroup"
      ]
    },
    "GetMyPrescriptionsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyPrescriptions",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyPrescriptions",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyPrescriptionsLogGroup"
      ]
    },
    "GetMyVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyVitalSigns",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyVitalSignsLogGroup"
      ]
    },
    "CreateVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/vitalSigns.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateVitalSignsLogGroup"
      ]
    },
    "GetVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/vitalSigns.getByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetVitalSignsLogGroup"
      ]
    },
    "GetLatestVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/vitalSigns.getLatest",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getLatestVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetLatestVitalSignsLogGroup"
      ]
    },
    "CreateMedicalRecordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createMedicalRecord",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateMedicalRecordLogGroup"
      ]
    },
    "GetMedicalRecordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.getById",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMedicalRecord",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMedicalRecordLogGroup"
      ]
    },
    "GetMedicalRecordsByPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.getByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMedicalRecordsByPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMedicalRecordsByPatientLogGroup"
      ]
    },
    "UpdateMedicalRecordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.update",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-updateMedicalRecord",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateMedicalRecordLogGroup"
      ]
    },
    "CreatePrescriptionLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/prescriptions.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createPrescription",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreatePrescriptionLogGroup"
      ]
    },
    "GetPrescriptionLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/prescriptions.getById",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getPrescription",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPrescriptionLogGroup"
      ]
    },
    "GetPrescriptionsByPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/prescriptions.getByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getPrescriptionsByPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPrescriptionsByPatientLogGroup"
      ]
    },
    "GetAuditLogsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1766752949897-2025-12-26T12:42:29.897Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auditLogs.getLogs",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getAuditLogs",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "DB_SSL": "true"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetAuditLogsLogGroup"
      ]
    },
    "WebauthnRegisterStartLambdaVersionxABSuTX3S5yadE7Vf7xu9bftpnASaA2gm2Nd2MRE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnRegisterStartLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "WebauthnRegisterFinishLambdaVersiony6OwplOdF6ViQMo4pQFCl2o2dLGmWLqYgDH4VSzy9g": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnRegisterFinishLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "WebauthnAuthStartLambdaVersionhXVosw04xlaLupS5f0fh3qyDdg7kHBV1NSvmsWYHYFk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnAuthStartLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "WebauthnAuthFinishLambdaVersion1eDjjcI6nkiEeTiVIeJCOZ6eKBWdbyVkTYxzDH1GTyA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnAuthFinishLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "WebauthnGetCredentialsLambdaVersion4c0Yi17SFzvMdRpP8ZrbFmGeGbnBi31T78ROStt6ds": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnGetCredentialsLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "WebauthnDeleteCredentialLambdaVersionGPhxxtVI4CCz5WSGZmuDcbNL1IakmuPpzEa9BF1a6c": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnDeleteCredentialLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "LoginLambdaVersionvhnS4Ktb4ZKhxStle2UMQLvWBgVtg8nWTfqoc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "LoginLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "ChangePasswordLambdaVersionZdAVvoswSY2rnoUeXwU45Wg38M6KX7tWIqFpreeuEw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ChangePasswordLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "RefreshTokenLambdaVersionEzsBzAzL7I7o3Dogrbd6LyRBgmWqDPbq6Bbf0qhAuY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RefreshTokenLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "InitMFALambdaVersionZbUoNUwQwVSzGhKKUFfRJIOFE3ujzZv6vgtH5zbMw": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "InitMFALambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "VerifyMFALambdaVersionVuJnKkljQSxgwirVFNaIjWhaqphm3SzCYoZxdUT1c": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "VerifyMFALambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetMFAStatusLambdaVersiontI0JRyn8SBqxcy32i48h2AFw3qfXLyyksrmOv4ODtA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMFAStatusLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "CreateUserLambdaVersionkIdzrJBJbU97N6NAZF95Z576BupLiz66w26zjWUrm0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateUserLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "ListUsersLambdaVersioncoeV702TcFG5LvxCslzHhhSbDNNDFgwbHufbGvJifg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListUsersLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "DisableUserLambdaVersion2VGBpOvKIpf4zWb3r3UrvbrmEuZ8XwmSK3haCXUQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "DisableUserLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "ResetUserPasswordLambdaVersionpOYmEF3ToM8qDlSAjDTka2kU2j8ewlnlE7VaiKqY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ResetUserPasswordLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "CreatePatientLambdaVersionlhTRbkf2xe9ls0wgWszCdLzRLEVJVd2hqBTANvJznhI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreatePatientLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetPatientLambdaVersionEzFfOXA0JLRb1rZTut9Gg3ASMHAl0W4d8zEFl2FDE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPatientLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "SearchPatientsLambdaVersiongVCa7buFfbpLjHv4QU1e9bWPkP9AtUCEhjv1mzR3Q": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "SearchPatientsLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "UpdatePatientLambdaVersionhByRLZFhqzQZb9mj8mPdjIDTbXyWVISTK4UHsDFUPU": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdatePatientLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetMyProfileLambdaVersionPAj02FFpeWeMjyRhScNvzilZgXkt5HdwwGwtDIIhI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyProfileLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetMyMedicalRecordsLambdaVersionwjg7fTf4YDPk71vSxx8MfQz8iLgtNqwWGwUvKN5e4A": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyMedicalRecordsLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetMyPrescriptionsLambdaVersionHreM1xPf6KjzYW962BiMlNEtXBj1bZuqGCKTj8dmE0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyPrescriptionsLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetMyVitalSignsLambdaVersionQSHAYperB7c4EonF7U82xXyyN0e5Kg8gNT09y2eSc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyVitalSignsLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "CreateVitalSignsLambdaVersionaI1Lgp4f2GuASVMCCelvxxwJ5KDYy8De48CU9Br2LU": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateVitalSignsLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetVitalSignsLambdaVersiont8DGXgeEJbhu8Z1K1qKny3J7ZI9VFVkhfJ0WM8mtJJk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetVitalSignsLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetLatestVitalSignsLambdaVersionJ7ORrxxVLSdZ3XkhGL3HSy8gE88nYgpxGeMLAVAuios": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetLatestVitalSignsLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "CreateMedicalRecordLambdaVersionBY6aDrGzIcvvIMkm8eYcOShKPwL1UYdrEM0QtnXo": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateMedicalRecordLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetMedicalRecordLambdaVersion1LDvDeEEhJOmLx8r72oDBa7nFEoFwYCi8EK6inTZA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMedicalRecordLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetMedicalRecordsByPatientLambdaVersionnpgsu2xf3kBzMgBtU5lJ2iMq81xl27IkcohYw1yjhPA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMedicalRecordsByPatientLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "UpdateMedicalRecordLambdaVersionfZpXdMszO3ZzGwX5bvMaOg2vojNhgXfl5O2JVlc0N8A": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateMedicalRecordLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "CreatePrescriptionLambdaVersionRQDfbBvSXK3NswiGi4hBnB5RUCP1Fm1BE1RJHApk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreatePrescriptionLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetPrescriptionLambdaVersion6SAKsZDQ8wqbVXbLbUfKbGuQHe1hGbEK0KctApDjk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPrescriptionLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetPrescriptionsByPatientLambdaVersion1F8Mmnkb9GwtghixlMZxjwiN3z6eWGd4SgjCmvlC0nI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPrescriptionsByPatientLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "GetAuditLogsLambdaVersionwerAyJL8YtILap3G6t2YuanoNK6ZcLzQqPJTILlKQQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetAuditLogsLambdaFunction"
        },
        "CodeSha256": "VChwsSxumhMy42g/coY6IlUR1ACjGNI9E8nZoRfx1Yc="
      }
    },
    "HttpApi": {
      "Type": "AWS::ApiGatewayV2::Api",
      "Properties": {
        "Name": "dev-ehr-backend-api",
        "ProtocolType": "HTTP",
        "CorsConfiguration": {
          "AllowHeaders": [
            "Content-Type",
            "Authorization"
          ],
          "AllowMethods": [
            "GET",
            "POST",
            "PUT",
            "DELETE",
            "OPTIONS"
          ],
          "AllowOrigins": [
            "*"
          ]
        }
      }
    },
    "HttpApiStage": {
      "Type": "AWS::ApiGatewayV2::Stage",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "StageName": "$default",
        "AutoDeploy": true,
        "DefaultRouteSettings": {
          "DetailedMetricsEnabled": false
        }
      }
    },
    "WebauthnRegisterStartLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnRegisterStartLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnRegisterStart": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnRegisterStartLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnRegisterStart": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/register/start",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnRegisterStart"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnRegisterStart"
    },
    "WebauthnRegisterFinishLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnRegisterFinishLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnRegisterFinish": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnRegisterFinishLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnRegisterFinish": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/register/finish",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnRegisterFinish"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnRegisterFinish"
    },
    "WebauthnAuthStartLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnAuthStartLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnAuthStart": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnAuthStartLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnAuthStart": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/auth/start",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnAuthStart"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnAuthStart"
    },
    "WebauthnAuthFinishLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnAuthFinishLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnAuthFinish": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnAuthFinishLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnAuthFinish": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/auth/finish",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnAuthFinish"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnAuthFinish"
    },
    "WebauthnGetCredentialsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnGetCredentialsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnGetCredentials": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnGetCredentialsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetWebauthnCredentials": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /webauthn/credentials",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnGetCredentials"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnGetCredentials"
    },
    "WebauthnDeleteCredentialLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnDeleteCredentialLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnDeleteCredential": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnDeleteCredentialLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteDeleteWebauthnCredentialsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "DELETE /webauthn/credentials/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnDeleteCredential"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnDeleteCredential"
    },
    "LoginLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "LoginLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationLogin": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "LoginLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthLogin": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/login",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationLogin"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationLogin"
    },
    "ChangePasswordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ChangePasswordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationChangePassword": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ChangePasswordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthChangeDashpassword": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/change-password",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationChangePassword"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationChangePassword"
    },
    "RefreshTokenLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RefreshTokenLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationRefreshToken": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "RefreshTokenLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthRefresh": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/refresh",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationRefreshToken"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationRefreshToken"
    },
    "InitMFALambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "InitMFALambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationInitMFA": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "InitMFALambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostMfaInit": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /mfa/init",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationInitMFA"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationInitMFA"
    },
    "VerifyMFALambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "VerifyMFALambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationVerifyMFA": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "VerifyMFALambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostMfaVerify": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /mfa/verify",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationVerifyMFA"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationVerifyMFA"
    },
    "GetMFAStatusLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMFAStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMFAStatus": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMFAStatusLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMfaStatusUseridVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /mfa/status/{userId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMFAStatus"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMFAStatus"
    },
    "CreateUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostUsers": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /users",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateUser"
    },
    "ListUsersLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListUsersLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationListUsers": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ListUsersLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetUsers": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /users",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationListUsers"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationListUsers"
    },
    "DisableUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "DisableUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationDisableUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "DisableUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutUsersIdVarDisable": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /users/{id}/disable",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationDisableUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationDisableUser"
    },
    "ResetUserPasswordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ResetUserPasswordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationResetUserPassword": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ResetUserPasswordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostUsersIdVarResetDashpassword": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /users/{id}/reset-password",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationResetUserPassword"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationResetUserPassword"
    },
    "CreatePatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreatePatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreatePatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreatePatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostPatients": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /patients",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreatePatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreatePatient"
    },
    "GetPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patients/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPatient"
    },
    "SearchPatientsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "SearchPatientsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationSearchPatients": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "SearchPatientsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientsSearch": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patients/search",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationSearchPatients"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationSearchPatients"
    },
    "UpdatePatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdatePatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdatePatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdatePatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutPatientsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /patients/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdatePatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdatePatient"
    },
    "GetMyProfileLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyProfileLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyProfile": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyProfileLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patients/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyProfile"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyProfile"
    },
    "GetMyMedicalRecordsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyMedicalRecordsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyMedicalRecords": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyMedicalRecordsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMedicalDashrecordsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /medical-records/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyMedicalRecords"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyMedicalRecords"
    },
    "GetMyPrescriptionsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyPrescriptionsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyPrescriptions": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyPrescriptionsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPrescriptionsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /prescriptions/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyPrescriptions"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyPrescriptions"
    },
    "GetMyVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetVitalDashsignsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /vital-signs/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyVitalSigns"
    },
    "CreateVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostVitalDashsigns": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /vital-signs",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateVitalSigns"
    },
    "GetVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetVitalDashsignsPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /vital-signs/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetVitalSigns"
    },
    "GetLatestVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetLatestVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetLatestVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetLatestVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetVitalDashsignsPatientPatientidVarLatest": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /vital-signs/patient/{patientId}/latest",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetLatestVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetLatestVitalSigns"
    },
    "CreateMedicalRecordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateMedicalRecord": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostMedicalDashrecords": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /medical-records",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateMedicalRecord"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateMedicalRecord"
    },
    "GetMedicalRecordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMedicalRecord": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMedicalDashrecordsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /medical-records/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMedicalRecord"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMedicalRecord"
    },
    "GetMedicalRecordsByPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMedicalRecordsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMedicalRecordsByPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMedicalRecordsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMedicalDashrecordsPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /medical-records/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMedicalRecordsByPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMedicalRecordsByPatient"
    },
    "UpdateMedicalRecordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdateMedicalRecord": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutMedicalDashrecordsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /medical-records/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdateMedicalRecord"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdateMedicalRecord"
    },
    "CreatePrescriptionLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreatePrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreatePrescription": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreatePrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostPrescriptions": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /prescriptions",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreatePrescription"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreatePrescription"
    },
    "GetPrescriptionLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPrescription": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPrescriptionsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /prescriptions/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPrescription"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPrescription"
    },
    "GetPrescriptionsByPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPrescriptionsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPrescriptionsByPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPrescriptionsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPrescriptionsPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /prescriptions/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPrescriptionsByPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPrescriptionsByPatient"
    },
    "GetAuditLogsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetAuditLogsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetAuditLogs": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetAuditLogsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetAuditDashlogs": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /audit-logs",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetAuditLogs"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetAuditLogs"
    }
  },
  "Outputs": {
    "ServerlessDeploymentBucketName": {
      "Value": {
        "Ref": "ServerlessDeploymentBucket"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ServerlessDeploymentBucketName"
      }
    },
    "WebauthnRegisterStartLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnRegisterStartLambdaVersionxABSuTX3S5yadE7Vf7xu9bftpnASaA2gm2Nd2MRE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnRegisterStartLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnRegisterFinishLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnRegisterFinishLambdaVersiony6OwplOdF6ViQMo4pQFCl2o2dLGmWLqYgDH4VSzy9g"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnRegisterFinishLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnAuthStartLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnAuthStartLambdaVersionhXVosw04xlaLupS5f0fh3qyDdg7kHBV1NSvmsWYHYFk"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnAuthStartLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnAuthFinishLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnAuthFinishLambdaVersion1eDjjcI6nkiEeTiVIeJCOZ6eKBWdbyVkTYxzDH1GTyA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnAuthFinishLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnGetCredentialsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnGetCredentialsLambdaVersion4c0Yi17SFzvMdRpP8ZrbFmGeGbnBi31T78ROStt6ds"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnGetCredentialsLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnDeleteCredentialLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnDeleteCredentialLambdaVersionGPhxxtVI4CCz5WSGZmuDcbNL1IakmuPpzEa9BF1a6c"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnDeleteCredentialLambdaFunctionQualifiedArn"
      }
    },
    "LoginLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "LoginLambdaVersionvhnS4Ktb4ZKhxStle2UMQLvWBgVtg8nWTfqoc"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-LoginLambdaFunctionQualifiedArn"
      }
    },
    "ChangePasswordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ChangePasswordLambdaVersionZdAVvoswSY2rnoUeXwU45Wg38M6KX7tWIqFpreeuEw"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ChangePasswordLambdaFunctionQualifiedArn"
      }
    },
    "RefreshTokenLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RefreshTokenLambdaVersionEzsBzAzL7I7o3Dogrbd6LyRBgmWqDPbq6Bbf0qhAuY"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-RefreshTokenLambdaFunctionQualifiedArn"
      }
    },
    "InitMFALambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "InitMFALambdaVersionZbUoNUwQwVSzGhKKUFfRJIOFE3ujzZv6vgtH5zbMw"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-InitMFALambdaFunctionQualifiedArn"
      }
    },
    "VerifyMFALambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "VerifyMFALambdaVersionVuJnKkljQSxgwirVFNaIjWhaqphm3SzCYoZxdUT1c"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-VerifyMFALambdaFunctionQualifiedArn"
      }
    },
    "GetMFAStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMFAStatusLambdaVersiontI0JRyn8SBqxcy32i48h2AFw3qfXLyyksrmOv4ODtA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMFAStatusLambdaFunctionQualifiedArn"
      }
    },
    "CreateUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateUserLambdaVersionkIdzrJBJbU97N6NAZF95Z576BupLiz66w26zjWUrm0"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreateUserLambdaFunctionQualifiedArn"
      }
    },
    "ListUsersLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListUsersLambdaVersioncoeV702TcFG5LvxCslzHhhSbDNNDFgwbHufbGvJifg"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ListUsersLambdaFunctionQualifiedArn"
      }
    },
    "DisableUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "DisableUserLambdaVersion2VGBpOvKIpf4zWb3r3UrvbrmEuZ8XwmSK3haCXUQ"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-DisableUserLambdaFunctionQualifiedArn"
      }
    },
    "ResetUserPasswordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ResetUserPasswordLambdaVersionpOYmEF3ToM8qDlSAjDTka2kU2j8ewlnlE7VaiKqY"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ResetUserPasswordLambdaFunctionQualifiedArn"
      }
    },
    "CreatePatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreatePatientLambdaVersionlhTRbkf2xe9ls0wgWszCdLzRLEVJVd2hqBTANvJznhI"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreatePatientLambdaFunctionQualifiedArn"
      }
    },
    "GetPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPatientLambdaVersionEzFfOXA0JLRb1rZTut9Gg3ASMHAl0W4d8zEFl2FDE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetPatientLambdaFunctionQualifiedArn"
      }
    },
    "SearchPatientsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "SearchPatientsLambdaVersiongVCa7buFfbpLjHv4QU1e9bWPkP9AtUCEhjv1mzR3Q"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-SearchPatientsLambdaFunctionQualifiedArn"
      }
    },
    "UpdatePatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdatePatientLambdaVersionhByRLZFhqzQZb9mj8mPdjIDTbXyWVISTK4UHsDFUPU"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-UpdatePatientLambdaFunctionQualifiedArn"
      }
    },
    "GetMyProfileLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyProfileLambdaVersionPAj02FFpeWeMjyRhScNvzilZgXkt5HdwwGwtDIIhI"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyProfileLambdaFunctionQualifiedArn"
      }
    },
    "GetMyMedicalRecordsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyMedicalRecordsLambdaVersionwjg7fTf4YDPk71vSxx8MfQz8iLgtNqwWGwUvKN5e4A"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyMedicalRecordsLambdaFunctionQualifiedArn"
      }
    },
    "GetMyPrescriptionsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyPrescriptionsLambdaVersionHreM1xPf6KjzYW962BiMlNEtXBj1bZuqGCKTj8dmE0"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyPrescriptionsLambdaFunctionQualifiedArn"
      }
    },
    "GetMyVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyVitalSignsLambdaVersionQSHAYperB7c4EonF7U82xXyyN0e5Kg8gNT09y2eSc"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "CreateVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateVitalSignsLambdaVersionaI1Lgp4f2GuASVMCCelvxxwJ5KDYy8De48CU9Br2LU"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreateVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "GetVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetVitalSignsLambdaVersiont8DGXgeEJbhu8Z1K1qKny3J7ZI9VFVkhfJ0WM8mtJJk"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "GetLatestVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetLatestVitalSignsLambdaVersionJ7ORrxxVLSdZ3XkhGL3HSy8gE88nYgpxGeMLAVAuios"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetLatestVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "CreateMedicalRecordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateMedicalRecordLambdaVersionBY6aDrGzIcvvIMkm8eYcOShKPwL1UYdrEM0QtnXo"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreateMedicalRecordLambdaFunctionQualifiedArn"
      }
    },
    "GetMedicalRecordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMedicalRecordLambdaVersion1LDvDeEEhJOmLx8r72oDBa7nFEoFwYCi8EK6inTZA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMedicalRecordLambdaFunctionQualifiedArn"
      }
    },
    "GetMedicalRecordsByPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMedicalRecordsByPatientLambdaVersionnpgsu2xf3kBzMgBtU5lJ2iMq81xl27IkcohYw1yjhPA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMedicalRecordsByPatientLambdaFunctionQualifiedArn"
      }
    },
    "UpdateMedicalRecordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateMedicalRecordLambdaVersionfZpXdMszO3ZzGwX5bvMaOg2vojNhgXfl5O2JVlc0N8A"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-UpdateMedicalRecordLambdaFunctionQualifiedArn"
      }
    },
    "CreatePrescriptionLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreatePrescriptionLambdaVersionRQDfbBvSXK3NswiGi4hBnB5RUCP1Fm1BE1RJHApk"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreatePrescriptionLambdaFunctionQualifiedArn"
      }
    },
    "GetPrescriptionLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPrescriptionLambdaVersion6SAKsZDQ8wqbVXbLbUfKbGuQHe1hGbEK0KctApDjk"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetPrescriptionLambdaFunctionQualifiedArn"
      }
    },
    "GetPrescriptionsByPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPrescriptionsByPatientLambdaVersion1F8Mmnkb9GwtghixlMZxjwiN3z6eWGd4SgjCmvlC0nI"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetPrescriptionsByPatientLambdaFunctionQualifiedArn"
      }
    },
    "GetAuditLogsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetAuditLogsLambdaVersionwerAyJL8YtILap3G6t2YuanoNK6ZcLzQqPJTILlKQQ"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetAuditLogsLambdaFunctionQualifiedArn"
      }
    },
    "HttpApiId": {
      "Description": "Id of the HTTP API",
      "Value": {
        "Ref": "HttpApi"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-HttpApiId"
      }
    },
    "HttpApiUrl": {
      "Description": "URL of the HTTP API",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "HttpApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            }
          ]
        ]
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-HttpApiUrl"
      }
    }
  }
}