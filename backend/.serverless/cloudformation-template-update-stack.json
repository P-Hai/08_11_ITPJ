{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "The AWS CloudFormation template for this Serverless application",
  "Resources": {
    "ServerlessDeploymentBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        }
      }
    },
    "ServerlessDeploymentBucketPolicy": {
      "Type": "AWS::S3::BucketPolicy",
      "Properties": {
        "Bucket": {
          "Ref": "ServerlessDeploymentBucket"
        },
        "PolicyDocument": {
          "Statement": [
            {
              "Action": "s3:*",
              "Effect": "Deny",
              "Principal": "*",
              "Resource": [
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      },
                      "/*"
                    ]
                  ]
                },
                {
                  "Fn::Join": [
                    "",
                    [
                      "arn:",
                      {
                        "Ref": "AWS::Partition"
                      },
                      ":s3:::",
                      {
                        "Ref": "ServerlessDeploymentBucket"
                      }
                    ]
                  ]
                }
              ],
              "Condition": {
                "Bool": {
                  "aws:SecureTransport": false
                }
              }
            }
          ]
        }
      }
    },
    "WebauthnRegisterStartLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnRegisterStart"
      }
    },
    "WebauthnRegisterFinishLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnRegisterFinish"
      }
    },
    "WebauthnAuthStartLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnAuthStart"
      }
    },
    "WebauthnAuthFinishLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnAuthFinish"
      }
    },
    "WebauthnGetCredentialsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnGetCredentials"
      }
    },
    "WebauthnDeleteCredentialLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-webauthnDeleteCredential"
      }
    },
    "LoginLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-login"
      }
    },
    "ChangePasswordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-changePassword"
      }
    },
    "RefreshTokenLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-refreshToken"
      }
    },
    "InitMFALogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-initMFA"
      }
    },
    "VerifyMFALogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-verifyMFA"
      }
    },
    "GetMFAStatusLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMFAStatus"
      }
    },
    "CreateUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createUser"
      }
    },
    "ListUsersLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-listUsers"
      }
    },
    "DisableUserLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-disableUser"
      }
    },
    "ResetUserPasswordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-resetUserPassword"
      }
    },
    "CreatePatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPatient"
      }
    },
    "GetPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPatient"
      }
    },
    "SearchPatientsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-searchPatients"
      }
    },
    "UpdatePatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updatePatient"
      }
    },
    "GetMyProfileLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyProfile"
      }
    },
    "GetMyMedicalRecordsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyMedicalRecords"
      }
    },
    "GetMyPrescriptionsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyPrescriptions"
      }
    },
    "GetMyVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMyVitalSigns"
      }
    },
    "CreateVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createVitalSigns"
      }
    },
    "GetVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getVitalSigns"
      }
    },
    "GetLatestVitalSignsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getLatestVitalSigns"
      }
    },
    "CreateMedicalRecordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createMedicalRecord"
      }
    },
    "GetMedicalRecordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecord"
      }
    },
    "GetMedicalRecordsByPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getMedicalRecordsByPatient"
      }
    },
    "UpdateMedicalRecordLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-updateMedicalRecord"
      }
    },
    "CreatePrescriptionLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-createPrescription"
      }
    },
    "GetPrescriptionLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescription"
      }
    },
    "GetPrescriptionsByPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getPrescriptionsByPatient"
      }
    },
    "GetAuditLogsLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getAuditLogs"
      }
    },
    "GetUploadUrlLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getUploadUrl"
      }
    },
    "SaveFileMetadataLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-saveFileMetadata"
      }
    },
    "GetFilesByPatientLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getFilesByPatient"
      }
    },
    "GetDownloadUrlLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-getDownloadUrl"
      }
    },
    "DeleteFileLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Properties": {
        "LogGroupName": "/aws/lambda/ehr-backend-api-dev-deleteFile"
      }
    },
    "IamRoleLambdaExecution": {
      "Type": "AWS::IAM::Role",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": [
                  "lambda.amazonaws.com"
                ]
              },
              "Action": [
                "sts:AssumeRole"
              ]
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": {
              "Fn::Join": [
                "-",
                [
                  "ehr-backend-api",
                  "dev",
                  "lambda"
                ]
              ]
            },
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:CreateLogGroup",
                    "logs:TagResource"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:PutLogEvents"
                  ],
                  "Resource": [
                    {
                      "Fn::Sub": "arn:${AWS::Partition}:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/lambda/ehr-backend-api-dev*:*:*"
                    }
                  ]
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "ses:SendEmail",
                    "ses:SendRawEmail"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "cognito-idp:AdminGetUser",
                    "cognito-idp:ListUsers",
                    "cognito-idp:AdminCreateUser",
                    "cognito-idp:AdminAddUserToGroup",
                    "cognito-idp:AdminDisableUser",
                    "cognito-idp:AdminSetUserPassword",
                    "cognito-idp:AdminInitiateAuth",
                    "cognito-idp:AdminRespondToAuthChallenge",
                    "cognito-idp:AdminListGroupsForUser"
                  ],
                  "Resource": "arn:aws:cognito-idp:ap-southeast-1:*:userpool/ap-southeast-1_KAphl41fW"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "secretsmanager:GetSecretValue"
                  ],
                  "Resource": "arn:aws:secretsmanager:ap-southeast-1:*:secret:ehr-system/*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents"
                  ],
                  "Resource": "*"
                },
                {
                  "Effect": "Allow",
                  "Action": [
                    "s3:PutObject",
                    "s3:GetObject",
                    "s3:DeleteObject",
                    "s3:ListBucket"
                  ],
                  "Resource": [
                    "arn:aws:s3:::ehr-backend-api-patient-files-dev",
                    "arn:aws:s3:::ehr-backend-api-patient-files-dev/*"
                  ]
                }
              ]
            }
          }
        ],
        "Path": "/",
        "RoleName": {
          "Fn::Join": [
            "-",
            [
              "ehr-backend-api",
              "dev",
              {
                "Ref": "AWS::Region"
              },
              "lambdaRole"
            ]
          ]
        }
      }
    },
    "WebauthnRegisterStartLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.startRegistration",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnRegisterStart",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnRegisterStartLogGroup"
      ]
    },
    "WebauthnRegisterFinishLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.finishRegistration",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnRegisterFinish",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnRegisterFinishLogGroup"
      ]
    },
    "WebauthnAuthStartLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.startAuthentication",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnAuthStart",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnAuthStartLogGroup"
      ]
    },
    "WebauthnAuthFinishLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.finishAuthentication",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnAuthFinish",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnAuthFinishLogGroup"
      ]
    },
    "WebauthnGetCredentialsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.getCredentials",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnGetCredentials",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnGetCredentialsLogGroup"
      ]
    },
    "WebauthnDeleteCredentialLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/webauthn.deleteCredential",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-webauthnDeleteCredential",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "WebauthnDeleteCredentialLogGroup"
      ]
    },
    "LoginLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auth.login",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-login",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "LoginLogGroup"
      ]
    },
    "ChangePasswordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auth.changePassword",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-changePassword",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ChangePasswordLogGroup"
      ]
    },
    "RefreshTokenLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auth.refreshToken",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-refreshToken",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "RefreshTokenLogGroup"
      ]
    },
    "InitMFALambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/mfa.initMFA",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-initMFA",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "InitMFALogGroup"
      ]
    },
    "VerifyMFALambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/mfa.verifyMFA",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-verifyMFA",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "VerifyMFALogGroup"
      ]
    },
    "GetMFAStatusLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/mfa.getMFAStatus",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMFAStatus",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMFAStatusLogGroup"
      ]
    },
    "CreateUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.createUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createUser",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateUserLogGroup"
      ]
    },
    "ListUsersLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.listUsers",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-listUsers",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ListUsersLogGroup"
      ]
    },
    "DisableUserLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.disableUser",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-disableUser",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "DisableUserLogGroup"
      ]
    },
    "ResetUserPasswordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/users.resetPassword",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-resetUserPassword",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "ResetUserPasswordLogGroup"
      ]
    },
    "CreatePatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreatePatientLogGroup"
      ]
    },
    "GetPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.getById",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPatientLogGroup"
      ]
    },
    "SearchPatientsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.search",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-searchPatients",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "SearchPatientsLogGroup"
      ]
    },
    "UpdatePatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patients.update",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-updatePatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdatePatientLogGroup"
      ]
    },
    "GetMyProfileLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyProfile",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyProfile",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyProfileLogGroup"
      ]
    },
    "GetMyMedicalRecordsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyMedicalRecords",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyMedicalRecords",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyMedicalRecordsLogGroup"
      ]
    },
    "GetMyPrescriptionsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyPrescriptions",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyPrescriptions",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyPrescriptionsLogGroup"
      ]
    },
    "GetMyVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientPortal.getMyVitalSigns",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMyVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMyVitalSignsLogGroup"
      ]
    },
    "CreateVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/vitalSigns.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateVitalSignsLogGroup"
      ]
    },
    "GetVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/vitalSigns.getByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetVitalSignsLogGroup"
      ]
    },
    "GetLatestVitalSignsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/vitalSigns.getLatest",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getLatestVitalSigns",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetLatestVitalSignsLogGroup"
      ]
    },
    "CreateMedicalRecordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createMedicalRecord",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreateMedicalRecordLogGroup"
      ]
    },
    "GetMedicalRecordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.getById",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMedicalRecord",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMedicalRecordLogGroup"
      ]
    },
    "GetMedicalRecordsByPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.getByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getMedicalRecordsByPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetMedicalRecordsByPatientLogGroup"
      ]
    },
    "UpdateMedicalRecordLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/medicalRecords.update",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-updateMedicalRecord",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "UpdateMedicalRecordLogGroup"
      ]
    },
    "CreatePrescriptionLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/prescriptions.create",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-createPrescription",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "CreatePrescriptionLogGroup"
      ]
    },
    "GetPrescriptionLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/prescriptions.getById",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getPrescription",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPrescriptionLogGroup"
      ]
    },
    "GetPrescriptionsByPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/prescriptions.getByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getPrescriptionsByPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetPrescriptionsByPatientLogGroup"
      ]
    },
    "GetAuditLogsLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/auditLogs.getLogs",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getAuditLogs",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetAuditLogsLogGroup"
      ]
    },
    "GetUploadUrlLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientFiles.getUploadUrl",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getUploadUrl",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetUploadUrlLogGroup"
      ]
    },
    "SaveFileMetadataLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientFiles.saveFileMetadata",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-saveFileMetadata",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "SaveFileMetadataLogGroup"
      ]
    },
    "GetFilesByPatientLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientFiles.getFilesByPatient",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getFilesByPatient",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetFilesByPatientLogGroup"
      ]
    },
    "GetDownloadUrlLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientFiles.getDownloadUrl",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-getDownloadUrl",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "GetDownloadUrlLogGroup"
      ]
    },
    "DeleteFileLambdaFunction": {
      "Type": "AWS::Lambda::Function",
      "Properties": {
        "Code": {
          "S3Bucket": {
            "Ref": "ServerlessDeploymentBucket"
          },
          "S3Key": "serverless/ehr-backend-api/dev/1767346993476-2026-01-02T09:43:13.476Z/ehr-backend-api.zip"
        },
        "Handler": "handlers/patientFiles.deleteFile",
        "Runtime": "nodejs20.x",
        "FunctionName": "ehr-backend-api-dev-deleteFile",
        "MemorySize": 512,
        "Timeout": 30,
        "Environment": {
          "Variables": {
            "USER_POOL_ID": "ap-southeast-1_KAphl41fW",
            "CLIENT_ID": "56ikumm3gld5ln6utag70vf781",
            "REGION": "ap-southeast-1",
            "DB_HOST": "ehr-system-db.c1keewkss49f.ap-southeast-1.rds.amazonaws.com",
            "DB_PORT": "5432",
            "DB_NAME": "ehr_production",
            "DB_USER": "postgres",
            "DB_PASSWORD": "EhrAdmin2025!",
            "JWT_SECRET": "EHR_SYSTEM_WEBAUTHN_SECRET_KEY_2025_SECURE_TOKEN_CHANGE_IN_PRODUCTION",
            "WEBAUTHN_RP_ID": "localhost",
            "WEBAUTHN_ORIGIN": "http://localhost:3000",
            "NODE_ENV": "development",
            "PATIENT_FILES_BUCKET": "ehr-backend-api-patient-files-dev",
            "DB_SSL": "true",
            "PORT": "3001",
            "SES_FROM_EMAIL": "phuchai5904@gmail.com",
            "FRONTEND_URL": "http://localhost:3000"
          }
        },
        "Role": {
          "Fn::GetAtt": [
            "IamRoleLambdaExecution",
            "Arn"
          ]
        }
      },
      "DependsOn": [
        "DeleteFileLogGroup"
      ]
    },
    "WebauthnRegisterStartLambdaVersionrejv6e89DEIHbt6zarXTrHrYDZt2WZd2JRKMolaY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnRegisterStartLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "WebauthnRegisterFinishLambdaVersionjM2D8RviBeA33VAG0gq1JEQSwbCSKWUUnEot69yZgs": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnRegisterFinishLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "WebauthnAuthStartLambdaVersion37C4Irx0Cvw94v4feaIEZQkg75rdx8SV4DVYTcw316w": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnAuthStartLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "WebauthnAuthFinishLambdaVersionhuuIomTUDqgji4tJ3JIOAXBFME4S8PE21UtqpfM7NI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnAuthFinishLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "WebauthnGetCredentialsLambdaVersionJXQyCG61pIGpEXXYVbNPxwsRDPAEwJzWxdMpUJCk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnGetCredentialsLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "WebauthnDeleteCredentialLambdaVersionSTg7t2FodZiLb4LkUriYS1JmdjhRzwSzkKxPgbQm7o": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "WebauthnDeleteCredentialLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "LoginLambdaVersionDzS9jt3UuIJLtu5TarrlGSTDHNWxPmUGpWOUXUYNBA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "LoginLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "ChangePasswordLambdaVersion9ywaLTDQCZnjmJwqIpC94mcKyeKBdMex66OCtwXEc4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ChangePasswordLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "RefreshTokenLambdaVersionihUUcYYoWr3sOoprlUcZeXzhjcu5UunZijIZ2E4DE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "RefreshTokenLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "InitMFALambdaVersion01JWI1Y5KHsvQuYS9PK0cuVsUftzb2JjtNhAFRAvdg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "InitMFALambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "VerifyMFALambdaVersionXSmGNGX93xEMD4HiyiWNaWyisOuzWf0VorkBgjfM": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "VerifyMFALambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetMFAStatusLambdaVersionoIl4UDResigPCKkrGdqlYMndbsXTHgKtYD3ugiUBFE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMFAStatusLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "CreateUserLambdaVersioni83bh6uZeG3Gp0gAmzGFGOPGPR6FJIikkD09VZxtc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateUserLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "ListUsersLambdaVersionEE26GAmxEkuuDEBsz2neaZvvkUmrcCq3NMJiTVNXBA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ListUsersLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "DisableUserLambdaVersionnF6TfpFDuC9trH3ABaA39L4gXGu3iUqbFnWXTsgGas": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "DisableUserLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "ResetUserPasswordLambdaVersionioQRfBZXZSezeDvRWzZwYfOIhc7bLjb7Iwj2eQEZkfA": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "ResetUserPasswordLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "CreatePatientLambdaVersionfs9cLQFJ3BjlC9TZbNxosaFMSQd17nH2sZElcSqE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreatePatientLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetPatientLambdaVersionSdHwAIKbMXSAlA5hBLbTURfFpHO1ZcpGBqu1qGD25Ts": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPatientLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "SearchPatientsLambdaVersionPcPM11AazgyxOUBItNdDs7dvWpe0vec72kmdCOADo0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "SearchPatientsLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "UpdatePatientLambdaVersionKKKrLLy0pPB7bN0RQLY69RaZUzy32SbUQrRdBfBG4": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdatePatientLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetMyProfileLambdaVersionn8AdXNhBR5hy2IqLFEBdYUJeyMcYlXeVhjOu3yzRNg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyProfileLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetMyMedicalRecordsLambdaVersionMTEKV9Bc6wZo9LoYd7pqA7SxpkROdZS7jt80FQSXZQ": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyMedicalRecordsLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetMyPrescriptionsLambdaVersion8QLdX0AcN6ZRuovZQ6p3Ky5BnWoQVXJTQmi8gikcyk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyPrescriptionsLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetMyVitalSignsLambdaVersionYq6ehiY1QkOGMlPe01dUdrGpXzvCgyiG3nDjDXFoM": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMyVitalSignsLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "CreateVitalSignsLambdaVersiontoLmTcG0JiSTYFXO7lB8bP3ebhuGYVsbo9Rjvi6Q6Zc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateVitalSignsLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetVitalSignsLambdaVersionSakDj1Tz38HCgqFNQuqz83J8E5i49nR9cxS0HHDATs": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetVitalSignsLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetLatestVitalSignsLambdaVersionLyaMTvCgu5iFBs86STSbORZzkJCUUOxwTy2cGeMhGo": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetLatestVitalSignsLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "CreateMedicalRecordLambdaVersionXMoHgGSOBTfyeGlGhejczPILIAC6PLmKEXBYBAKdJk": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreateMedicalRecordLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetMedicalRecordLambdaVersionzJJ1xvAVxEEY6OVIwbyP7FvrVnQdWMF9oZS0vCCTqM": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMedicalRecordLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetMedicalRecordsByPatientLambdaVersionxqhhXJINU1aQPYMrDk7KjRHZuVkumf7W7ANtymP95FE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetMedicalRecordsByPatientLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "UpdateMedicalRecordLambdaVersion5u44TOL2QjHQCi30AHmQljcFcmBJbBGn0g8PSP0Ts": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "UpdateMedicalRecordLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "CreatePrescriptionLambdaVersion3fxBZ80HbQ97yMOgO1q108LWwJAR1RrNAvwv2HqAgU": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "CreatePrescriptionLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetPrescriptionLambdaVersion1YlYzwnyw2YVf1KuQ5kD93CHvHtykXmrdJ8r57NpiE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPrescriptionLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetPrescriptionsByPatientLambdaVersionIwKvUwV7dDOveI0GdbT5WwGfID152aDCYYboyEWrQ8": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetPrescriptionsByPatientLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetAuditLogsLambdaVersionwVhWg8HfMzNOlcuP9q6MWbzLf65K3d7am69RjCUc": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetAuditLogsLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetUploadUrlLambdaVersion3JWDaNvQPI9ffRegrh3Yo9GSFqL3tFH7cMDDC4CrS0": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetUploadUrlLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "SaveFileMetadataLambdaVersionYCcztIsduRV9YLuqjSi90Q69MqHMxgEBWIYW7cTyjwY": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "SaveFileMetadataLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetFilesByPatientLambdaVersionUu16UGoPOyNiX78NhNWlOcqi1Bcph0VTEoQlNdlEaiE": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetFilesByPatientLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "GetDownloadUrlLambdaVersionuNkBcYtAAJbqjVIokeXGegOtVvzQGNzMjGGJz7scg": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "GetDownloadUrlLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "DeleteFileLambdaVersioni8rN4JeY5HYbk1VLBVUWtsqoYELaZnSNuskr3EulI": {
      "Type": "AWS::Lambda::Version",
      "DeletionPolicy": "Retain",
      "Properties": {
        "FunctionName": {
          "Ref": "DeleteFileLambdaFunction"
        },
        "CodeSha256": "PVNtbZSJYrpVmX3jusLTpzRgQKlj4MTjulZBLix/l9A="
      }
    },
    "HttpApi": {
      "Type": "AWS::ApiGatewayV2::Api",
      "Properties": {
        "Name": "dev-ehr-backend-api",
        "ProtocolType": "HTTP",
        "CorsConfiguration": {
          "AllowHeaders": [
            "Content-Type",
            "Authorization"
          ],
          "AllowMethods": [
            "GET",
            "POST",
            "PUT",
            "DELETE",
            "OPTIONS"
          ],
          "AllowOrigins": [
            "*"
          ]
        }
      }
    },
    "HttpApiStage": {
      "Type": "AWS::ApiGatewayV2::Stage",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "StageName": "$default",
        "AutoDeploy": true,
        "DefaultRouteSettings": {
          "DetailedMetricsEnabled": false
        }
      }
    },
    "WebauthnRegisterStartLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnRegisterStartLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnRegisterStart": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnRegisterStartLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnRegisterStart": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/register/start",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnRegisterStart"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnRegisterStart"
    },
    "WebauthnRegisterFinishLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnRegisterFinishLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnRegisterFinish": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnRegisterFinishLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnRegisterFinish": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/register/finish",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnRegisterFinish"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnRegisterFinish"
    },
    "WebauthnAuthStartLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnAuthStartLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnAuthStart": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnAuthStartLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnAuthStart": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/auth/start",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnAuthStart"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnAuthStart"
    },
    "WebauthnAuthFinishLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnAuthFinishLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnAuthFinish": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnAuthFinishLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostWebauthnAuthFinish": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /webauthn/auth/finish",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnAuthFinish"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnAuthFinish"
    },
    "WebauthnGetCredentialsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnGetCredentialsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnGetCredentials": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnGetCredentialsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetWebauthnCredentials": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /webauthn/credentials",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnGetCredentials"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnGetCredentials"
    },
    "WebauthnDeleteCredentialLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "WebauthnDeleteCredentialLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationWebauthnDeleteCredential": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "WebauthnDeleteCredentialLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteDeleteWebauthnCredentialsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "DELETE /webauthn/credentials/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationWebauthnDeleteCredential"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationWebauthnDeleteCredential"
    },
    "LoginLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "LoginLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationLogin": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "LoginLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthLogin": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/login",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationLogin"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationLogin"
    },
    "ChangePasswordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ChangePasswordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationChangePassword": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ChangePasswordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthChangeDashpassword": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/change-password",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationChangePassword"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationChangePassword"
    },
    "RefreshTokenLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "RefreshTokenLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationRefreshToken": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "RefreshTokenLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostAuthRefresh": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /auth/refresh",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationRefreshToken"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationRefreshToken"
    },
    "InitMFALambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "InitMFALambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationInitMFA": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "InitMFALambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostMfaInit": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /mfa/init",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationInitMFA"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationInitMFA"
    },
    "VerifyMFALambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "VerifyMFALambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationVerifyMFA": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "VerifyMFALambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostMfaVerify": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /mfa/verify",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationVerifyMFA"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationVerifyMFA"
    },
    "GetMFAStatusLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMFAStatusLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMFAStatus": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMFAStatusLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMfaStatusUseridVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /mfa/status/{userId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMFAStatus"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMFAStatus"
    },
    "CreateUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostUsers": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /users",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateUser"
    },
    "ListUsersLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ListUsersLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationListUsers": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ListUsersLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetUsers": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /users",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationListUsers"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationListUsers"
    },
    "DisableUserLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "DisableUserLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationDisableUser": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "DisableUserLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutUsersIdVarDisable": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /users/{id}/disable",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationDisableUser"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationDisableUser"
    },
    "ResetUserPasswordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "ResetUserPasswordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationResetUserPassword": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "ResetUserPasswordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostUsersIdVarResetDashpassword": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /users/{id}/reset-password",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationResetUserPassword"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationResetUserPassword"
    },
    "CreatePatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreatePatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreatePatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreatePatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostPatients": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /patients",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreatePatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreatePatient"
    },
    "GetPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patients/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPatient"
    },
    "SearchPatientsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "SearchPatientsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationSearchPatients": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "SearchPatientsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientsSearch": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patients/search",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationSearchPatients"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationSearchPatients"
    },
    "UpdatePatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdatePatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdatePatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdatePatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutPatientsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /patients/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdatePatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdatePatient"
    },
    "GetMyProfileLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyProfileLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyProfile": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyProfileLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patients/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyProfile"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyProfile"
    },
    "GetMyMedicalRecordsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyMedicalRecordsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyMedicalRecords": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyMedicalRecordsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMedicalDashrecordsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /medical-records/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyMedicalRecords"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyMedicalRecords"
    },
    "GetMyPrescriptionsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyPrescriptionsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyPrescriptions": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyPrescriptionsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPrescriptionsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /prescriptions/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyPrescriptions"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyPrescriptions"
    },
    "GetMyVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMyVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMyVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMyVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetVitalDashsignsMe": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /vital-signs/me",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMyVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMyVitalSigns"
    },
    "CreateVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostVitalDashsigns": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /vital-signs",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateVitalSigns"
    },
    "GetVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetVitalDashsignsPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /vital-signs/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetVitalSigns"
    },
    "GetLatestVitalSignsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetLatestVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetLatestVitalSigns": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetLatestVitalSignsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetVitalDashsignsPatientPatientidVarLatest": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /vital-signs/patient/{patientId}/latest",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetLatestVitalSigns"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetLatestVitalSigns"
    },
    "CreateMedicalRecordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreateMedicalRecord": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostMedicalDashrecords": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /medical-records",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreateMedicalRecord"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreateMedicalRecord"
    },
    "GetMedicalRecordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMedicalRecord": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMedicalDashrecordsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /medical-records/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMedicalRecord"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMedicalRecord"
    },
    "GetMedicalRecordsByPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetMedicalRecordsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetMedicalRecordsByPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetMedicalRecordsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetMedicalDashrecordsPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /medical-records/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetMedicalRecordsByPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetMedicalRecordsByPatient"
    },
    "UpdateMedicalRecordLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "UpdateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationUpdateMedicalRecord": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "UpdateMedicalRecordLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePutMedicalDashrecordsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "PUT /medical-records/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationUpdateMedicalRecord"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationUpdateMedicalRecord"
    },
    "CreatePrescriptionLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "CreatePrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationCreatePrescription": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "CreatePrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostPrescriptions": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /prescriptions",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationCreatePrescription"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationCreatePrescription"
    },
    "GetPrescriptionLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPrescription": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPrescriptionLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPrescriptionsIdVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /prescriptions/{id}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPrescription"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPrescription"
    },
    "GetPrescriptionsByPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetPrescriptionsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetPrescriptionsByPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetPrescriptionsByPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPrescriptionsPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /prescriptions/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetPrescriptionsByPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetPrescriptionsByPatient"
    },
    "GetAuditLogsLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetAuditLogsLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetAuditLogs": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetAuditLogsLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetAuditDashlogs": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /audit-logs",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetAuditLogs"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetAuditLogs"
    },
    "GetUploadUrlLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetUploadUrlLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetUploadUrl": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetUploadUrlLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostPatientDashfilesUploadDashurl": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /patient-files/upload-url",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetUploadUrl"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetUploadUrl"
    },
    "SaveFileMetadataLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "SaveFileMetadataLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationSaveFileMetadata": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "SaveFileMetadataLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRoutePostPatientDashfilesMetadata": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "POST /patient-files/metadata",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationSaveFileMetadata"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationSaveFileMetadata"
    },
    "GetFilesByPatientLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetFilesByPatientLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetFilesByPatient": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetFilesByPatientLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientDashfilesPatientPatientidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patient-files/patient/{patientId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetFilesByPatient"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetFilesByPatient"
    },
    "GetDownloadUrlLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "GetDownloadUrlLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationGetDownloadUrl": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "GetDownloadUrlLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteGetPatientDashfilesDownloadFileidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "GET /patient-files/download/{fileId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationGetDownloadUrl"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationGetDownloadUrl"
    },
    "DeleteFileLambdaPermissionHttpApi": {
      "Type": "AWS::Lambda::Permission",
      "Properties": {
        "FunctionName": {
          "Fn::GetAtt": [
            "DeleteFileLambdaFunction",
            "Arn"
          ]
        },
        "Action": "lambda:InvokeFunction",
        "Principal": "apigateway.amazonaws.com",
        "SourceArn": {
          "Fn::Join": [
            "",
            [
              "arn:",
              {
                "Ref": "AWS::Partition"
              },
              ":execute-api:",
              {
                "Ref": "AWS::Region"
              },
              ":",
              {
                "Ref": "AWS::AccountId"
              },
              ":",
              {
                "Ref": "HttpApi"
              },
              "/*"
            ]
          ]
        }
      }
    },
    "HttpApiIntegrationDeleteFile": {
      "Type": "AWS::ApiGatewayV2::Integration",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "IntegrationType": "AWS_PROXY",
        "IntegrationUri": {
          "Fn::GetAtt": [
            "DeleteFileLambdaFunction",
            "Arn"
          ]
        },
        "PayloadFormatVersion": "2.0",
        "TimeoutInMillis": 30000
      }
    },
    "HttpApiRouteDeletePatientDashfilesFileidVar": {
      "Type": "AWS::ApiGatewayV2::Route",
      "Properties": {
        "ApiId": {
          "Ref": "HttpApi"
        },
        "RouteKey": "DELETE /patient-files/{fileId}",
        "Target": {
          "Fn::Join": [
            "/",
            [
              "integrations",
              {
                "Ref": "HttpApiIntegrationDeleteFile"
              }
            ]
          ]
        }
      },
      "DependsOn": "HttpApiIntegrationDeleteFile"
    },
    "PatientFilesBucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "BucketName": "ehr-backend-api-patient-files-dev",
        "BucketEncryption": {
          "ServerSideEncryptionConfiguration": [
            {
              "ServerSideEncryptionByDefault": {
                "SSEAlgorithm": "AES256"
              }
            }
          ]
        },
        "PublicAccessBlockConfiguration": {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true
        },
        "CorsConfiguration": {
          "CorsRules": [
            {
              "AllowedOrigins": [
                "*"
              ],
              "AllowedMethods": [
                "GET",
                "PUT",
                "POST"
              ],
              "AllowedHeaders": [
                "*"
              ]
            }
          ]
        }
      }
    }
  },
  "Outputs": {
    "ServerlessDeploymentBucketName": {
      "Value": {
        "Ref": "ServerlessDeploymentBucket"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ServerlessDeploymentBucketName"
      }
    },
    "WebauthnRegisterStartLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnRegisterStartLambdaVersionrejv6e89DEIHbt6zarXTrHrYDZt2WZd2JRKMolaY"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnRegisterStartLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnRegisterFinishLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnRegisterFinishLambdaVersionjM2D8RviBeA33VAG0gq1JEQSwbCSKWUUnEot69yZgs"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnRegisterFinishLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnAuthStartLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnAuthStartLambdaVersion37C4Irx0Cvw94v4feaIEZQkg75rdx8SV4DVYTcw316w"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnAuthStartLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnAuthFinishLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnAuthFinishLambdaVersionhuuIomTUDqgji4tJ3JIOAXBFME4S8PE21UtqpfM7NI"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnAuthFinishLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnGetCredentialsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnGetCredentialsLambdaVersionJXQyCG61pIGpEXXYVbNPxwsRDPAEwJzWxdMpUJCk"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnGetCredentialsLambdaFunctionQualifiedArn"
      }
    },
    "WebauthnDeleteCredentialLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "WebauthnDeleteCredentialLambdaVersionSTg7t2FodZiLb4LkUriYS1JmdjhRzwSzkKxPgbQm7o"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-WebauthnDeleteCredentialLambdaFunctionQualifiedArn"
      }
    },
    "LoginLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "LoginLambdaVersionDzS9jt3UuIJLtu5TarrlGSTDHNWxPmUGpWOUXUYNBA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-LoginLambdaFunctionQualifiedArn"
      }
    },
    "ChangePasswordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ChangePasswordLambdaVersion9ywaLTDQCZnjmJwqIpC94mcKyeKBdMex66OCtwXEc4"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ChangePasswordLambdaFunctionQualifiedArn"
      }
    },
    "RefreshTokenLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "RefreshTokenLambdaVersionihUUcYYoWr3sOoprlUcZeXzhjcu5UunZijIZ2E4DE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-RefreshTokenLambdaFunctionQualifiedArn"
      }
    },
    "InitMFALambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "InitMFALambdaVersion01JWI1Y5KHsvQuYS9PK0cuVsUftzb2JjtNhAFRAvdg"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-InitMFALambdaFunctionQualifiedArn"
      }
    },
    "VerifyMFALambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "VerifyMFALambdaVersionXSmGNGX93xEMD4HiyiWNaWyisOuzWf0VorkBgjfM"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-VerifyMFALambdaFunctionQualifiedArn"
      }
    },
    "GetMFAStatusLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMFAStatusLambdaVersionoIl4UDResigPCKkrGdqlYMndbsXTHgKtYD3ugiUBFE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMFAStatusLambdaFunctionQualifiedArn"
      }
    },
    "CreateUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateUserLambdaVersioni83bh6uZeG3Gp0gAmzGFGOPGPR6FJIikkD09VZxtc"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreateUserLambdaFunctionQualifiedArn"
      }
    },
    "ListUsersLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ListUsersLambdaVersionEE26GAmxEkuuDEBsz2neaZvvkUmrcCq3NMJiTVNXBA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ListUsersLambdaFunctionQualifiedArn"
      }
    },
    "DisableUserLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "DisableUserLambdaVersionnF6TfpFDuC9trH3ABaA39L4gXGu3iUqbFnWXTsgGas"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-DisableUserLambdaFunctionQualifiedArn"
      }
    },
    "ResetUserPasswordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "ResetUserPasswordLambdaVersionioQRfBZXZSezeDvRWzZwYfOIhc7bLjb7Iwj2eQEZkfA"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-ResetUserPasswordLambdaFunctionQualifiedArn"
      }
    },
    "CreatePatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreatePatientLambdaVersionfs9cLQFJ3BjlC9TZbNxosaFMSQd17nH2sZElcSqE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreatePatientLambdaFunctionQualifiedArn"
      }
    },
    "GetPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPatientLambdaVersionSdHwAIKbMXSAlA5hBLbTURfFpHO1ZcpGBqu1qGD25Ts"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetPatientLambdaFunctionQualifiedArn"
      }
    },
    "SearchPatientsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "SearchPatientsLambdaVersionPcPM11AazgyxOUBItNdDs7dvWpe0vec72kmdCOADo0"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-SearchPatientsLambdaFunctionQualifiedArn"
      }
    },
    "UpdatePatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdatePatientLambdaVersionKKKrLLy0pPB7bN0RQLY69RaZUzy32SbUQrRdBfBG4"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-UpdatePatientLambdaFunctionQualifiedArn"
      }
    },
    "GetMyProfileLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyProfileLambdaVersionn8AdXNhBR5hy2IqLFEBdYUJeyMcYlXeVhjOu3yzRNg"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyProfileLambdaFunctionQualifiedArn"
      }
    },
    "GetMyMedicalRecordsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyMedicalRecordsLambdaVersionMTEKV9Bc6wZo9LoYd7pqA7SxpkROdZS7jt80FQSXZQ"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyMedicalRecordsLambdaFunctionQualifiedArn"
      }
    },
    "GetMyPrescriptionsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyPrescriptionsLambdaVersion8QLdX0AcN6ZRuovZQ6p3Ky5BnWoQVXJTQmi8gikcyk"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyPrescriptionsLambdaFunctionQualifiedArn"
      }
    },
    "GetMyVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMyVitalSignsLambdaVersionYq6ehiY1QkOGMlPe01dUdrGpXzvCgyiG3nDjDXFoM"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMyVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "CreateVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateVitalSignsLambdaVersiontoLmTcG0JiSTYFXO7lB8bP3ebhuGYVsbo9Rjvi6Q6Zc"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreateVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "GetVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetVitalSignsLambdaVersionSakDj1Tz38HCgqFNQuqz83J8E5i49nR9cxS0HHDATs"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "GetLatestVitalSignsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetLatestVitalSignsLambdaVersionLyaMTvCgu5iFBs86STSbORZzkJCUUOxwTy2cGeMhGo"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetLatestVitalSignsLambdaFunctionQualifiedArn"
      }
    },
    "CreateMedicalRecordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreateMedicalRecordLambdaVersionXMoHgGSOBTfyeGlGhejczPILIAC6PLmKEXBYBAKdJk"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreateMedicalRecordLambdaFunctionQualifiedArn"
      }
    },
    "GetMedicalRecordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMedicalRecordLambdaVersionzJJ1xvAVxEEY6OVIwbyP7FvrVnQdWMF9oZS0vCCTqM"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMedicalRecordLambdaFunctionQualifiedArn"
      }
    },
    "GetMedicalRecordsByPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetMedicalRecordsByPatientLambdaVersionxqhhXJINU1aQPYMrDk7KjRHZuVkumf7W7ANtymP95FE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetMedicalRecordsByPatientLambdaFunctionQualifiedArn"
      }
    },
    "UpdateMedicalRecordLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "UpdateMedicalRecordLambdaVersion5u44TOL2QjHQCi30AHmQljcFcmBJbBGn0g8PSP0Ts"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-UpdateMedicalRecordLambdaFunctionQualifiedArn"
      }
    },
    "CreatePrescriptionLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "CreatePrescriptionLambdaVersion3fxBZ80HbQ97yMOgO1q108LWwJAR1RrNAvwv2HqAgU"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-CreatePrescriptionLambdaFunctionQualifiedArn"
      }
    },
    "GetPrescriptionLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPrescriptionLambdaVersion1YlYzwnyw2YVf1KuQ5kD93CHvHtykXmrdJ8r57NpiE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetPrescriptionLambdaFunctionQualifiedArn"
      }
    },
    "GetPrescriptionsByPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetPrescriptionsByPatientLambdaVersionIwKvUwV7dDOveI0GdbT5WwGfID152aDCYYboyEWrQ8"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetPrescriptionsByPatientLambdaFunctionQualifiedArn"
      }
    },
    "GetAuditLogsLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetAuditLogsLambdaVersionwVhWg8HfMzNOlcuP9q6MWbzLf65K3d7am69RjCUc"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetAuditLogsLambdaFunctionQualifiedArn"
      }
    },
    "GetUploadUrlLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetUploadUrlLambdaVersion3JWDaNvQPI9ffRegrh3Yo9GSFqL3tFH7cMDDC4CrS0"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetUploadUrlLambdaFunctionQualifiedArn"
      }
    },
    "SaveFileMetadataLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "SaveFileMetadataLambdaVersionYCcztIsduRV9YLuqjSi90Q69MqHMxgEBWIYW7cTyjwY"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-SaveFileMetadataLambdaFunctionQualifiedArn"
      }
    },
    "GetFilesByPatientLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetFilesByPatientLambdaVersionUu16UGoPOyNiX78NhNWlOcqi1Bcph0VTEoQlNdlEaiE"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetFilesByPatientLambdaFunctionQualifiedArn"
      }
    },
    "GetDownloadUrlLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "GetDownloadUrlLambdaVersionuNkBcYtAAJbqjVIokeXGegOtVvzQGNzMjGGJz7scg"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-GetDownloadUrlLambdaFunctionQualifiedArn"
      }
    },
    "DeleteFileLambdaFunctionQualifiedArn": {
      "Description": "Current Lambda function version",
      "Value": {
        "Ref": "DeleteFileLambdaVersioni8rN4JeY5HYbk1VLBVUWtsqoYELaZnSNuskr3EulI"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-DeleteFileLambdaFunctionQualifiedArn"
      }
    },
    "HttpApiId": {
      "Description": "Id of the HTTP API",
      "Value": {
        "Ref": "HttpApi"
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-HttpApiId"
      }
    },
    "HttpApiUrl": {
      "Description": "URL of the HTTP API",
      "Value": {
        "Fn::Join": [
          "",
          [
            "https://",
            {
              "Ref": "HttpApi"
            },
            ".execute-api.",
            {
              "Ref": "AWS::Region"
            },
            ".",
            {
              "Ref": "AWS::URLSuffix"
            }
          ]
        ]
      },
      "Export": {
        "Name": "sls-ehr-backend-api-dev-HttpApiUrl"
      }
    }
  }
}